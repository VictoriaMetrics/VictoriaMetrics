(this.webpackJsonpvmui=this.webpackJsonpvmui||[]).push([[0],{204:function(e,t,n){},219:function(e,t){},223:function(e,t,n){},224:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(53),i=n.n(c),o=(n(204),n(9)),s=n(317),l=n(316),u=n(0),d=Object(a.createContext)({showInfoMessage:function(){}}),j=function(e){var t=e.children,n=Object(a.useState)({}),r=Object(o.a)(n,2),c=r[0],i=r[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(a.useState)(void 0),p=Object(o.a)(f,2),x=p[0],v=p[1];Object(a.useEffect)((function(){x&&(i({message:x,key:(new Date).getTime()}),h(!0))}),[x]);return Object(u.jsxs)(d.Provider,{value:{showInfoMessage:v},children:[Object(u.jsx)(s.a,{open:O,autoHideDuration:4e3,onClose:function(e,t){"clickaway"!==t&&(v(void 0),h(!1))},children:Object(u.jsx)(l.a,{children:c.message})},c.key),t]})},b=n(351),O=n(352),h=n(327),f=n(245),p=n(343),x=n(241),v=n(328),m=n(330),g=n(322),y=n(326),E=n(148),S=n.n(E),_=n(3),w=n(17),T=n(39),C=n.n(T),A=n(144),R=n.n(A),I=n(145),k=n.n(I),U=n(105),D=n.n(U);C.a.extend(R.a),C.a.extend(k.a);var H,M=window.innerWidth/2,N=1,L=1578e8,Y="YYYY-MM-DD[T]HH:mm:ss",P=[{long:"days",short:"d",possible:"day"},{long:"weeks",short:"w",possible:"week"},{long:"months",short:"M",possible:"mon"},{long:"years",short:"y",possible:"year"},{long:"hours",short:"h",possible:"hour"},{long:"minutes",short:"m",possible:"min"},{long:"seconds",short:"s",possible:"sec"},{long:"milliseconds",short:"ms",possible:"millisecond"}],B=P.map((function(e){return e.short})),q=function(e){return+D()(e).format("0.000")},F=function(e){var t=e.match(/\d+/g),n=e.match(/[a-zA-Z]+/g);if(n&&t&&B.includes(n[0]))return Object(_.a)({},n[0],t[0])},z=function(e,t){var n=(t||new Date).valueOf()/1e3,a=e.trim().split(" ").reduce((function(e,t){var n=F(t);return n?Object(w.a)(Object(w.a)({},e),n):Object(w.a)({},e)}),{}),r=C.a.duration(a).asSeconds();return{start:n-r,end:n,step:q(r/M)||.001,date:Q(t||new Date)}},Q=function(e){return C()(e).utc().format(Y)},G=function(e){var t=Math.floor(e%1e3),n=Math.floor(e/1e3%60),a=Math.floor(e/1e3/60%60),r=Math.floor(e/1e3/3600%24),c=Math.floor(e/864e5),i=["d","h","m","s","ms"];return[c,r,a,n,t].map((function(e,t){return e?"".concat(e).concat(i[t]):""})).filter((function(e){return e})).join(" ")},W=function(e){return new Date(1e3*e)},J=function(e,t){t?window.localStorage.setItem(e,JSON.stringify({value:t})):K([e])},V=function(e){var t=window.localStorage.getItem(e);if(null!==t)try{var n;return null===(n=JSON.parse(t))||void 0===n?void 0:n.value}catch(a){return t}},K=function(e){return e.forEach((function(e){return window.localStorage.removeItem(e)}))},X=["BASIC_AUTH_DATA","BEARER_AUTH_DATA"],Z=n(146),$=n.n(Z),ee=n(116),te=n.n(ee),ne={"time.duration":"range_input","time.period.date":"end_input","time.period.step":"step_input",displayType:"tab"},ae=function(e){var t=new Map(Object.entries(ne)),n=te()(e,"query",""),a=[];n.forEach((function(n,r){t.forEach((function(t,n){var c=te()(e,n,"");if(c){var i=encodeURIComponent(c);a.push("g".concat(r,".").concat(t,"=").concat(i))}})),a.push("g".concat(r,".expr=").concat(n))})),function(e){var t=window;if(t){var n="".concat(t.location.protocol,"//").concat(t.location.host).concat(t.location.pathname,"?").concat(e);t.history.pushState({path:n},"",n)}}(a.join("&"))},re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.search,a=$.a.parse(n,{ignoreQueryPrefix:!0});return te()(a,e,t||"")},ce=re("g0.range_input","1h"),ie=(H=re("g0.end_input",new Date(C()().utc().format(Y))),C()(H).utcOffset(0,!0).local().format(Y)),oe=function(){var e,t=(null===(e=window.location.search.match(/g\d+.expr/gim))||void 0===e?void 0:e.length)||1;return new Array(t).fill(1).map((function(e,t){return re("g".concat(t,".expr"),"")}))}(),se={serverUrl:window.location.href.replace(/\/(?:prometheus\/)?(?:graph|vmui)\/.*/,"/prometheus/"),displayType:re("tab","chart"),query:oe,queryHistory:oe.map((function(e){return{index:0,values:[e]}})),time:{duration:ce,period:z(ce,new Date(ie))},queryControls:{autoRefresh:!1,autocomplete:V("AUTOCOMPLETE")||!1,nocache:V("NO_CACHE")||!1}};function le(e,t){switch(t.type){case"SET_DISPLAY_TYPE":return Object(w.a)(Object(w.a)({},e),{},{displayType:t.payload});case"SET_SERVER":return Object(w.a)(Object(w.a)({},e),{},{serverUrl:t.payload});case"SET_QUERY":return Object(w.a)(Object(w.a)({},e),{},{query:t.payload});case"SET_QUERY_HISTORY":return Object(w.a)(Object(w.a)({},e),{},{queryHistory:t.payload});case"SET_QUERY_HISTORY_BY_INDEX":return Object(w.a)(Object(w.a)({},e),{},{queryHistory:e.queryHistory.splice(t.payload.queryNumber,1,t.payload.value)});case"SET_DURATION":return Object(w.a)(Object(w.a)({},e),{},{time:Object(w.a)(Object(w.a)({},e.time),{},{duration:t.payload,period:z(t.payload,W(e.time.period.end))})});case"SET_UNTIL":return Object(w.a)(Object(w.a)({},e),{},{time:Object(w.a)(Object(w.a)({},e.time),{},{period:z(e.time.duration,t.payload)})});case"SET_PERIOD":var n=function(e){var t=e.to.valueOf()-e.from.valueOf();return G(t)}(t.payload);return Object(w.a)(Object(w.a)({},e),{},{queryControls:Object(w.a)(Object(w.a)({},e.queryControls),{},{autoRefresh:!1}),time:Object(w.a)(Object(w.a)({},e.time),{},{duration:n,period:z(n,t.payload.to)})});case"TOGGLE_AUTOREFRESH":return Object(w.a)(Object(w.a)({},e),{},{queryControls:Object(w.a)(Object(w.a)({},e.queryControls),{},{autoRefresh:!e.queryControls.autoRefresh})});case"TOGGLE_AUTOCOMPLETE":return Object(w.a)(Object(w.a)({},e),{},{queryControls:Object(w.a)(Object(w.a)({},e.queryControls),{},{autocomplete:!e.queryControls.autocomplete})});case"NO_CACHE":return Object(w.a)(Object(w.a)({},e),{},{queryControls:Object(w.a)(Object(w.a)({},e.queryControls),{},{nocache:!e.queryControls.nocache})});case"RUN_QUERY":return Object(w.a)(Object(w.a)({},e),{},{time:Object(w.a)(Object(w.a)({},e.time),{},{period:z(e.time.duration,W(e.time.period.end))})});case"RUN_QUERY_TO_NOW":return Object(w.a)(Object(w.a)({},e),{},{time:Object(w.a)(Object(w.a)({},e.time),{},{period:z(e.time.duration)})});default:throw new Error}}var ue=Object(a.createContext)({}),de=function(){return Object(a.useContext)(ue).state},je=function(){return Object(a.useContext)(ue).dispatch},be=Object.entries(se).reduce((function(e,t){var n=Object(o.a)(t,2),a=n[0],r=n[1];return Object(w.a)(Object(w.a)({},e),{},Object(_.a)({},a,re(a)||r))}),{}),Oe=function(e){var t=e.children,n=Object(a.useReducer)(le,be),r=Object(o.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){ae(c)}),[c]);var s=Object(a.useMemo)((function(){return{state:c,dispatch:i}}),[c,i]);return Object(u.jsx)(ue.Provider,{value:s,children:t})},he=function(e){return Object(u.jsxs)(h.a,{position:"relative",display:"inline-flex",children:[Object(u.jsx)(v.a,Object(w.a)({variant:"determinate"},e)),Object(u.jsx)(h.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(u.jsx)(f.a,{variant:"caption",component:"div",children:"".concat(e.label,"s")})})]})},fe=n(313),pe=n(10),xe=n(329),ve=Object(pe.a)(xe.a)((function(){return{padding:10,"& .MuiSwitch-track":{borderRadius:14,"&:before, &:after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:14,height:14}},"& .MuiSwitch-thumb":{boxShadow:"none",width:12,height:12,margin:4}}})),me=Object(fe.a)({colorizing:{color:"white"}}),ge=function(){var e=me(),t=je(),n=de().queryControls.autoRefresh,c=Object(a.useState)(5),i=Object(o.a)(c,2),s=i[0],l=i[1],d=Object(a.useState)(),j=Object(o.a)(d,2),b=j[0],O=j[1],f=r.a.useState(100),p=Object(o.a)(f,2),x=p[0],v=p[1];Object(a.useEffect)((function(){var e;return n&&(O((new Date).valueOf()),e=setInterval((function(){O((new Date).valueOf()),t({type:"RUN_QUERY_TO_NOW"})}),1e3*s)),function(){e&&clearInterval(e)}}),[s,n]),Object(a.useEffect)((function(){var e=setInterval((function(){if(n&&b){var e=((new Date).valueOf()-b)/1e3,t=Math.floor(e/s*100);v(t)}}),16);return function(){clearInterval(e)}}),[n,b,s]);var E=function(){l((function(e){switch(e){case 1:return 2;default:return 5;case 5:return 1}}))};return Object(u.jsxs)(h.a,{display:"flex",alignItems:"center",children:[Object(u.jsx)(m.a,{control:Object(u.jsx)(ve,{className:e.colorizing,checked:n,onChange:function(){t({type:"TOGGLE_AUTOREFRESH"})}}),label:"Auto-refresh"}),n&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(he,{className:e.colorizing,label:s,value:x,onClick:function(){E()}}),Object(u.jsx)(g.a,{title:"Change delay refresh",children:Object(u.jsx)(h.a,{ml:1,children:Object(u.jsx)(y.a,{onClick:function(){E()},children:Object(u.jsx)(S.a,{style:{color:"white"}})})})})]})]})},ye=n(151),Ee=n.n(ye),Se=n(149),_e=n.n(Se),we=n(150),Te=n.n(we),Ce=n(332),Ae=n(323),Re=n(331),Ie=Object(Re.a)({root:{display:"grid",gridTemplateColumns:"18px auto",gridGap:6,padding:"8px 12px",color:"white",lineHeight:"19px","&.Mui-selected":{color:"white"}}})(Ce.a),ke=function(){var e=de().displayType,t=je();return Object(u.jsxs)(Ae.a,{value:e,exclusive:!0,onChange:function(n,a){return t({type:"SET_DISPLAY_TYPE",payload:null!==a&&void 0!==a?a:e})},children:[Object(u.jsxs)(Ie,{value:"chart","aria-label":"display as chart",children:[Object(u.jsx)(_e.a,{}),Object(u.jsx)("span",{children:"Query Range as Chart"})]}),Object(u.jsxs)(Ie,{value:"code","aria-label":"display as code",children:[Object(u.jsx)(Te.a,{}),Object(u.jsx)("span",{children:"Instant Query as JSON"})]}),Object(u.jsxs)(Ie,{value:"table","aria-label":"display as table",children:[Object(u.jsx)(Ee.a,{}),Object(u.jsx)("span",{children:"Instant Query as Table"})]})]})},Ue=n(21),De=n(152),He={yaxis:{limits:{enable:!1,range:{1:[0,0]}}}};function Me(e,t){switch(t.type){case"TOGGLE_ENABLE_YAXIS_LIMITS":return Object(w.a)(Object(w.a)({},e),{},{yaxis:Object(w.a)(Object(w.a)({},e.yaxis),{},{limits:Object(w.a)(Object(w.a)({},e.yaxis.limits),{},{enable:!e.yaxis.limits.enable})})});case"SET_YAXIS_LIMITS":return Object(w.a)(Object(w.a)({},e),{},{yaxis:Object(w.a)(Object(w.a)({},e.yaxis),{},{limits:Object(w.a)(Object(w.a)({},e.yaxis.limits),{},{range:t.payload})})});default:throw new Error}}var Ne,Le=Object(a.createContext)({}),Ye=function(){return Object(a.useContext)(Le).state},Pe=function(){return Object(a.useContext)(Le).dispatch},Be=function(e){var t=e.children,n=Object(a.useReducer)(Me,He),r=Object(o.a)(n,2),c=r[0],i=r[1],s=Object(a.useMemo)((function(){return{state:c,dispatch:i}}),[c,i]);return Object(u.jsx)(Le.Provider,{value:s,children:t})},qe=function(e){if(7!=e.length)return"0, 0, 0";var t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return"".concat(t,", ").concat(n,", ").concat(a)},Fe={height:500,legend:{show:!1},cursor:{drag:{x:!1,y:!1},focus:{prox:30},bind:{mouseup:function(){return null},mousedown:function(){return null},click:function(){return null},dblclick:function(){return null},mouseenter:function(){return null}}}},ze=function(e,t){return t.map((function(e){return e>1e3?D()(e).format("0.0a"):e}))},Qe=function(e,t){return function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);for(var a="#",r=0;r<3;r++)a+=("00"+(t>>8*r&255).toString(16)).substr(-2);return a}("".concat(e).concat(t))},Ge=function(e){return e<=1?[]:[4*e,1.2*e]},We=function(e){for(var t=e.length,n=-1/0;t--;)e[t]>n&&(n=e[t]);return n},Je=function(e){for(var t=e.length,n=1/0;t--;)e[t]<n&&(n=e[t]);return n},Ve=function(e){return Array.from(new Set(e.map((function(e){return e.scale})))).map((function(e){var t={scale:e,show:!0,font:"10px Arial",values:ze};return e?Number(e)%2?t:Object(w.a)(Object(w.a)({},t),{},{side:1}):{space:80}}))},Ke=function(e){var t,n,a=e.u,r=e.tooltipIdx,c=e.metrics,i=e.series,o=e.tooltip,s=e.tooltipOffset,l=r.seriesIdx,u=r.dataIdx,d=a.data[l][u],j=a.data[0][u],b=(null===(t=c[l-1])||void 0===t?void 0:t.metric)||{},O=Qe(Number(i[l].scale||0),i[l].label||""),h=a.over.getBoundingClientRect(),f=h.width,p=h.height,x=a.valToPos(d||0,(null===(n=i[l])||void 0===n?void 0:n.scale)||"1"),v=a.valToPos(j,"x"),m=o.getBoundingClientRect(),g=m.width,y=m.height,E=v+g>=f,S=x+y>=p;o.style.display="grid",o.style.top="".concat(s.top+x+10-(S?y+10:0),"px"),o.style.left="".concat(s.left+v+10-(E?g+20:0),"px");var _=C()(new Date(1e3*j)).format("YYYY-MM-DD HH:mm:ss:SSS (Z)"),w=Object.keys(b).filter((function(e){return"__name__"!==e})).map((function(e){return"<div><b>".concat(e,"</b>: ").concat(b[e],"</div>")})).join(""),T='<div class="u-tooltip__marker" style="background: '.concat(O,'"></div>');o.innerHTML="<div>".concat(_,'</div>\n                       <div class="u-tooltip-data">\n                         ').concat(T).concat(b.__name__||"",': <b class="u-tooltip-data__value">').concat(d,'</b>\n                       </div>\n                       <div class="u-tooltip__info">').concat(w,"</div>")},Xe=n(153),Ze=n.n(Xe);n(222),n(223);!function(e){e.xRange="xRange",e.yRange="yRange",e.data="data"}(Ne||(Ne={}));var $e=function(e){var t=e.data,n=e.series,r=e.metrics,c=void 0===r?[]:r,i=e.limits,s=je(),l=de().time.period,d=Ye().yaxis,j=Object(a.useRef)(null),b=Object(a.useRef)(null),O=Object(a.useState)(!1),h=Object(o.a)(O,2),f=h[0],p=h[1],x=Object(a.useState)(0),v=Object(o.a)(x,2),m=v[0],g=v[1],y=Object(a.useState)({min:l.start,max:l.end}),E=Object(o.a)(y,2),S=E[0],_=E[1],T=Object(a.useState)(),C=Object(o.a)(T,2),A=C[0],R=C[1],I=document.createElement("div");I.className="u-tooltip";var k={seriesIdx:1,dataIdx:0},U={left:0,top:0},D=Object(a.useCallback)(Ze()((function(e){var t=e.min,n=e.max;s({type:"SET_PERIOD",payload:{from:new Date(1e3*t),to:new Date(1e3*n)}})}),500),[]),H=function(e){var t=e.u,n=e.min,a=e.max,r=1e3*(a-n);r<N||r>L||(t.setScale("x",{min:n,max:a}),_({min:n,max:a}),D({min:n,max:a}))},M=function(){return[S.min,S.max]},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0;return d.limits.enable?d.limits.range[a]:t&&n?[t-.05*t,n+.05*n]:i[a]},P=Object(w.a)(Object(w.a)({},Fe),{},{series:n,axes:Ve(n),scales:Object(w.a)({},function(){var e={x:{range:M}};return Object.keys(d.limits.range).forEach((function(t){e[t]={range:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Y(e,n,a,t)}}})),e}()),width:j.current?j.current.offsetWidth:400,plugins:[{hooks:{ready:function(e){var t,n=.85;U.left=parseFloat(e.over.style.left),U.top=parseFloat(e.over.style.top),null===(t=e.root.querySelector(".u-wrap"))||void 0===t||t.appendChild(I),e.over.addEventListener("mousedown",(function(t){return function(e){var t=e.e,n=e.factor,a=void 0===n?.85:n,r=e.u,c=e.setPanning,i=e.setPlotScale;if(0===t.button){t.preventDefault(),c(!0);var o=t.clientX,s=r.posToVal(1,"x")-r.posToVal(0,"x"),l=r.scales.x.min||0,u=r.scales.x.max||0,d=function(e){e.preventDefault();var t=s*((e.clientX-o)*a);i({u:r,min:l-t,max:u-t})};document.addEventListener("mousemove",d),document.addEventListener("mouseup",(function e(){c(!1),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e)}))}}({u:e,e:t,setPanning:p,setPlotScale:H,factor:n})})),e.over.addEventListener("wheel",(function(t){if(t.ctrlKey||t.metaKey){t.preventDefault();var a=e.over.getBoundingClientRect().width;e.cursor.left&&e.cursor.left>0&&g(e.cursor.left);var r=e.posToVal(m,"x"),c=(e.scales.x.max||0)-(e.scales.x.min||0),i=t.deltaY<0?c*n:c/n,o=r-m/a*i,s=o+i;e.batch((function(){return H({u:e,min:o,max:s})}))}}))},setCursor:function(e){k.dataIdx!==e.cursor.idx&&(k.dataIdx=e.cursor.idx||0,k.seriesIdx&&k.dataIdx&&Ke({u:e,tooltipIdx:k,metrics:c,series:n,tooltip:I,tooltipOffset:U}))},setSeries:function(e,t){k.seriesIdx!==t&&(k.seriesIdx=t||0,t&&k.dataIdx?Ke({u:e,tooltipIdx:k,metrics:c,series:n,tooltip:I,tooltipOffset:U}):I.style.display="none")}}}]}),B=function(e){if(A){switch(e){case Ne.xRange:A.scales.x.range=M;break;case Ne.yRange:Object.keys(d.limits.range).forEach((function(e){A.scales[e]&&(A.scales[e].range=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Y(t,n,a,e)})}));break;case Ne.data:A.setData(t)}A.redraw()}};return Object(a.useEffect)((function(){return _({min:l.start,max:l.end})}),[l]),Object(a.useEffect)((function(){if(b.current){var e=new De.a(P,t,b.current);return R(e),_({min:l.start,max:l.end}),e.destroy}}),[b.current,n]),Object(a.useEffect)((function(){return B(Ne.data)}),[t]),Object(a.useEffect)((function(){return B(Ne.xRange)}),[S]),Object(a.useEffect)((function(){return B(Ne.yRange)}),[d]),Object(u.jsx)("div",{ref:j,style:{pointerEvents:f?"none":"auto",height:"500px"},children:Object(u.jsx)("div",{ref:b})})},et=(n(224),function(e){var t=e.labels,n=e.onChange,r=de().query,c=Object(a.useMemo)((function(){return Array.from(new Set(t.map((function(e){return e.group}))))}),[t]);return Object(u.jsx)("div",{className:"legendWrapper",children:c.map((function(e){return Object(u.jsxs)("div",{className:"legendGroup",children:[Object(u.jsxs)("div",{className:"legendGroupTitle",children:[Object(u.jsx)("svg",{className:"legendGroupLine",width:"33",height:"3",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(u.jsx)("line",{strokeWidth:"3",x1:"0",y1:"0",x2:"33",y2:"0",stroke:"#363636",strokeDasharray:Ge(e).join(",")})}),Object(u.jsxs)("b",{children:['"',r[e-1],'"']}),":"]}),Object(u.jsx)("div",{children:t.filter((function(t){return t.group===e})).map((function(e){return Object(u.jsxs)("div",{className:e.checked?"legendItem":"legendItem legendItemHide",onClick:function(t){return n(e,t.ctrlKey||t.metaKey)},children:[Object(u.jsx)("div",{className:"legendMarker",style:{borderColor:e.color,backgroundColor:"rgba(".concat(qe(e.color),", 0.1)")}}),Object(u.jsx)("div",{className:"legendLabel",children:e.label})]},"".concat(e.group,".").concat(e.label))}))})]},e)}))})}),tt=n(114),nt=["__name__"],at=function(e,t){var n=function(e){if(0===Object.keys(e.metric).length)return"Query result";var t=e.metric,n=t.__name__,a=Object(tt.a)(t,nt);return"".concat(n||""," {").concat(Object.entries(a).map((function(e){return"".concat(e[0],": ").concat(e[1])})).join(", "),"}")}(e);return{label:n,dash:Ge(e.group),width:1.5,stroke:Qe(e.group,n),show:!ct(n,e.group,t),scale:String(e.group)}},rt=function(e,t){return{group:t,label:e.label||"",color:e.stroke,checked:e.show||!1}},ct=function(e,t,n){return n.includes("".concat(t,".").concat(e))},it=n(156),ot=n.n(it),st=n(314),lt=n(154),ut=n.n(lt),dt=function(){var e=Ye().yaxis,t=Pe(),n=Object(a.useMemo)((function(){return Object.keys(e.limits.range)}),[e.limits.range]),r=Object(a.useCallback)(ut()((function(n,a,r){var c=e.limits.range;c[a][r]=+n.target.value,t({type:"SET_YAXIS_LIMITS",payload:c})}),500),[e.limits.range]);return Object(u.jsxs)(h.a,{display:"grid",alignItems:"center",gap:2,children:[Object(u.jsx)(m.a,{control:Object(u.jsx)(ve,{checked:e.limits.enable,onChange:function(){t({type:"TOGGLE_ENABLE_YAXIS_LIMITS"})}}),label:"Fix the limits for y-axis"}),Object(u.jsx)(h.a,{display:"grid",alignItems:"center",gap:4,children:n.map((function(t){return Object(u.jsxs)(h.a,{display:"grid",gridTemplateColumns:"120px 120px",gap:1,children:[Object(u.jsx)(st.a,{label:"Min ".concat(t),type:"number",size:"small",variant:"outlined",disabled:!e.limits.enable,defaultValue:e.limits.range[t][0],onChange:function(e){return r(e,t,0)}}),Object(u.jsx)(st.a,{label:"Max ".concat(t),type:"number",size:"small",variant:"outlined",disabled:!e.limits.enable,defaultValue:e.limits.range[t][1],onChange:function(e){return r(e,t,1)}})]},t)}))})]})},jt=n(324),bt=n(178),Ot=n(155),ht=n.n(Ot),ft=n(157),pt=n.n(ft),xt=Object(fe.a)({popover:{position:"absolute",display:"grid",gridGap:"16px",padding:"0 0 25px",zIndex:2},popoverHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#3F51B5",padding:"6px 6px 6px 12px",borderRadius:"4px 4px 0 0",color:"#FFF",cursor:"move"},popoverBody:{padding:"0 14px"}}),vt=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null),i=xt();return Object(u.jsxs)(h.a,{display:"flex",px:2,children:[Object(u.jsxs)(jt.a,{onClick:function(){return r((function(e){return!e}))},variant:"outlined",children:[Object(u.jsx)(ot.a,{sx:{fontSize:16,marginRight:"4px"}}),Object(u.jsxs)("span",{style:{lineHeight:1,paddingTop:"1px"},children:[n?"Hide":"Show"," graph settings"]})]}),n&&Object(u.jsx)(ht.a,{nodeRef:c,defaultPosition:{x:173,y:0},handle:"#handle",children:Object(u.jsxs)(bt.a,{elevation:3,className:i.popover,ref:c,children:[Object(u.jsxs)("div",{id:"handle",className:i.popoverHeader,children:[Object(u.jsx)(f.a,{variant:"body1",children:Object(u.jsx)("b",{children:"Graph Settings"})}),Object(u.jsx)(y.a,{size:"small",onClick:function(){return r(!1)},children:Object(u.jsx)(pt.a,{style:{color:"white"}})})]}),Object(u.jsx)(h.a,{className:i.popoverBody,children:Object(u.jsx)(dt,{})})]})})]})},mt=function(e){var t=e.data,n=void 0===t?[]:t,r=Pe(),c=Object(a.useState)([[]]),i=Object(o.a)(c,2),s=i[0],l=i[1],d=Object(a.useState)([]),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(a.useState)([]),f=Object(o.a)(h,2),p=f[0],x=f[1],v=Object(a.useState)([]),m=Object(o.a)(v,2),g=m[0],y=m[1],E=Object(a.useState)({1:[0,1]}),S=Object(o.a)(E,2),_=S[0],w=S[1],T=function(e){var t=function(e){var t={};for(var n in e){var a=e[n],r=Je(a),c=We(a);t[n]=[r-.05*r,c+.05*c]}return t}(e);w(t),r({type:"SET_YAXIS_LIMITS",payload:t})};return Object(a.useEffect)((function(){var e=[],t={},a=[],r=[];null===n||void 0===n||n.forEach((function(n){var c=at(n,g);r.push(c),a.push(rt(c,n.group)),n.values.forEach((function(a){e.push(a[0]),t[n.group]?t[n.group].push(+a[1]):t[n.group]=[+a[1]]}))}));var c=function(e){var t=Array.from(new Set(e)).sort((function(e,t){return e-t})),n=Je(t.map((function(e,n){return t[n+1]-e}))),a=t[0]||0;return new Array(t.length).fill(a).map((function(e,t){return q(e+n*t)}))}(e);l([c].concat(Object(Ue.a)(n.map((function(e){return new Array(c.length).fill(1).map((function(t,n){return e.values[n]?+e.values[n][1]:null}))}))))),T(t);var i=[{}].concat(r);JSON.stringify(i)!==JSON.stringify(b)&&(O(i),x(a))}),[n]),Object(a.useEffect)((function(){var e=[],t=[];null===n||void 0===n||n.forEach((function(n){var a=at(n,g);t.push(a),e.push(rt(a,n.group))})),O([{}].concat(t)),x(e)}),[g]),Object(u.jsx)(u.Fragment,{children:n.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)(vt,{}),Object(u.jsx)($e,{data:s,series:b,metrics:n,limits:_}),Object(u.jsx)(et,{labels:p,onChange:function(e,t){y(function(e){var t=e.hideSeries,n=e.legend,a=e.metaKey,r=e.series,c="".concat(n.group,".").concat(n.label),i=ct(n.label,n.group,t),o=r.map((function(e){return"".concat(e.scale,".").concat(e.label)}));return a&&i?Object(Ue.a)(o.filter((function(e){return e!==c}))):a&&!i?t.length>=r.length-1?[]:Object(Ue.a)(o.filter((function(e){return e!==c}))):i?t.filter((function(e){return e!==c})):[].concat(Object(Ue.a)(t),[c])}({hideSeries:g,legend:e,metaKey:t,series:b}))}})]}):Object(u.jsx)("div",{style:{textAlign:"center"},children:"No data to show"})})},gt=n(337),yt=n(338),Et=n(339),St=n(340),_t=n(341),wt=n(342),Tt=Object(fe.a)({deemphasized:{opacity:.4}}),Ct=function(e){var t=e.data,n=Tt(),r=function(e){return Object(a.useMemo)((function(){var t={};return e.forEach((function(e){return Object.entries(e.metric).forEach((function(e){return t[e[0]]?t[e[0]].options.add(e[1]):t[e[0]]={options:new Set([e[1]])}}))})),Object.entries(t).map((function(e){return{key:e[0],variations:e[1].options.size}})).sort((function(e,t){return e.variations-t.variations}))}),[e])}(t),c=Object(a.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(e){return{metadata:r.map((function(t){return e.metric[t.key]||"-"})),value:e.value?e.value[1]:"-"}}))}),[r,t]);return Object(u.jsx)(u.Fragment,{children:c.length>0?Object(u.jsx)(gt.a,{component:bt.a,children:Object(u.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(u.jsx)(Et.a,{children:Object(u.jsxs)(St.a,{children:[r.map((function(e,t){return Object(u.jsx)(_t.a,{style:{textTransform:"capitalize"},children:e.key},t)})),Object(u.jsx)(_t.a,{align:"right",children:"Value"})]})}),Object(u.jsx)(wt.a,{children:c.map((function(e,t){return Object(u.jsxs)(St.a,{children:[e.metadata.map((function(e,a){var r=c[t-1]&&c[t-1].metadata[a];return Object(u.jsx)(_t.a,{className:r===e?n.deemphasized:void 0,children:e},a)})),Object(u.jsx)(_t.a,{align:"right",children:e.value})]},t)}))})]})}):Object(u.jsx)("div",{style:{textAlign:"center"},children:"No data to show"})})},At=n(320),Rt=n(349),It=n(350),kt=n(325),Ut=n(6),Dt=n(13),Ht=n(109),Mt=n(172),Nt=n(174),Lt=function(e){var t=e.index,n=e.query,r=e.queryHistory,c=e.setHistoryIndex,i=e.setQuery,s=e.runQuery,l=e.server,d=e.oneLiner,j=void 0!==d&&d,b=e.autocomplete,O=Object(a.useRef)(null),h=Object(a.useState)(),f=Object(o.a)(h,2),p=f[0],x=f[1];Object(a.useEffect)((function(){return O.current&&x(new Dt.d({parent:O.current})),function(){return null===p||void 0===p?void 0:p.destroy()}}),[]),Object(a.useEffect)((function(){var e=new Mt.a;e.activateCompletion(b),e.setComplete({remote:{url:l}});var a=Dt.d.updateListener.of((function(e){e.docChanged&&i(e.state.doc.toJSON().map((function(e){return e.trim()})).join(""),t)}));null===p||void 0===p||p.setState(Ut.f.create({doc:n,extensions:[Nt.a,Dt.k.of(Ht.a),a,e.asExtension()]}))}),[l,p,b,r]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{ref:O,className:j?"one-line-scroll":"multi-line-scroll",onKeyUp:function(e){var n=e.key,a=e.ctrlKey,r=e.metaKey,i=a||r;"Enter"===n&&i?s():"ArrowUp"===n&&i?c(-1,t):"ArrowDown"===n&&i&&c(1,t)}})})},Yt=n(335),Pt=n(311),Bt=function(){return Object(u.jsx)(gt.a,{component:bt.a,children:Object(u.jsxs)(yt.a,{"aria-label":"simple table",size:"small",children:[Object(u.jsx)(Et.a,{children:Object(u.jsxs)(St.a,{children:[Object(u.jsx)(_t.a,{children:"Long"}),Object(u.jsx)(_t.a,{children:"Short"})]})}),Object(u.jsx)(wt.a,{children:P.map((function(e,t){return Object(u.jsxs)(St.a,{children:[Object(u.jsx)(_t.a,{component:"th",scope:"row",children:e.long}),Object(u.jsx)(_t.a,{children:e.short})]},t)}))})]})})},qt=Object(fe.a)({inlineBtn:{"&:hover":{cursor:"pointer"}}}),Ft=function(e){var t=e.handler,n=e.text,a=qt();return Object(u.jsx)(p.a,{component:"span",className:a.inlineBtn,onClick:t,children:n})},zt=Object(fe.a)({container:{display:"grid",gridTemplateColumns:"auto auto",height:"100%",padding:"18px 14px",borderRadius:"4px",borderColor:"#b9b9b9",borderStyle:"solid",borderWidth:"1px"}}),Qt=function(e){var t=e.setDuration,n=zt(),c=Object(a.useState)(!1),i=Object(o.a)(c,2),s=i[0],l=i[1],d=r.a.useState(null),j=Object(o.a)(d,2),b=j[0],O=j[1],p=Object(a.useState)(),x=Object(o.a)(p,2),v=x[0],m=x[1],g=de().time,y=g.period.end,E=g.duration,S=je(),_=Object(a.useState)(E),T=Object(o.a)(_,2),A=T[0],R=T[1];Object(a.useEffect)((function(){R(E)}),[E]),Object(a.useEffect)((function(){m(function(e){return C()(e).format(Y)}(W(y)))}),[y]),Object(a.useEffect)((function(){if(!s){var e=function(e){var t=e.trim().split(" ").reduce((function(e,t){var n=F(t);return n?Object(w.a)(Object(w.a)({},e),n):Object(w.a)({},e)}),{}),n=C.a.duration(t).asMilliseconds();return n<N?G(N):n>L?G(L):e}(A);R(e),t(e)}}),[A,s]);var I=function(){O(null)},k=Boolean(b);return Object(u.jsxs)(h.a,{className:n.container,children:[Object(u.jsxs)(h.a,{px:1,children:[Object(u.jsx)(h.a,{children:Object(u.jsx)(st.a,{label:"Duration",value:A,onChange:function(e){R(e.target.value)},variant:"standard",fullWidth:!0,onKeyUp:function(e){if("Enter"===e.key){var t=e.target;t.blur(),R(t.value)}},onBlur:function(){l(!1)},onFocus:function(){l(!0)}})}),Object(u.jsx)(h.a,{mt:2,children:Object(u.jsxs)(f.a,{variant:"body2",children:[Object(u.jsx)("span",{"aria-owns":k?"mouse-over-popover":void 0,"aria-haspopup":"true",style:{cursor:"pointer"},onMouseEnter:function(e){O(e.currentTarget)},onMouseLeave:I,children:"Possible options:\xa0"}),Object(u.jsx)(Yt.a,{open:k,anchorEl:b,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},style:{pointerEvents:"none"},onClose:I,disableRestoreFocus:!0,children:Object(u.jsx)(Bt,{})}),Object(u.jsx)(Ft,{handler:function(){return R("5m")},text:"5m"}),",\xa0",Object(u.jsx)(Ft,{handler:function(){return R("1h")},text:"1h"}),",\xa0",Object(u.jsx)(Ft,{handler:function(){return R("1h 30m")},text:"1h 30m"})]})})]}),Object(u.jsxs)(h.a,{px:1,children:[Object(u.jsx)(h.a,{children:Object(u.jsx)(Pt.a,{label:"Until",ampm:!1,value:v,onChange:function(e){return S({type:"SET_UNTIL",payload:e})},onError:console.log,inputFormat:"DD/MM/YYYY HH:mm:ss",mask:"__/__/____ __:__:__",renderInput:function(e){return Object(u.jsx)(st.a,Object(w.a)(Object(w.a)({},e),{},{variant:"standard"}))}})}),Object(u.jsx)(h.a,{mt:2,children:Object(u.jsxs)(f.a,{variant:"body2",children:["Will be changed to current time for auto-refresh mode.\xa0",Object(u.jsx)(Ft,{handler:function(){return S({type:"RUN_QUERY_TO_NOW"})},text:"Switch to now"})]})})]})]})},Gt=n(162),Wt=n.n(Gt),Jt=n(164),Vt=n.n(Jt),Kt=n(165),Xt=n.n(Kt),Zt=n(163),$t=n.n(Zt),en=n(301),tn=n(161),nn=n.n(tn),an=n(308),rn=n(306),cn=n(346),on=n(348),sn=n(315),ln=n(344),un=n(334),dn=n(321),jn=n(333),bn=n(345),On=n(319),hn=n(336),fn=n(347),pn=n(307),xn=["children","value","index"],vn=function(e){var t=e.children,n=e.value,a=e.index,r=Object(tt.a)(e,xn);return Object(u.jsx)("div",Object(w.a)(Object(w.a)({role:"tabpanel",hidden:n!==a,id:"auth-config-tabpanel-".concat(a),"aria-labelledby":"auth-config-tab-".concat(a)},r),{},{children:n===a&&Object(u.jsx)(h.a,{py:2,children:t})}))},mn=n(159),gn=n.n(mn),yn=n(160),En=n.n(yn),Sn={authMethod:"NO_AUTH",saveAuthLocally:!1},_n=V("AUTH_TYPE"),wn=V("BASIC_AUTH_DATA"),Tn=V("BEARER_AUTH_DATA"),Cn=Object(w.a)(Object(w.a)({},Sn),{},{authMethod:_n||Sn.authMethod,basicData:wn,bearerData:Tn,saveAuthLocally:!(!wn&&!Tn)}),An=function(){K(X)};function Rn(e,t){switch(t.type){case"SET_BASIC_AUTH":return t.payload.checkbox?J("BASIC_AUTH_DATA",t.payload.value):An(),J("AUTH_TYPE","BASIC_AUTH"),Object(w.a)(Object(w.a)({},e),{},{authMethod:"BASIC_AUTH",basicData:t.payload.value});case"SET_BEARER_AUTH":return t.payload.checkbox?J("BEARER_AUTH_DATA",t.payload.value):An(),J("AUTH_TYPE","BEARER_AUTH"),Object(w.a)(Object(w.a)({},e),{},{authMethod:"BEARER_AUTH",bearerData:t.payload.value});case"SET_NO_AUTH":return!t.payload.checkbox&&An(),J("AUTH_TYPE","NO_AUTH"),Object(w.a)(Object(w.a)({},e),{},{authMethod:"NO_AUTH"});default:throw new Error}}var In=Object(a.createContext)({}),kn=function(){return Object(a.useContext)(In).state},Un=function(e){var t=e.children,n=Object(a.useReducer)(Rn,Cn),r=Object(o.a)(n,2),c=r[0],i=r[1],s=Object(a.useMemo)((function(){return{state:c,dispatch:i}}),[c,i]);return Object(u.jsx)(In.Provider,{value:s,children:t})},Dn=Object(fe.a)((function(){return Object(pn.a)({tabsContent:{height:"200px"}})})),Hn="Bearer ",Mn=[{title:"No auth",id:"NO_AUTH"},{title:"Basic Auth",id:"BASIC_AUTH"},{title:"Bearer Token",id:"BEARER_AUTH"}],Nn=function(e){var t=Dn(),n=e.onClose,r=e.open,c=kn(),i=c.saveAuthLocally,s=c.basicData,l=c.bearerData,d=c.authMethod,j=Object(a.useContext)(In).dispatch,b=Object(a.useState)(i),O=Object(o.a)(b,2),p=O[0],x=O[1],v=Object(a.useState)(s||{password:"",login:""}),g=Object(o.a)(v,2),y=g[0],E=g[1],S=Object(a.useState)((null===l||void 0===l?void 0:l.token)||Hn),_=Object(o.a)(S,2),T=_[0],C=_[1],A=Object(a.useState)(Mn.findIndex((function(e){return e.id===d}))||0),R=Object(o.a)(A,2),I=R[0],k=R[1],U=function(){n()};return Object(u.jsxs)(rn.a,{onClose:U,"aria-labelledby":"simple-dialog-title",open:r,children:[Object(u.jsx)(an.a,{id:"simple-dialog-title",children:"Request Auth Settings"}),Object(u.jsxs)(cn.a,{children:[Object(u.jsx)(on.a,{children:"This affects Authorization header sent to the server you specify. Not shown in URL and can be optionally stored on a client side"}),Object(u.jsx)(sn.a,{value:I,onChange:function(e,t){k(t)},indicatorColor:"primary",textColor:"primary",children:Mn.map((function(e){return Object(u.jsx)(ln.a,{label:e.title},e.id)}))}),Object(u.jsxs)(h.a,{p:0,display:"flex",flexDirection:"column",className:t.tabsContent,children:[Object(u.jsxs)(h.a,{flexGrow:1,children:[Object(u.jsx)(vn,{value:I,index:0,children:Object(u.jsx)(f.a,{style:{fontStyle:"italic"},children:"No Authorization Header"})}),Object(u.jsxs)(vn,{value:I,index:1,children:[Object(u.jsxs)(un.a,{margin:"dense",fullWidth:!0,children:[Object(u.jsx)(dn.a,{htmlFor:"basic-login",children:"User"}),Object(u.jsx)(jn.a,{id:"basic-login",startAdornment:Object(u.jsx)(bn.a,{position:"start",children:Object(u.jsx)(gn.a,{})}),required:!0,onChange:function(e){return E((function(t){return Object(w.a)(Object(w.a)({},t),{},{login:e.target.value||""})}))},value:(null===y||void 0===y?void 0:y.login)||""})]}),Object(u.jsxs)(un.a,{margin:"dense",fullWidth:!0,children:[Object(u.jsx)(dn.a,{htmlFor:"basic-pass",children:"Password"}),Object(u.jsx)(jn.a,{id:"basic-pass",startAdornment:Object(u.jsx)(bn.a,{position:"start",children:Object(u.jsx)(En.a,{})}),onChange:function(e){return E((function(t){return Object(w.a)(Object(w.a)({},t),{},{password:e.target.value||""})}))},value:(null===y||void 0===y?void 0:y.password)||""})]})]}),Object(u.jsx)(vn,{value:I,index:2,children:Object(u.jsx)(st.a,{id:"bearer-auth",label:"Bearer token",multiline:!0,fullWidth:!0,value:T,onChange:function(e){var t=e.target.value;t.startsWith(Hn)?C(t):C(Hn)},InputProps:{onPaste:function(e){var t=e.clipboardData.getData("text/plain");t.startsWith(Hn)?C(t):C(Hn+t),e.preventDefault()}},maxRows:6})})]}),Object(u.jsxs)(un.a,{children:[Object(u.jsx)(m.a,{control:Object(u.jsx)(On.a,{checked:p,onChange:function(){return x((function(e){return!e}))},name:"checkedB",color:"primary"}),label:"Persist Auth Data Locally"}),Object(u.jsx)(hn.a,{children:p?"Auth Data and the Selected method will be saved to LocalStorage":"Auth Data won't be saved. All previously saved Auth Data will be removed"})]})]})]}),Object(u.jsx)(fn.a,{children:Object(u.jsx)(jt.a,{onClick:function(){switch(I){case 0:j({type:"SET_NO_AUTH",payload:{checkbox:p}});break;case 1:j({type:"SET_BASIC_AUTH",payload:{checkbox:p,value:y}});break;case 2:j({type:"SET_BEARER_AUTH",payload:{checkbox:p,value:{token:T}}})}U()},color:"primary",children:"Apply"})})]})},Ln=function(){var e=de().serverUrl,t=je(),n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],i=r[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(h.a,{display:"grid",gridTemplateColumns:"1fr auto",gap:"4px",alignItems:"center",width:"100%",mb:2,minHeight:50,children:[Object(u.jsx)(st.a,{variant:"outlined",fullWidth:!0,label:"Server URL",value:e,inputProps:{style:{fontFamily:"Monospace"}},onChange:function(e){var n=e.target.value;t({type:"SET_SERVER",payload:n})}}),Object(u.jsx)(h.a,{children:Object(u.jsx)(g.a,{title:"Request Auth Settings",children:Object(u.jsx)(y.a,{onClick:function(){return i(!0)},children:Object(u.jsx)(nn.a,{})})})})]}),Object(u.jsx)(Nn,{open:c,onClose:function(){return i(!1)}})]})},Yn=function(){var e=de().queryControls,t=e.autocomplete,n=e.nocache,a=je();return Object(u.jsxs)(h.a,{display:"flex",alignItems:"center",children:[Object(u.jsx)(h.a,{children:Object(u.jsx)(m.a,{label:"Enable autocomplete",control:Object(u.jsx)(ve,{checked:t,onChange:function(){a({type:"TOGGLE_AUTOCOMPLETE"}),J("AUTOCOMPLETE",!t)}})})}),Object(u.jsx)(h.a,{ml:2,children:Object(u.jsx)(m.a,{label:"Enable cache",control:Object(u.jsx)(ve,{checked:!n,onChange:function(){a({type:"NO_CACHE"}),J("NO_CACHE",!n)}})})})]})},Pn=function(){var e=de(),t=e.serverUrl,n=e.query,r=e.queryHistory,c=e.time.duration,i=e.queryControls.autocomplete,s=je(),l=Object(a.useState)(!0),d=Object(o.a)(l,2),j=d[0],b=d[1],O=Object(a.useState)(n),p=Object(o.a)(O,2),x=p[0],v=p[1],m=Object(a.useRef)(x),E=Object(a.useRef)(null),S=function(e){m.current=e,v(e)},_=function(){var e=r.map((function(e,t){var n=x[t]===e.values[e.values.length-1];return{index:e.values.length-Number(n),values:n?e.values:[].concat(Object(Ue.a)(e.values),[x[t]])}}));s({type:"RUN_QUERY"}),s({type:"SET_QUERY_HISTORY",payload:e}),s({type:"SET_QUERY",payload:m.current})},w=function(e,t){var n=Object(Ue.a)(m.current);n[t]=e,S(n)},T=function(e,t){var n=r[t],a=n.index,c=n.values,i=a+e;if(!(i<0||i>=c.length)){var o=c[i]||"";w(o,t),s({type:"SET_QUERY_HISTORY_BY_INDEX",payload:{value:{values:c,index:i},queryNumber:t}})}};return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(At.a,{expanded:j,onChange:function(){return b((function(e){return!e}))},children:[Object(u.jsxs)(Rt.a,{expandIcon:Object(u.jsx)(y.a,{children:Object(u.jsx)(Wt.a,{})}),"aria-controls":"panel1a-content",id:"panel1a-header",sx:{alignItems:"flex-start",padding:"15px"},children:[Object(u.jsx)(h.a,{mr:2,children:Object(u.jsx)(f.a,{variant:"h6",component:"h2",children:"Query Configuration"})}),Object(u.jsx)(h.a,{flexGrow:1,onClick:function(e){return e.stopPropagation()},onFocusCapture:function(e){return e.stopPropagation()},children:Object(u.jsx)(en.a,{disablePortal:!j,container:E.current,children:n.map((function(e,a){return Object(u.jsxs)(h.a,{display:"grid",gridTemplateColumns:"1fr auto",gap:"4px",width:"100%",mb:a===n.length-1?0:2,children:[Object(u.jsx)(Lt,{server:t,query:x[a],index:a,oneLiner:!j,autocomplete:i,queryHistory:r[a],setHistoryIndex:T,runQuery:_,setQuery:w}),0===a&&Object(u.jsx)(g.a,{title:"Execute Query",children:Object(u.jsx)(y.a,{onClick:_,children:Object(u.jsx)($t.a,{})})}),a>0&&Object(u.jsx)(g.a,{title:"Remove Query",children:Object(u.jsx)(y.a,{onClick:function(){return function(e){var t=Object(Ue.a)(x);t.splice(e,1),S(t),_()}(a)},children:Object(u.jsx)(Vt.a,{})})})]},"".concat(a,"_").concat(e))}))})})]}),Object(u.jsx)(It.a,{children:Object(u.jsxs)(kt.a,{container:!0,columnSpacing:2,children:[Object(u.jsxs)(kt.a,{item:!0,xs:6,minWidth:400,children:[Object(u.jsx)(Ln,{}),Object(u.jsx)("div",{ref:E}),n.length<2&&Object(u.jsx)(h.a,{display:"inline-block",minHeight:"40px",mt:2,children:Object(u.jsxs)(jt.a,{onClick:function(){var e=[].concat(Object(Ue.a)(x),[""]);S(e),s({type:"SET_QUERY",payload:e})},variant:"outlined",children:[Object(u.jsx)(Xt.a,{sx:{fontSize:16,marginRight:"4px"}}),Object(u.jsx)("span",{style:{lineHeight:1,paddingTop:"1px"},children:"Query"})]})})]}),Object(u.jsx)(kt.a,{item:!0,xs:!0,children:Object(u.jsx)(Qt,{setDuration:function(e){return s({type:"SET_DURATION",payload:e})},duration:c})}),Object(u.jsx)(kt.a,{item:!0,xs:12,pt:1,children:Object(u.jsx)(Yn,{})})]})})]})})},Bn=n(81),qn=n.n(Bn),Fn=n(166),zn=n(167),Qn=function(){var e=de(),t=e.query,n=e.displayType,r=e.serverUrl,c=e.time.period,i=e.queryControls.nocache,s=kn(),l=s.basicData,u=s.bearerData,d=s.authMethod,j=Object(a.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(a.useState)(),p=Object(o.a)(f,2),x=p[0],v=p[1],m=Object(a.useState)(),g=Object(o.a)(m,2),y=g[0],E=g[1],S=Object(a.useState)(),_=Object(o.a)(S,2),T=_[0],C=_[1],A=Object(a.useState)(),R=Object(o.a)(A,2),I=R[0],k=R[1];Object(a.useEffect)((function(){T&&(v(void 0),E(void 0))}),[T]);var U=Object(a.useMemo)((function(){if(!I)return!0;var e=(I.end-I.start)/3,t=e/(c.end-c.start)>=.7,n=c.end>I.end+e,a=c.start<I.start-e;return t||n||a}),[c]),D=function(){var e=Object(Fn.a)(qn.a.mark((function e(){var t,a,r,i,o,s;return qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===H||void 0===H?void 0:H.length){e.next=2;break}return e.abrupt("return");case 2:return h(!0),k(c),t=new Headers,"BASIC_AUTH"===d&&t.set("Authorization","Basic "+btoa("".concat((null===l||void 0===l?void 0:l.login)||"",":").concat((null===l||void 0===l?void 0:l.password)||""))),"BEARER_AUTH"===d&&t.set("Authorization",(null===u||void 0===u?void 0:u.token)||""),e.prev=7,e.delegateYield(qn.a.mark((function e(){var c,l,u,d,j,b;return qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(H.map((function(e){return fetch(e,{headers:t})})));case 2:c=e.sent,l=[],u=1,a=!1,r=!1,e.prev=7,o=Object(zn.a)(c);case 9:return e.next=11,o.next();case 11:if(!(a=!(s=e.sent).done)){e.next=39;break}if(!(d=s.value).ok){e.next=22;break}return e.next=16,d.json();case 16:j=e.sent,C(void 0),l.push.apply(l,Object(Ue.a)(j.data.result.map((function(e){return e.group=u,e})))),u++,e.next=36;break;case 22:return e.t0=C,e.next=25,d.json();case 25:if(e.t2=b=e.sent,e.t1=null===e.t2,e.t1){e.next=29;break}e.t1=void 0===b;case 29:if(!e.t1){e.next=33;break}e.t3=void 0,e.next=34;break;case 33:e.t3=b.error;case 34:e.t4=e.t3,(0,e.t0)(e.t4);case 36:a=!1,e.next=9;break;case 39:e.next=45;break;case 41:e.prev=41,e.t5=e.catch(7),r=!0,i=e.t5;case 45:if(e.prev=45,e.prev=46,!a||null==o.return){e.next=50;break}return e.next=50,o.return();case 50:if(e.prev=50,!r){e.next=53;break}throw i;case 53:return e.finish(50);case 54:return e.finish(45);case 55:"chart"===n?v(l):E(l);case 56:case"end":return e.stop()}}),e,null,[[7,41,45,55],[46,,50,54]])}))(),"t0",9);case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(7),e.t1 instanceof Error&&C(e.t1.message);case 14:h(!1);case 15:case"end":return e.stop()}}),e,null,[[7,11]])})));return function(){return e.apply(this,arguments)}}(),H=Object(a.useMemo)((function(){if(c)if(r)if(t.every((function(e){return!e.trim()})))C("Please enter a valid Query and execute it");else{if(function(e){var t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol}(r)){var e=(c.end-c.start)/2,a=Object(w.a)(Object(w.a)({},c),{},{start:c.start-e,end:c.end+e});return t.filter((function(e){return e.trim()})).map((function(e){return"chart"===n?function(e,t,n,a){return"".concat(e,"/api/v1/query_range?query=").concat(encodeURIComponent(t),"&start=").concat(n.start,"&end=").concat(n.end,"&step=").concat(n.step).concat(a?"&nocache=1":"")}(r,e,a,i):function(e,t,n){return"".concat(e,"/api/v1/query?query=").concat(encodeURIComponent(t),"&start=").concat(n.start,"&end=").concat(n.end,"&step=").concat(n.step)}(r,e,c)}))}C("Please provide a valid URL")}else C("Please enter Server URL")}),[r,c,n]);return Object(a.useEffect)((function(){k(void 0),D()}),[t]),Object(a.useEffect)((function(){D()}),[r,n]),Object(a.useEffect)((function(){U&&D()}),[c]),{fetchUrl:H,isLoading:O,graphData:x,liveData:y,error:T}},Gn=function(e){var t=e.data,n=Object(a.useContext)(d).showInfoMessage,r=Object(a.useMemo)((function(){return JSON.stringify(t,null,2)}),[t]);return Object(u.jsxs)(h.a,{position:"relative",children:[Object(u.jsx)(h.a,{flexDirection:"column",justifyContent:"flex-end",display:"flex",style:{position:"fixed",right:"16px"},children:Object(u.jsx)(jt.a,{variant:"outlined",onClick:function(e){navigator.clipboard.writeText(r),n("Formatted JSON has been copied"),e.preventDefault()},children:"Copy JSON"})}),Object(u.jsx)("pre",{children:r})]})},Wn=function(){var e=de(),t=e.displayType,n=e.time.period,a=Qn(),r=a.isLoading,c=a.liveData,i=a.graphData,o=a.error;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b.a,{position:"static",children:Object(u.jsxs)(O.a,{children:[Object(u.jsxs)(h.a,{display:"flex",children:[Object(u.jsxs)(f.a,{variant:"h5",children:[Object(u.jsx)("span",{style:{fontWeight:"bolder"},children:"VM"}),Object(u.jsx)("span",{style:{fontWeight:"lighter"},children:"UI"})]}),Object(u.jsx)("div",{style:{fontSize:"10px",marginTop:"-2px"},children:Object(u.jsx)("div",{children:"BETA"})})]}),Object(u.jsx)("div",{style:{fontSize:"10px",position:"absolute",top:"40px",opacity:".4"},children:Object(u.jsx)(p.a,{color:"inherit",href:"https://github.com/VictoriaMetrics/VictoriaMetrics/issues/new",target:"_blank",children:"Create an issue"})}),Object(u.jsx)(h.a,{ml:4,flexGrow:1,children:Object(u.jsx)(ge,{})}),Object(u.jsx)(ke,{})]})}),Object(u.jsxs)(h.a,{p:4,display:"grid",gridTemplateRows:"auto 1fr",gap:"20px",style:{minHeight:"calc(100vh - 64px)"},children:[Object(u.jsx)(h.a,{children:Object(u.jsx)(Pn,{})}),Object(u.jsxs)(h.a,{height:"100%",children:[r&&Object(u.jsx)(x.a,{in:r,style:{transitionDelay:r?"300ms":"0ms"},children:Object(u.jsx)(h.a,{alignItems:"center",justifyContent:"center",flexDirection:"column",display:"flex",style:{width:"100%",maxWidth:"calc(100vw - 32px)",position:"absolute",height:"50%",background:"linear-gradient(rgba(255,255,255,.7), rgba(255,255,255,.7), rgba(255,255,255,0))"},children:Object(u.jsx)(v.a,{})})}),Object(u.jsxs)(h.a,{height:"100%",bgcolor:"#fff",children:[o&&Object(u.jsx)(l.a,{color:"error",severity:"error",style:{fontSize:"14px"},children:o}),i&&n&&"chart"===t&&Object(u.jsx)(mt,{data:i}),c&&"code"===t&&Object(u.jsx)(Gn,{data:c}),c&&"table"===t&&Object(u.jsx)(Ct,{data:c})]})]})]})]})},Jn=n(310),Vn=n(353),Kn=n(173),Xn=Object(Kn.a)({palette:{primary:{main:"#3F51B5"},secondary:{main:"#F50057"}},components:{MuiSwitch:{defaultProps:{color:"secondary"}},MuiAccordion:{styleOverrides:{root:{boxShadow:"rgba(0, 0, 0, 0.16) 0px 1px 4px;"}}},MuiPaper:{styleOverrides:{elevation3:{boxShadow:"rgba(0, 0, 0, 0.2) 0px 3px 8px;"}}},MuiIconButton:{defaultProps:{size:"large"},styleOverrides:{sizeLarge:{borderRadius:"20%",height:"40px",width:"41px"},sizeMedium:{borderRadius:"20%"},sizeSmall:{borderRadius:"20%"}}}},typography:{fontSize:10}}),Zn=n(309),$n=n(305),ea=n(168),ta=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Zn.a,{})," ",Object(u.jsxs)($n.b,{dateAdapter:ea.a,children:[" ",Object(u.jsx)(Jn.a,{injectFirst:!0,children:Object(u.jsxs)(Vn.a,{theme:Xn,children:["  ",Object(u.jsxs)(Oe,{children:[" ",Object(u.jsxs)(Un,{children:[" ",Object(u.jsxs)(Be,{children:[" ",Object(u.jsxs)(j,{children:[" ",Object(u.jsx)(Wn,{})]})]})]})]})]})})]})]})},na=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,355)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(ta,{})}),document.getElementById("root")),na()}},[[234,1,2]]]);