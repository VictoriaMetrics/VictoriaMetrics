/*! For license information please see main.59602c15.js.LICENSE.txt */
(()=>{var e={61:(e,t,n)=>{"use strict";var r=n(375),a=n(629),i=a(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&i(e,".prototype.")>-1?a(n):n}},629:(e,t,n)=>{"use strict";var r=n(989),a=n(375),i=n(259),o=n(277),l=a("%Function.prototype.apply%"),s=a("%Function.prototype.call%"),c=a("%Reflect.apply%",!0)||r.call(s,l),u=n(709),d=a("%Math.max%");e.exports=function(e){if("function"!==typeof e)throw new o("a function is required");var t=c(r,s,arguments);return i(t,1+d(0,e.length-(arguments.length-1)),!0)};var h=function(){return c(r,l,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},159:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",a="second",i="minute",o="hour",l="day",s="week",c="month",u="quarter",d="year",h="date",m="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(a,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),a=t.clone().add(r,c),i=n-a<0,o=t.clone().add(r+(i?-1:1),c);return+(-(r+(n-a)/(i?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:s,d:l,D:h,h:o,m:i,s:a,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",b={};b[_]=v;var w="$isDayjsObject",k=function(e){return e instanceof E||!(!e||!e[w])},S=function e(t,n,r){var a;if(!t)return _;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(a=i),n&&(b[i]=n,a=i);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var l=t.name;b[l]=t,a=l}return!r&&a&&(_=a),a||!r&&_},x=function(e,t){if(k(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new E(n)},C=y;C.l=S,C.i=k,C.w=function(e,t){return x(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function v(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var a=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return C},g.isValid=function(){return!(this.$d.toString()===m)},g.isSame=function(e,t){var n=x(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return x(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<x(e)},g.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!C.u(t)||t,u=C.p(e),m=function(e,t){var a=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?a:a.endOf(l)},p=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},f=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return r?m(1,0):m(31,11);case c:return r?m(1,v):m(0,v+1);case s:var _=this.$locale().weekStart||0,b=(f<_?f+7:f)-_;return m(r?g-b:g+(6-b),v);case l:case h:return p(y+"Hours",0);case o:return p(y+"Minutes",1);case i:return p(y+"Seconds",2);case a:return p(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,s=C.p(e),u="set"+(this.$u?"UTC":""),m=(n={},n[l]=u+"Date",n[h]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[o]=u+"Hours",n[i]=u+"Minutes",n[a]=u+"Seconds",n[r]=u+"Milliseconds",n)[s],p=s===l?this.$D+(t-this.$W):t;if(s===c||s===d){var f=this.clone().set(h,1);f.$d[m](p),f.init(),this.$d=f.set(h,Math.min(this.$D,f.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[C.p(e)]()},g.add=function(r,u){var h,m=this;r=Number(r);var p=C.p(u),f=function(e){var t=x(m);return C.w(t.date(t.date()+Math.round(e*r)),m)};if(p===c)return this.set(c,this.$M+r);if(p===d)return this.set(d,this.$y+r);if(p===l)return f(1);if(p===s)return f(7);var v=(h={},h[i]=t,h[o]=n,h[a]=e,h)[p]||1,g=this.$d.getTime()+r*v;return C.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||m;var r=e||"YYYY-MM-DDTHH:mm:ssZ",a=C.z(this),i=this.$H,o=this.$m,l=this.$M,s=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,a,i){return e&&(e[n]||e(t,r))||a[n].slice(0,i)},h=function(e){return C.s(i%12||12,e,"0")},p=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return l+1;case"MM":return C.s(l+1,2,"0");case"MMM":return d(n.monthsShort,l,c,3);case"MMMM":return d(c,l);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,s,2);case"ddd":return d(n.weekdaysShort,t.$W,s,3);case"dddd":return s[t.$W];case"H":return String(i);case"HH":return C.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return p(i,o,!0);case"A":return p(i,o,!1);case"m":return String(o);case"mm":return C.s(o,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,h,m){var p,f=this,v=C.p(h),g=x(r),y=(g.utcOffset()-this.utcOffset())*t,_=this-g,b=function(){return C.m(f,g)};switch(v){case d:p=b()/12;break;case c:p=b();break;case u:p=b()/3;break;case s:p=(_-y)/6048e5;break;case l:p=(_-y)/864e5;break;case o:p=_/n;break;case i:p=_/t;break;case a:p=_/e;break;default:p=_}return m?p:C.a(p)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return C.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),N=E.prototype;return x.prototype=N,[["$ms",r],["$s",a],["$m",i],["$H",o],["$W",l],["$M",c],["$y",d],["$D",h]].forEach((function(e){N[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),x.extend=function(e,t){return e.$i||(e(t,E,x),e.$i=!0),x},x.locale=S,x.isDayjs=k,x.unix=function(e){return x(1e3*e)},x.en=b[_],x.Ls=b,x.p={},x}()},648:function(e){e.exports=function(){"use strict";var e,t,n=1e3,r=6e4,a=36e5,i=864e5,o=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=31536e6,s=2628e6,c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,u={years:l,months:s,days:i,hours:a,minutes:r,seconds:n,milliseconds:1,weeks:6048e5},d=function(e){return e instanceof y},h=function(e,t,n){return new y(e,n,t.$l)},m=function(e){return t.p(e)+"s"},p=function(e){return e<0},f=function(e){return p(e)?Math.ceil(e):Math.floor(e)},v=function(e){return Math.abs(e)},g=function(e,t){return e?p(e)?{negative:!0,format:""+v(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},y=function(){function p(e,t,n){var r=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return h(e*u[m(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(t){r.$d[m(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var a=e.match(c);if(a){var i=a.slice(2).map((function(e){return null!=e?Number(e):0}));return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var v=p.prototype;return v.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,n){return t+(e.$d[n]||0)*u[n]}),0)},v.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=f(e/l),e%=l,this.$d.months=f(e/s),e%=s,this.$d.days=f(e/i),e%=i,this.$d.hours=f(e/a),e%=a,this.$d.minutes=f(e/r),e%=r,this.$d.seconds=f(e/n),e%=n,this.$d.milliseconds=e},v.toISOString=function(){var e=g(this.$d.years,"Y"),t=g(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=g(n,"D"),a=g(this.$d.hours,"H"),i=g(this.$d.minutes,"M"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3,o=Math.round(1e3*o)/1e3);var l=g(o,"S"),s=e.negative||t.negative||r.negative||a.negative||i.negative||l.negative,c=a.format||i.format||l.format?"T":"",u=(s?"-":"")+"P"+e.format+t.format+r.format+c+a.format+i.format+l.format;return"P"===u||"-P"===u?"P0D":u},v.toJSON=function(){return this.toISOString()},v.format=function(e){var n=e||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return n.replace(o,(function(e,t){return t||String(r[e])}))},v.as=function(e){return this.$ms/u[m(e)]},v.get=function(e){var t=this.$ms,n=m(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?f(t/u[n]):this.$d[n],t||0},v.add=function(e,t,n){var r;return r=t?e*u[m(t)]:d(e)?e.$ms:h(e,this).$ms,h(this.$ms+r*(n?-1:1),this)},v.subtract=function(e,t){return this.add(e,t,!0)},v.locale=function(e){var t=this.clone();return t.$l=e,t},v.clone=function(){return h(this.$ms,this)},v.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},v.valueOf=function(){return this.asMilliseconds()},v.milliseconds=function(){return this.get("milliseconds")},v.asMilliseconds=function(){return this.as("milliseconds")},v.seconds=function(){return this.get("seconds")},v.asSeconds=function(){return this.as("seconds")},v.minutes=function(){return this.get("minutes")},v.asMinutes=function(){return this.as("minutes")},v.hours=function(){return this.get("hours")},v.asHours=function(){return this.as("hours")},v.days=function(){return this.get("days")},v.asDays=function(){return this.as("days")},v.weeks=function(){return this.get("weeks")},v.asWeeks=function(){return this.as("weeks")},v.months=function(){return this.get("months")},v.asMonths=function(){return this.as("months")},v.years=function(){return this.get("years")},v.asYears=function(){return this.as("years")},p}(),_=function(e,t,n){return e.add(t.years()*n,"y").add(t.months()*n,"M").add(t.days()*n,"d").add(t.hours()*n,"h").add(t.minutes()*n,"m").add(t.seconds()*n,"s").add(t.milliseconds()*n,"ms")};return function(n,r,a){e=a,t=a().$utils(),a.duration=function(e,t){var n=a.locale();return h(e,{$l:n},t)},a.isDuration=d;var i=r.prototype.add,o=r.prototype.subtract;r.prototype.add=function(e,t){return d(e)?_(this,e,1):i.bind(this)(e,t)},r.prototype.subtract=function(e,t){return d(e)?_(this,e,-1):o.bind(this)(e,t)}}}()},7:function(e){e.exports=function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(n,r,a){var i,o=function(e,n,r){void 0===r&&(r={});var a=new Date(e),i=function(e,n){void 0===n&&(n={});var r=n.timeZoneName||"short",a=e+"|"+r,i=t[a];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),t[a]=i),i}(n,r);return i.formatToParts(a)},l=function(t,n){for(var r=o(t,n),i=[],l=0;l<r.length;l+=1){var s=r[l],c=s.type,u=s.value,d=e[c];d>=0&&(i[d]=parseInt(u,10))}var h=i[3],m=24===h?0:h,p=i[0]+"-"+i[1]+"-"+i[2]+" "+m+":"+i[4]+":"+i[5]+":000",f=+t;return(a.utc(p).valueOf()-(f-=f%1e3))/6e4},s=r.prototype;s.tz=function(e,t){void 0===e&&(e=i);var n,r=this.utcOffset(),o=this.toDate(),l=o.toLocaleString("en-US",{timeZone:e}),s=Math.round((o-new Date(l))/1e3/60),c=15*-Math.round(o.getTimezoneOffset()/15)-s;if(Number(c)){if(n=a(l,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(c,!0),t){var u=n.utcOffset();n=n.add(r-u,"minute")}}else n=this.utcOffset(0,t);return n.$x.$timezone=e,n},s.offsetName=function(e){var t=this.$x.$timezone||a.tz.guess(),n=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return n&&n.value};var c=s.startOf;s.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var n=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(n,e,t).tz(this.$x.$timezone,!0)},a.tz=function(e,t,n){var r=n&&t,o=n||t||i,s=l(+a(),o);if("string"!=typeof e)return a(e).tz(o);var c=function(e,t,n){var r=e-60*t*1e3,a=l(r,n);if(t===a)return[r,t];var i=l(r-=60*(a-t)*1e3,n);return a===i?[r,a]:[e-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(e,r).valueOf(),s,o),u=c[0],d=c[1],h=a(u).utcOffset(d);return h.$x.$timezone=o,h},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(e){i=e}}}()},220:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,a,i){var o=a.prototype;i.utc=function(e){return new a({date:e,utc:!0,args:arguments})},o.utc=function(t){var n=i(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var l=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var s=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=o.utcOffset;o.utcOffset=function(r,a){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var a=(""+r[0]).match(n)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(r),null===r))return this;var o=Math.abs(r)<=16?60*r:r,l=this;if(a)return l.$offset=o,l.$u=0===r,l;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(o+s,e)).$offset=o,l.$x.$localOffset=s}else l=this.utc();return l};var u=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=o.diff;o.diff=function(e,t,n){if(e&&this.$u===e.$u)return h.call(this,e,t,n);var r=this.local(),a=i(e).local();return h.call(r,a,t,n)}}}()},411:(e,t,n)=>{"use strict";var r=n(709),a=n(430),i=n(277),o=n(553);e.exports=function(e,t,n){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new i("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],d=!!o&&o(e,t);if(r)r(e,t,{configurable:null===c&&d?d.configurable:!c,enumerable:null===l&&d?d.enumerable:!l,value:n,writable:null===s&&d?d.writable:!s});else{if(!u&&(l||s||c))throw new a("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},709:(e,t,n)=>{"use strict";var r=n(375)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(a){r=!1}e.exports=r},123:e=>{"use strict";e.exports=EvalError},953:e=>{"use strict";e.exports=Error},780:e=>{"use strict";e.exports=RangeError},768:e=>{"use strict";e.exports=ReferenceError},430:e=>{"use strict";e.exports=SyntaxError},277:e=>{"use strict";e.exports=TypeError},619:e=>{"use strict";e.exports=URIError},307:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var a=0;a<t.length;a+=1)n[a+e.length]=t[a];return n};e.exports=function(e){var a=this;if("function"!==typeof a||"[object Function]"!==t.apply(a))throw new TypeError("Function.prototype.bind called on incompatible "+a);for(var i,o=function(e,t){for(var n=[],r=t||0,a=0;r<e.length;r+=1,a+=1)n[a]=e[r];return n}(arguments,1),l=n(0,a.length-o.length),s=[],c=0;c<l;c++)s[c]="$"+c;if(i=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(s,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=a.apply(this,r(o,arguments));return Object(t)===t?t:this}return a.apply(e,r(o,arguments))})),a.prototype){var u=function(){};u.prototype=a.prototype,i.prototype=new u,u.prototype=null}return i}},989:(e,t,n)=>{"use strict";var r=n(307);e.exports=Function.prototype.bind||r},375:(e,t,n)=>{"use strict";var r,a=n(953),i=n(123),o=n(780),l=n(768),s=n(430),c=n(277),u=n(619),d=Function,h=function(e){try{return d('"use strict"; return ('+e+").constructor;")()}catch(t){}},m=Object.getOwnPropertyDescriptor;if(m)try{m({},"")}catch(O){m=null}var p=function(){throw new c},f=m?function(){try{return p}catch(e){try{return m(arguments,"callee").get}catch(t){return p}}}():p,v=n(757)(),g=n(442)(),y=Object.getPrototypeOf||(g?function(e){return e.__proto__}:null),_={},b="undefined"!==typeof Uint8Array&&y?y(Uint8Array):r,w={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":v&&y?y([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":a,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":_,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v&&y?y(y([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&v&&y?y((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":o,"%ReferenceError%":l,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&v&&y?y((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v&&y?y(""[Symbol.iterator]()):r,"%Symbol%":v?Symbol:r,"%SyntaxError%":s,"%ThrowTypeError%":f,"%TypedArray%":b,"%TypeError%":c,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};if(y)try{null.error}catch(O){var k=y(y(O));w["%Error.prototype%"]=k}var S=function e(t){var n;if("%AsyncFunction%"===t)n=h("async function () {}");else if("%GeneratorFunction%"===t)n=h("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=h("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&y&&(n=y(a.prototype))}return w[t]=n,n},x={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=n(989),E=n(155),N=C.call(Function.call,Array.prototype.concat),A=C.call(Function.apply,Array.prototype.splice),M=C.call(Function.call,String.prototype.replace),T=C.call(Function.call,String.prototype.slice),$=C.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,I=function(e,t){var n,r=e;if(E(x,r)&&(r="%"+(n=x[r])[0]+"%"),E(w,r)){var a=w[r];if(a===_&&(a=S(r)),"undefined"===typeof a&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new s("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===$(/^%?[^%]*%?$/,e))throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=T(e,0,1),n=T(e,-1);if("%"===t&&"%"!==n)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new s("invalid intrinsic syntax, expected opening `%`");var r=[];return M(e,L,(function(e,t,n,a){r[r.length]=n?M(a,P,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",a=I("%"+r+"%",t),i=a.name,o=a.value,l=!1,u=a.alias;u&&(r=u[0],A(n,N([0,1],u)));for(var d=1,h=!0;d<n.length;d+=1){var p=n[d],f=T(p,0,1),v=T(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===v||"'"===v||"`"===v)&&f!==v)throw new s("property names with quotes must have matching quotes");if("constructor"!==p&&h||(l=!0),E(w,i="%"+(r+="."+p)+"%"))o=w[i];else if(null!=o){if(!(p in o)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(m&&d+1>=n.length){var g=m(o,p);o=(h=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:o[p]}else h=E(o,p),o=o[p];h&&!l&&(w[i]=o)}}return o}},553:(e,t,n)=>{"use strict";var r=n(375)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(a){r=null}e.exports=r},734:(e,t,n)=>{"use strict";var r=n(709),a=function(){return!!r};a.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=a},442:e=>{"use strict";var t={__proto__:null,foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof n)}},757:(e,t,n)=>{"use strict";var r="undefined"!==typeof Symbol&&Symbol,a=n(175);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&a())))}},175:e=>{"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},155:(e,t,n)=>{"use strict";var r=Function.prototype.call,a=Object.prototype.hasOwnProperty,i=n(989);e.exports=i.call(r,a)},267:(e,t,n)=>{var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),d=Object.prototype.toString,h=Math.max,m=Math.min,p=function(){return u.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||o.test(e)?l(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,i,o,l,s,c=0,u=!1,d=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,i=a;return r=a=void 0,c=t,o=e.apply(i,n)}function _(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=i}function b(){var e=p();if(_(e))return w(e);l=setTimeout(b,function(e){var n=t-(e-s);return d?m(n,i-(e-c)):n}(e))}function w(e){return l=void 0,g&&r?y(e):(r=a=void 0,o)}function k(){var e=p(),n=_(e);if(r=arguments,a=this,s=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(b,t),u?y(e):o}(s);if(d)return l=setTimeout(b,t),y(s)}return void 0===l&&(l=setTimeout(b,t)),o}return t=v(t)||0,f(n)&&(u=!!n.leading,i=(d="maxWait"in n)?h(v(n.maxWait)||0,t):i,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=s=a=l=void 0},k.flush=function(){return void 0===l?o:w(p())},k}},424:(e,t,n)=>{var r="__lodash_hash_undefined__",a="[object Function]",i="[object GeneratorFunction]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,s=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,m="object"==typeof self&&self&&self.Object===Object&&self,p=h||m||Function("return this")();var f=Array.prototype,v=Function.prototype,g=Object.prototype,y=p["__core-js_shared__"],_=function(){var e=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),b=v.toString,w=g.hasOwnProperty,k=g.toString,S=RegExp("^"+b.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=p.Symbol,C=f.splice,E=D(p,"Map"),N=D(Object,"create"),A=x?x.prototype:void 0,M=A?A.toString:void 0;function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function P(e,t){for(var n,r,a=e.length;a--;)if((n=e[a][0])===(r=t)||n!==n&&r!==r)return a;return-1}function I(e,t){var n;t=function(e,t){if(H(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||V(e))return!0;return l.test(e)||!o.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:H(n=t)?n:z(n);for(var r=0,a=t.length;null!=e&&r<a;)e=e[F(t[r++])];return r&&r==a?e:void 0}function O(e){if(!U(e)||(t=e,_&&_ in t))return!1;var t,n=function(e){var t=U(e)?k.call(e):"";return t==a||t==i}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?S:d;return n.test(function(e){if(null!=e){try{return b.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function R(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function D(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return O(n)?n:void 0}T.prototype.clear=function(){this.__data__=N?N(null):{}},T.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},T.prototype.get=function(e){var t=this.__data__;if(N){var n=t[e];return n===r?void 0:n}return w.call(t,e)?t[e]:void 0},T.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:w.call(t,e)},T.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?r:t,this},$.prototype.clear=function(){this.__data__=[]},$.prototype.delete=function(e){var t=this.__data__,n=P(t,e);return!(n<0)&&(n==t.length-1?t.pop():C.call(t,n,1),!0)},$.prototype.get=function(e){var t=this.__data__,n=P(t,e);return n<0?void 0:t[n][1]},$.prototype.has=function(e){return P(this.__data__,e)>-1},$.prototype.set=function(e,t){var n=this.__data__,r=P(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},L.prototype.clear=function(){this.__data__={hash:new T,map:new(E||$),string:new T}},L.prototype.delete=function(e){return R(this,e).delete(e)},L.prototype.get=function(e){return R(this,e).get(e)},L.prototype.has=function(e){return R(this,e).has(e)},L.prototype.set=function(e,t){return R(this,e).set(e,t),this};var z=j((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(V(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return s.test(e)&&n.push(""),e.replace(c,(function(e,t,r,a){n.push(r?a.replace(u,"$1"):t||e)})),n}));function F(e){if("string"==typeof e||V(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function j(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o),o};return n.cache=new(j.Cache||L),n}j.Cache=L;var H=Array.isArray;function U(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function V(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==k.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:I(e,t);return void 0===r?n:r}},141:(e,t,n)=>{var r="function"===typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&a&&"function"===typeof a.get?a.get:null,o=r&&Map.prototype.forEach,l="function"===typeof Set&&Set.prototype,s=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=l&&s&&"function"===typeof s.get?s.get:null,u=l&&Set.prototype.forEach,d="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,m="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,f=Object.prototype.toString,v=Function.prototype.toString,g=String.prototype.match,y=String.prototype.slice,_=String.prototype.replace,b=String.prototype.toUpperCase,w=String.prototype.toLowerCase,k=RegExp.prototype.test,S=Array.prototype.concat,x=Array.prototype.join,C=Array.prototype.slice,E=Math.floor,N="function"===typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"===typeof Symbol&&"object"===typeof Symbol.iterator,$="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===T||"symbol")?Symbol.toStringTag:null,L=Object.prototype.propertyIsEnumerable,P=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function I(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||k.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var r=e<0?-E(-e):E(e);if(r!==e){var a=String(r),i=y.call(t,a.length+1);return _.call(a,n,"$&_")+"."+_.call(_.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(t,n,"$&_")}var O=n(634),R=O.custom,D=U(R)?R:null;function z(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function F(e){return _.call(String(e),/"/g,"&quot;")}function j(e){return"[object Array]"===q(e)&&(!$||!("object"===typeof e&&$ in e))}function H(e){return"[object RegExp]"===q(e)&&(!$||!("object"===typeof e&&$ in e))}function U(e){if(T)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!M)return!1;try{return M.call(e),!0}catch(t){}return!1}e.exports=function e(t,r,a,l){var s=r||{};if(B(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(B(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=!B(s,"customInspect")||s.customInspect;if("boolean"!==typeof f&&"symbol"!==f)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(B(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(B(s,"numericSeparator")&&"boolean"!==typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var b=s.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return W(t,s);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var k=String(t);return b?I(t,k):k}if("bigint"===typeof t){var E=String(t)+"n";return b?I(t,E):E}var A="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof a&&(a=0),a>=A&&A>0&&"object"===typeof t)return j(t)?"[Array]":"[Object]";var R=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=x.call(Array(e.indent+1)," ")}return{base:n,prev:x.call(Array(t+1),n)}}(s,a);if("undefined"===typeof l)l=[];else if(Y(l,t)>=0)return"[Circular]";function V(t,n,r){if(n&&(l=C.call(l)).push(n),r){var i={depth:s.depth};return B(s,"quoteStyle")&&(i.quoteStyle=s.quoteStyle),e(t,i,a+1,l)}return e(t,s,a+1,l)}if("function"===typeof t&&!H(t)){var K=function(e){if(e.name)return e.name;var t=g.call(v.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=X(t,V);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(ee.length>0?" { "+x.call(ee,", ")+" }":"")}if(U(t)){var te=T?_.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):M.call(t);return"object"!==typeof t||T?te:Q(te)}if(function(e){if(!e||"object"!==typeof e)return!1;if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"===typeof e.nodeName&&"function"===typeof e.getAttribute}(t)){for(var ne="<"+w.call(String(t.nodeName)),re=t.attributes||[],ae=0;ae<re.length;ae++)ne+=" "+re[ae].name+"="+z(F(re[ae].value),"double",s);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+w.call(String(t.nodeName))+">"}if(j(t)){if(0===t.length)return"[]";var ie=X(t,V);return R&&!function(e){for(var t=0;t<e.length;t++)if(Y(e[t],"\n")>=0)return!1;return!0}(ie)?"["+J(ie,R)+"]":"[ "+x.call(ie,", ")+" ]"}if(function(e){return"[object Error]"===q(e)&&(!$||!("object"===typeof e&&$ in e))}(t)){var oe=X(t,V);return"cause"in Error.prototype||!("cause"in t)||L.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+x.call(oe,", ")+" }":"{ ["+String(t)+"] "+x.call(S.call("[cause]: "+V(t.cause),oe),", ")+" }"}if("object"===typeof t&&f){if(D&&"function"===typeof t[D]&&O)return O(t,{depth:A-a});if("symbol"!==f&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!==typeof e)return!1;try{i.call(e);try{c.call(e)}catch(ne){return!0}return e instanceof Map}catch(t){}return!1}(t)){var le=[];return o&&o.call(t,(function(e,n){le.push(V(n,t,!0)+" => "+V(e,t))})),G("Map",i.call(t),le,R)}if(function(e){if(!c||!e||"object"!==typeof e)return!1;try{c.call(e);try{i.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var se=[];return u&&u.call(t,(function(e){se.push(V(e,t))})),G("Set",c.call(t),se,R)}if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(ne){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return Z("WeakMap");if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(ne){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return Z("WeakSet");if(function(e){if(!m||!e||"object"!==typeof e)return!1;try{return m.call(e),!0}catch(t){}return!1}(t))return Z("WeakRef");if(function(e){return"[object Number]"===q(e)&&(!$||!("object"===typeof e&&$ in e))}(t))return Q(V(Number(t)));if(function(e){if(!e||"object"!==typeof e||!N)return!1;try{return N.call(e),!0}catch(t){}return!1}(t))return Q(V(N.call(t)));if(function(e){return"[object Boolean]"===q(e)&&(!$||!("object"===typeof e&&$ in e))}(t))return Q(p.call(t));if(function(e){return"[object String]"===q(e)&&(!$||!("object"===typeof e&&$ in e))}(t))return Q(V(String(t)));if("undefined"!==typeof window&&t===window)return"{ [object Window] }";if("undefined"!==typeof globalThis&&t===globalThis||"undefined"!==typeof n.g&&t===n.g)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===q(e)&&(!$||!("object"===typeof e&&$ in e))}(t)&&!H(t)){var ce=X(t,V),ue=P?P(t)===Object.prototype:t instanceof Object||t.constructor===Object,de=t instanceof Object?"":"null prototype",he=!ue&&$&&Object(t)===t&&$ in t?y.call(q(t),8,-1):de?"Object":"",me=(ue||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||de?"["+x.call(S.call([],he||[],de||[]),": ")+"] ":"");return 0===ce.length?me+"{}":R?me+"{"+J(ce,R)+"}":me+"{ "+x.call(ce,", ")+" }"}return String(t)};var V=Object.prototype.hasOwnProperty||function(e){return e in this};function B(e,t){return V.call(e,t)}function q(e){return f.call(e)}function Y(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function W(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return W(y.call(e,0,t.maxStringLength),t)+r}return z(_.call(_.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function Q(e){return"Object("+e+")"}function Z(e){return e+" { ? }"}function G(e,t,n,r){return e+" ("+t+") {"+(r?J(n,r):x.call(n,", "))+"}"}function J(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+x.call(e,","+n)+"\n"+t.prev}function X(e,t){var n=j(e),r=[];if(n){r.length=e.length;for(var a=0;a<e.length;a++)r[a]=B(e,a)?t(e[a],e):""}var i,o="function"===typeof A?A(e):[];if(T){i={};for(var l=0;l<o.length;l++)i["$"+o[l]]=o[l]}for(var s in e)B(e,s)&&(n&&String(Number(s))===s&&s<e.length||T&&i["$"+s]instanceof Symbol||(k.call(/[^\w$]/,s)?r.push(t(s,e)+": "+t(e[s],e)):r.push(s+": "+t(e[s],e))));if("function"===typeof A)for(var c=0;c<o.length;c++)L.call(e,o[c])&&r.push("["+t(o[c])+"]: "+t(e[o[c]],e));return r}},609:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Children:()=>B,Component:()=>l.uA,Fragment:()=>l.FK,PureComponent:()=>z,StrictMode:()=>$e,Suspense:()=>Q,SuspenseList:()=>J,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>be,cloneElement:()=>Ee,createContext:()=>l.q6,createElement:()=>l.n,createFactory:()=>ke,createPortal:()=>ne,createRef:()=>l._3,default:()=>Fe,findDOMNode:()=>Ae,flushSync:()=>Te,forwardRef:()=>U,hydrate:()=>ue,isElement:()=>Re,isFragment:()=>xe,isMemo:()=>Ce,isValidElement:()=>Se,lazy:()=>G,memo:()=>F,render:()=>ce,startTransition:()=>Le,unmountComponentAtNode:()=>Ne,unstable_batchedUpdates:()=>Me,useCallback:()=>C,useContext:()=>E,useDebugValue:()=>N,useDeferredValue:()=>Pe,useEffect:()=>b,useErrorBoundary:()=>A,useId:()=>M,useImperativeHandle:()=>S,useInsertionEffect:()=>Oe,useLayoutEffect:()=>w,useMemo:()=>x,useReducer:()=>_,useRef:()=>k,useState:()=>y,useSyncExternalStore:()=>De,useTransition:()=>Ie,version:()=>we});var r,a,i,o,l=n(746),s=0,c=[],u=l.fF,d=u.__b,h=u.__r,m=u.diffed,p=u.__c,f=u.unmount,v=u.__;function g(e,t){u.__h&&u.__h(a,e,s||t),s=0;var n=a.__H||(a.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function y(e){return s=1,_(R,e)}function _(e,t,n){var i=g(r++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):R(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=a,!a.u)){var o=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!l||l.call(this,e,t,n);var a=!1;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(a=!0)}})),!(!a&&i.__c.props===e)&&(!l||l.call(this,e,t,n))};a.u=!0;var l=a.shouldComponentUpdate,s=a.componentWillUpdate;a.componentWillUpdate=function(e,t,n){if(this.__e){var r=l;l=void 0,o(e,t,n),l=r}s&&s.call(this,e,t,n)},a.shouldComponentUpdate=o}return i.__N||i.__}function b(e,t){var n=g(r++,3);!u.__s&&O(n.__H,t)&&(n.__=e,n.i=t,a.__H.__h.push(n))}function w(e,t){var n=g(r++,4);!u.__s&&O(n.__H,t)&&(n.__=e,n.i=t,a.__h.push(n))}function k(e){return s=5,x((function(){return{current:e}}),[])}function S(e,t,n){s=6,w((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function x(e,t){var n=g(r++,7);return O(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function C(e,t){return s=8,x((function(){return e}),t)}function E(e){var t=a.context[e.__c],n=g(r++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(a)),t.props.value):e.__}function N(e,t){u.useDebugValue&&u.useDebugValue(t?t(e):e)}function A(e){var t=g(r++,10),n=y();return t.__=e,a.componentDidCatch||(a.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]}function M(){var e=g(r++,11);if(!e.__){for(var t=a.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function T(){for(var e;e=c.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(P),e.__H.__h.forEach(I),e.__H.__h=[]}catch(r){e.__H.__h=[],u.__e(r,e.__v)}}u.__b=function(e){a=null,d&&d(e)},u.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),v&&v(e,t)},u.__r=function(e){h&&h(e),r=0;var t=(a=e.__c).__H;t&&(i===a?(t.__h=[],a.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(P),t.__h.forEach(I),t.__h=[],r=0)),i=a},u.diffed=function(e){m&&m(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==c.push(t)&&o===u.requestAnimationFrame||((o=u.requestAnimationFrame)||L)(T)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),i=a=null},u.__c=function(e,t){t.some((function(e){try{e.__h.forEach(P),e.__h=e.__h.filter((function(e){return!e.__||I(e)}))}catch(a){t.some((function(e){e.__h&&(e.__h=[])})),t=[],u.__e(a,e.__v)}})),p&&p(e,t)},u.unmount=function(e){f&&f(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{P(e)}catch(e){t=e}})),n.__H=void 0,t&&u.__e(t,n.__v))};var $="function"==typeof requestAnimationFrame;function L(e){var t,n=function(){clearTimeout(r),$&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);$&&(t=requestAnimationFrame(n))}function P(e){var t=a,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),a=t}function I(e){var t=a;e.__c=e.__(),a=t}function O(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function R(e,t){return"function"==typeof t?t(e):t}function D(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function z(e,t){this.props=e,this.context=t}function F(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:D(this.props,e)}function r(t){return this.shouldComponentUpdate=n,(0,l.n)(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(z.prototype=new l.uA).isPureReactComponent=!0,z.prototype.shouldComponentUpdate=function(e,t){return D(this.props,e)||D(this.state,t)};var j=l.fF.__b;l.fF.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),j&&j(e)};var H="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function U(e){function t(t){if(!("ref"in t))return e(t,null);var n=t.ref;delete t.ref;var r=e(t,n);return t.ref=n,r}return t.$$typeof=H,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var V=function(e,t){return null==e?null:(0,l.v2)((0,l.v2)(e).map(t))},B={map:V,forEach:V,count:function(e){return e?(0,l.v2)(e).length:0},only:function(e){var t=(0,l.v2)(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:l.v2},q=l.fF.__e;l.fF.__e=function(e,t,n,r){if(e.then)for(var a,i=t;i=i.__;)if((a=i.__c)&&a.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t);q(e,t,n,r)};var Y=l.fF.unmount;function W(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=function(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return W(e,t,n)}))),e}function K(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return K(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Q(){this.__u=0,this.t=null,this.__b=null}function Z(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function G(e){var t,n,r;function a(a){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return(0,l.n)(n,a)}return a.displayName="Lazy",a.__f=!0,a}function J(){this.u=null,this.o=null}l.fF.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Y&&Y(e)},(Q.prototype=new l.uA).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var a=Z(r.__v),i=!1,o=function(){i||(i=!0,n.__R=null,a?a(l):l())};n.__R=o;var l=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=K(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},Q.prototype.componentWillUnmount=function(){this.t=[]},Q.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=W(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__a&&(0,l.n)(l.FK,null,e.fallback);return a&&(a.__u&=-33),[(0,l.n)(l.FK,null,t.__a?null:e.children),a]};var X=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function ee(e){return this.getChildContext=function(){return e.context},e.children}function te(e){var t=this,n=e.i;t.componentWillUnmount=function(){(0,l.XX)(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),(0,l.XX)((0,l.n)(ee,{context:t.context},e.__v),t.l)}function ne(e,t){var n=(0,l.n)(te,{__v:e,i:t});return n.containerInfo=t,n}(J.prototype=new l.uA).__a=function(e){var t=this,n=Z(t.__v),r=t.o.get(e);return r[0]++,function(a){var i=function(){t.props.revealOrder?(r.push(a),X(t,e,r)):a()};n?n(i):i()}},J.prototype.render=function(e){this.u=null,this.o=new Map;var t=(0,l.v2)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},J.prototype.componentDidUpdate=J.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){X(e,n,t)}))};var re="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,ae=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ie=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,oe=/[A-Z0-9]/g,le="undefined"!=typeof document,se=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};function ce(e,t,n){return null==t.__k&&(t.textContent=""),(0,l.XX)(e,t),"function"==typeof n&&n(),e?e.__c:null}function ue(e,t,n){return(0,l.Qv)(e,t),"function"==typeof n&&n(),e?e.__c:null}l.uA.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(l.uA.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var de=l.fF.event;function he(){}function me(){return this.cancelBubble}function pe(){return this.defaultPrevented}l.fF.event=function(e){return de&&(e=de(e)),e.persist=he,e.isPropagationStopped=me,e.isDefaultPrevented=pe,e.nativeEvent=e};var fe,ve={enumerable:!1,configurable:!0,get:function(){return this.class}},ge=l.fF.vnode;l.fF.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={},a=-1===n.indexOf("-");for(var i in t){var o=t[i];if(!("value"===i&&"defaultValue"in t&&null==o||le&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var s=i.toLowerCase();"defaultValue"===i&&"value"in t&&null==t.value?i="value":"download"===i&&!0===o?o="":"translate"===s&&"no"===o?o=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?i="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||se(t.type)?"onfocus"===s?i="onfocusin":"onblur"===s?i="onfocusout":ie.test(i)&&(i=s):s=i="oninput":a&&ae.test(i)?i=i.replace(oe,"-$&").toLowerCase():null===o&&(o=void 0),"oninput"===s&&r[i=s]&&(i="oninputCapture"),r[i]=o}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=(0,l.v2)(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=(0,l.v2)(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",ve)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=re,ge&&ge(e)};var ye=l.fF.__r;l.fF.__r=function(e){ye&&ye(e),fe=e.__c};var _e=l.fF.diffed;l.fF.diffed=function(e){_e&&_e(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),fe=null};var be={ReactCurrentDispatcher:{current:{readContext:function(e){return fe.__n[e.__c].props.value},useCallback:C,useContext:E,useDebugValue:N,useDeferredValue:Pe,useEffect:b,useId:M,useImperativeHandle:S,useInsertionEffect:Oe,useLayoutEffect:w,useMemo:x,useReducer:_,useRef:k,useState:y,useSyncExternalStore:De,useTransition:Ie}}},we="18.3.1";function ke(e){return l.n.bind(null,e)}function Se(e){return!!e&&e.$$typeof===re}function xe(e){return Se(e)&&e.type===l.FK}function Ce(e){return!!e&&!!e.displayName&&("string"==typeof e.displayName||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Ee(e){return Se(e)?l.Ob.apply(null,arguments):e}function Ne(e){return!!e.__k&&((0,l.XX)(null,e),!0)}function Ae(e){return e&&(e.base||1===e.nodeType&&e)||null}var Me=function(e,t){return e(t)},Te=function(e,t){return e(t)},$e=l.FK;function Le(e){e()}function Pe(e){return e}function Ie(){return[!1,Le]}var Oe=w,Re=Se;function De(e,t){var n=t(),r=y({h:{__:n,v:t}}),a=r[0].h,i=r[1];return w((function(){a.__=n,a.v=t,ze(a)&&i({h:a})}),[e,n,t]),b((function(){return ze(a)&&i({h:a}),e((function(){ze(a)&&i({h:a})}))}),[e]),n}function ze(e){var t,n,r=e.v,a=e.__;try{var i=r();return!((t=a)===(n=i)&&(0!==t||1/t==1/n)||t!=t&&n!=n)}catch(e){return!0}}var Fe={useState:y,useId:M,useReducer:_,useEffect:b,useLayoutEffect:w,useInsertionEffect:Oe,useTransition:Ie,useDeferredValue:Pe,useSyncExternalStore:De,startTransition:Le,useRef:k,useImperativeHandle:S,useMemo:x,useCallback:C,useContext:E,useDebugValue:N,version:"18.3.1",Children:B,render:ce,hydrate:ue,unmountComponentAtNode:Ne,createPortal:ne,createElement:l.n,createContext:l.q6,createFactory:ke,cloneElement:Ee,createRef:l._3,Fragment:l.FK,isValidElement:Se,isElement:Re,isFragment:xe,isMemo:Ce,findDOMNode:Ae,Component:l.uA,PureComponent:z,memo:F,forwardRef:U,flushSync:Te,unstable_batchedUpdates:Me,StrictMode:$e,Suspense:Q,SuspenseList:J,lazy:G,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:be}},746:(e,t,n)=>{"use strict";n.d(t,{FK:()=>S,Ob:()=>q,Qv:()=>B,XX:()=>V,_3:()=>k,fF:()=>a,n:()=>b,q6:()=>Y,uA:()=>x,v2:()=>L});var r,a,i,o,l,s,c,u,d,h,m,p={},f=[],v=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function y(e,t){for(var n in t)e[n]=t[n];return e}function _(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,t,n){var a,i,o,l={};for(o in t)"key"==o?a=t[o]:"ref"==o?i=t[o]:l[o]=t[o];if(arguments.length>2&&(l.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===l[o]&&(l[o]=e.defaultProps[o]);return w(e,l,a,i,null)}function w(e,t,n,r,o){var l={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++i:o,__i:-1,__u:0};return null==o&&null!=a.vnode&&a.vnode(l),l}function k(){return{current:null}}function S(e){return e.children}function x(e,t){this.props=e,this.context=t}function C(e,t){if(null==t)return e.__?C(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?C(e):null}function E(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return E(e)}}function N(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!A.__r++||l!==a.debounceRendering)&&((l=a.debounceRendering)||s)(A)}function A(){var e,t,n,r,i,l,s,u;for(o.sort(c);e=o.shift();)e.__d&&(t=o.length,r=void 0,l=(i=(n=e).__v).__e,s=[],u=[],n.__P&&((r=y({},i)).__v=i.__v+1,a.vnode&&a.vnode(r),D(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[l]:null,s,null==l?C(i):l,!!(32&i.__u),u),r.__v=i.__v,r.__.__k[r.__i]=r,z(s,r,u),r.__e!=l&&E(r)),o.length>t&&o.sort(c));A.__r=0}function M(e,t,n,r,a,i,o,l,s,c,u){var d,h,m,v,g,y=r&&r.__k||f,_=t.length;for(n.__d=s,T(n,t,y),s=n.__d,d=0;d<_;d++)null!=(m=n.__k[d])&&(h=-1===m.__i?p:y[m.__i]||p,m.__i=d,D(e,m,h,a,i,o,l,s,c,u),v=m.__e,m.ref&&h.ref!=m.ref&&(h.ref&&j(h.ref,null,m),u.push(m.ref,m.__c||v,m)),null==g&&null!=v&&(g=v),65536&m.__u||h.__k===m.__k?s=$(m,s,e):"function"==typeof m.type&&void 0!==m.__d?s=m.__d:v&&(s=v.nextSibling),m.__d=void 0,m.__u&=-196609);n.__d=s,n.__e=g}function T(e,t,n){var r,a,i,o,l,s=t.length,c=n.length,u=c,d=0;for(e.__k=[],r=0;r<s;r++)null!=(a=t[r])&&"boolean"!=typeof a&&"function"!=typeof a?(o=r+d,(a=e.__k[r]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?w(null,a,null,null,null):g(a)?w(S,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?w(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,i=null,-1!==(l=a.__i=P(a,n,o,u))&&(u--,(i=n[l])&&(i.__u|=131072)),null==i||null===i.__v?(-1==l&&d--,"function"!=typeof a.type&&(a.__u|=65536)):l!==o&&(l==o-1?d--:l==o+1?d++:(l>o?d--:d++,a.__u|=65536))):a=e.__k[r]=null;if(u)for(r=0;r<c;r++)null!=(i=n[r])&&0==(131072&i.__u)&&(i.__e==e.__d&&(e.__d=C(i)),H(i,i))}function $(e,t,n){var r,a;if("function"==typeof e.type){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=$(r[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=C(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function L(e,t){return t=t||[],null==e||"boolean"==typeof e||(g(e)?e.some((function(e){L(e,t)})):t.push(e)),t}function P(e,t,n,r){var a=e.key,i=e.type,o=n-1,l=n+1,s=t[n];if(null===s||s&&a==s.key&&i===s.type&&0==(131072&s.__u))return n;if(r>(null!=s&&0==(131072&s.__u)?1:0))for(;o>=0||l<t.length;){if(o>=0){if((s=t[o])&&0==(131072&s.__u)&&a==s.key&&i===s.type)return o;o--}if(l<t.length){if((s=t[l])&&0==(131072&s.__u)&&a==s.key&&i===s.type)return l;l++}}return-1}function I(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||v.test(t)?n:n+"px"}function O(e,t,n,r,a){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||I(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||I(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=u,e.addEventListener(t,i?h:d,i)):e.removeEventListener(t,i?h:d,i);else{if("http://www.w3.org/2000/svg"==a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function R(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=u++;else if(t.t<n.u)return;return n(a.event?a.event(t):t)}}}function D(e,t,n,r,i,o,l,s,c,u){var d,h,m,p,f,v,_,b,w,k,C,E,N,A,T,$,L=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),o=[s=t.__e=n.__e]),(d=a.__b)&&d(t);e:if("function"==typeof L)try{if(b=t.props,w="prototype"in L&&L.prototype.render,k=(d=L.contextType)&&r[d.__c],C=d?k?k.props.value:d.__:r,n.__c?_=(h=t.__c=n.__c).__=h.__E:(w?t.__c=h=new L(b,C):(t.__c=h=new x(b,C),h.constructor=L,h.render=U),k&&k.sub(h),h.props=b,h.state||(h.state={}),h.context=C,h.__n=r,m=h.__d=!0,h.__h=[],h._sb=[]),w&&null==h.__s&&(h.__s=h.state),w&&null!=L.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=y({},h.__s)),y(h.__s,L.getDerivedStateFromProps(b,h.__s))),p=h.props,f=h.state,h.__v=t,m)w&&null==L.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),w&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(w&&null==L.getDerivedStateFromProps&&b!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,C),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,C)||t.__v===n.__v)){for(t.__v!==n.__v&&(h.props=b,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),E=0;E<h._sb.length;E++)h.__h.push(h._sb[E]);h._sb=[],h.__h.length&&l.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,C),w&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(p,f,v)}))}if(h.context=C,h.props=b,h.__P=e,h.__e=!1,N=a.__r,A=0,w){for(h.state=h.__s,h.__d=!1,N&&N(t),d=h.render(h.props,h.state,h.context),T=0;T<h._sb.length;T++)h.__h.push(h._sb[T]);h._sb=[]}else do{h.__d=!1,N&&N(t),d=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(r=y(y({},r),h.getChildContext())),w&&!m&&null!=h.getSnapshotBeforeUpdate&&(v=h.getSnapshotBeforeUpdate(p,f)),M(e,g($=null!=d&&d.type===S&&null==d.key?d.props.children:d)?$:[$],t,n,r,i,o,l,s,c,u),h.base=t.__e,t.__u&=-161,h.__h.length&&l.push(h),_&&(h.__E=h.__=null)}catch(e){if(t.__v=null,c||null!=o){for(t.__u|=c?160:32;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else t.__e=n.__e,t.__k=n.__k;a.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=F(n.__e,t,n,r,i,o,l,c,u);(d=a.diffed)&&d(t)}function z(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)j(n[r],n[++r],n[++r]);a.__c&&a.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){a.__e(e,t.__v)}}))}function F(e,t,n,i,o,l,s,c,u){var d,h,m,f,v,y,b,w=n.props,k=t.props,S=t.type;if("svg"===S?o="http://www.w3.org/2000/svg":"math"===S?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=l)for(d=0;d<l.length;d++)if((v=l[d])&&"setAttribute"in v==!!S&&(S?v.localName===S:3===v.nodeType)){e=v,l[d]=null;break}if(null==e){if(null===S)return document.createTextNode(k);e=document.createElementNS(o,S,k.is&&k),c&&(a.__m&&a.__m(t,l),c=!1),l=null}if(null===S)w===k||c&&e.data===k||(e.data=k);else{if(l=l&&r.call(e.childNodes),w=n.props||p,!c&&null!=l)for(w={},d=0;d<e.attributes.length;d++)w[(v=e.attributes[d]).name]=v.value;for(d in w)if(v=w[d],"children"==d);else if("dangerouslySetInnerHTML"==d)m=v;else if(!(d in k)){if("value"==d&&"defaultValue"in k||"checked"==d&&"defaultChecked"in k)continue;O(e,d,null,v,o)}for(d in k)v=k[d],"children"==d?f=v:"dangerouslySetInnerHTML"==d?h=v:"value"==d?y=v:"checked"==d?b=v:c&&"function"!=typeof v||w[d]===v||O(e,d,v,w[d],o);if(h)c||m&&(h.__html===m.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(m&&(e.innerHTML=""),M(e,g(f)?f:[f],t,n,i,"foreignObject"===S?"http://www.w3.org/1999/xhtml":o,l,s,l?l[0]:n.__k&&C(n,0),c,u),null!=l)for(d=l.length;d--;)_(l[d]);c||(d="value","progress"===S&&null==y?e.removeAttribute("value"):void 0!==y&&(y!==e[d]||"progress"===S&&!y||"option"===S&&y!==w[d])&&O(e,d,y,w[d],o),d="checked",void 0!==b&&b!==e[d]&&O(e,d,b,w[d],o))}return e}function j(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){a.__e(e,n)}}function H(e,t,n){var r,i;if(a.unmount&&a.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||j(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){a.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&H(r[i],t,n||"function"!=typeof e.type);n||_(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function U(e,t,n){return this.constructor(e,n)}function V(e,t,n){var i,o,l,s;a.__&&a.__(e,t),o=(i="function"==typeof n)?null:n&&n.__k||t.__k,l=[],s=[],D(t,e=(!i&&n||t).__k=b(S,null,[e]),o||p,p,t.namespaceURI,!i&&n?[n]:o?null:t.firstChild?r.call(t.childNodes):null,l,!i&&n?n:o?o.__e:t.firstChild,i,s),z(l,e,s)}function B(e,t){V(e,t,B)}function q(e,t,n){var a,i,o,l,s=y({},e.props);for(o in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)"key"==o?a=t[o]:"ref"==o?i=t[o]:s[o]=void 0===t[o]&&void 0!==l?l[o]:t[o];return arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),w(e.type,s,a||e.key,i||e.ref,null)}function Y(e,t){var n={__c:t="__cC"+m++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,N(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r=f.slice,a={__e:function(e,t,n,r){for(var a,i,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&null!=i.getDerivedStateFromError&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(e,r||{}),o=a.__d),o)return a.__E=a}catch(t){e=t}throw e}},i=0,x.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=y({},this.state),"function"==typeof e&&(e=e(y({},n),this.props)),e&&y(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),N(this))},x.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),N(this))},x.prototype.render=S,o=[],s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(e,t){return e.__v.__b-t.__v.__b},A.__r=0,u=0,d=R(!1),h=R(!0),m=0},640:e=>{"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC1738",a="RFC3986";e.exports={default:a,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r,RFC3986:a}},215:(e,t,n)=>{"use strict";var r=n(518),a=n(968),i=n(640);e.exports={formats:i,parse:a,stringify:r}},968:(e,t,n)=>{"use strict";var r=n(570),a=Object.prototype.hasOwnProperty,i=Array.isArray,o={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},l=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},s=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,l=n.depth>0&&/(\[[^[\]]*])/.exec(i),c=l?i.slice(0,l.index):i,u=[];if(c){if(!n.plainObjects&&a.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var d=0;n.depth>0&&null!==(l=o.exec(i))&&d<n.depth;){if(d+=1,!n.plainObjects&&a.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}if(l){if(!0===n.strictDepth)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");u.push("["+i.slice(l.index)+"]")}return function(e,t,n,r){for(var a=r?t:s(t,n),i=e.length-1;i>=0;--i){var o,l=e[i];if("[]"===l&&n.parseArrays)o=n.allowEmptyArrays&&(""===a||n.strictNullHandling&&null===a)?[]:[].concat(a);else{o=n.plainObjects?Object.create(null):{};var c="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,u=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,d=parseInt(u,10);n.parseArrays||""!==u?!isNaN(d)&&l!==u&&String(d)===u&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(o=[])[d]=a:"__proto__"!==u&&(o[u]=a):o={0:a}}a=o}return a}(u,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return o;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.decodeDotInKeys&&"boolean"!==typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&"undefined"!==typeof e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?o.charset:e.charset,n="undefined"===typeof e.duplicates?o.duplicates:e.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:"undefined"===typeof e.allowDots?!0===e.decodeDotInKeys||o.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:o.allowEmptyArrays,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:o.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:o.comma,decodeDotInKeys:"boolean"===typeof e.decodeDotInKeys?e.decodeDotInKeys:o.decodeDotInKeys,decoder:"function"===typeof e.decoder?e.decoder:o.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:o.depth,duplicates:n,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:o.plainObjects,strictDepth:"boolean"===typeof e.strictDepth?!!e.strictDepth:o.strictDepth,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var u="string"===typeof e?function(e,t){var n={__proto__:null},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var u,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,d),m=-1,p=t.charset;if(t.charsetSentinel)for(u=0;u<h.length;++u)0===h[u].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[u]?p="utf-8":"utf8=%26%2310003%3B"===h[u]&&(p="iso-8859-1"),m=u,u=h.length);for(u=0;u<h.length;++u)if(u!==m){var f,v,g=h[u],y=g.indexOf("]="),_=-1===y?g.indexOf("="):y+1;-1===_?(f=t.decoder(g,o.decoder,p,"key"),v=t.strictNullHandling?null:""):(f=t.decoder(g.slice(0,_),o.decoder,p,"key"),v=r.maybeMap(s(g.slice(_+1),t),(function(e){return t.decoder(e,o.decoder,p,"value")}))),v&&t.interpretNumericEntities&&"iso-8859-1"===p&&(v=l(v)),g.indexOf("[]=")>-1&&(v=i(v)?[v]:v);var b=a.call(n,f);b&&"combine"===t.duplicates?n[f]=r.combine(n[f],v):b&&"last"!==t.duplicates||(n[f]=v)}return n}(e,n):e,d=n.plainObjects?Object.create(null):{},h=Object.keys(u),m=0;m<h.length;++m){var p=h[m],f=c(p,u[p],n,"string"===typeof e);d=r.merge(d,f,n)}return!0===n.allowSparse?d:r.compact(d)}},518:(e,t,n)=>{"use strict";var r=n(670),a=n(570),i=n(640),o=Object.prototype.hasOwnProperty,l={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,s(t)?t:[t])},d=Date.prototype.toISOString,h=i.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:a.encode,encodeValuesOnly:!1,format:h,formatter:i.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},p={},f=function e(t,n,i,o,l,c,d,h,f,v,g,y,_,b,w,k,S,x){for(var C,E=t,N=x,A=0,M=!1;void 0!==(N=N.get(p))&&!M;){var T=N.get(t);if(A+=1,"undefined"!==typeof T){if(T===A)throw new RangeError("Cyclic object value");M=!0}"undefined"===typeof N.get(p)&&(A=0)}if("function"===typeof v?E=v(n,E):E instanceof Date?E=_(E):"comma"===i&&s(E)&&(E=a.maybeMap(E,(function(e){return e instanceof Date?_(e):e}))),null===E){if(c)return f&&!k?f(n,m.encoder,S,"key",b):n;E=""}if("string"===typeof(C=E)||"number"===typeof C||"boolean"===typeof C||"symbol"===typeof C||"bigint"===typeof C||a.isBuffer(E))return f?[w(k?n:f(n,m.encoder,S,"key",b))+"="+w(f(E,m.encoder,S,"value",b))]:[w(n)+"="+w(String(E))];var $,L=[];if("undefined"===typeof E)return L;if("comma"===i&&s(E))k&&f&&(E=a.maybeMap(E,f)),$=[{value:E.length>0?E.join(",")||null:void 0}];else if(s(v))$=v;else{var P=Object.keys(E);$=g?P.sort(g):P}var I=h?n.replace(/\./g,"%2E"):n,O=o&&s(E)&&1===E.length?I+"[]":I;if(l&&s(E)&&0===E.length)return O+"[]";for(var R=0;R<$.length;++R){var D=$[R],z="object"===typeof D&&"undefined"!==typeof D.value?D.value:E[D];if(!d||null!==z){var F=y&&h?D.replace(/\./g,"%2E"):D,j=s(E)?"function"===typeof i?i(O,F):O:O+(y?"."+F:"["+F+"]");x.set(t,A);var H=r();H.set(p,x),u(L,e(z,j,i,o,l,c,d,h,"comma"===i&&k&&s(E)?null:f,v,g,y,_,b,w,k,S,H))}}return L};e.exports=function(e,t){var n,a=e,c=function(e){if(!e)return m;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.encodeDotInKeys&&"boolean"!==typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||m.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if("undefined"!==typeof e.format){if(!o.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r,a=i.formatters[n],c=m.filter;if(("function"===typeof e.filter||s(e.filter))&&(c=e.filter),r=e.arrayFormat in l?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":m.arrayFormat,"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u="undefined"===typeof e.allowDots?!0===e.encodeDotInKeys||m.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:m.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:r,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:m.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:"undefined"===typeof e.delimiter?m.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:m.encode,encodeDotInKeys:"boolean"===typeof e.encodeDotInKeys?e.encodeDotInKeys:m.encodeDotInKeys,encoder:"function"===typeof e.encoder?e.encoder:m.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:m.encodeValuesOnly,filter:c,format:n,formatter:a,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:m.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:m.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:m.strictNullHandling}}(t);"function"===typeof c.filter?a=(0,c.filter)("",a):s(c.filter)&&(n=c.filter);var d=[];if("object"!==typeof a||null===a)return"";var h=l[c.arrayFormat],p="comma"===h&&c.commaRoundTrip;n||(n=Object.keys(a)),c.sort&&n.sort(c.sort);for(var v=r(),g=0;g<n.length;++g){var y=n[g];c.skipNulls&&null===a[y]||u(d,f(a[y],y,h,p,c.allowEmptyArrays,c.strictNullHandling,c.skipNulls,c.encodeDotInKeys,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,v))}var _=d.join(c.delimiter),b=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),_.length>0?b+_:""}},570:(e,t,n)=>{"use strict";var r=n(640),a=Object.prototype.hasOwnProperty,i=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),l=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n},s=1024;e.exports={arrayToObject:l,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var a=t[r],o=a.obj[a.prop],l=Object.keys(o),s=0;s<l.length;++s){var c=l[s],u=o[c];"object"===typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:o,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(i(n)){for(var r=[],a=0;a<n.length;++a)"undefined"!==typeof n[a]&&r.push(n[a]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(a){return r}},encode:function(e,t,n,a,i){if(0===e.length)return e;var l=e;if("symbol"===typeof e?l=Symbol.prototype.toString.call(e):"string"!==typeof e&&(l=String(e)),"iso-8859-1"===n)return escape(l).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<l.length;u+=s){for(var d=l.length>=s?l.slice(u,u+s):l,h=[],m=0;m<d.length;++m){var p=d.charCodeAt(m);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===r.RFC1738&&(40===p||41===p)?h[h.length]=d.charAt(m):p<128?h[h.length]=o[p]:p<2048?h[h.length]=o[192|p>>6]+o[128|63&p]:p<55296||p>=57344?h[h.length]=o[224|p>>12]+o[128|p>>6&63]+o[128|63&p]:(m+=1,p=65536+((1023&p)<<10|1023&d.charCodeAt(m)),h[h.length]=o[240|p>>18]+o[128|p>>12&63]+o[128|p>>6&63]+o[128|63&p])}c+=h.join("")}return c},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==typeof n){if(i(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!a.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);var o=t;return i(t)&&!i(n)&&(o=l(t,r)),i(t)&&i(n)?(n.forEach((function(n,i){if(a.call(t,i)){var o=t[i];o&&"object"===typeof o&&n&&"object"===typeof n?t[i]=e(o,n,r):t.push(n)}else t[i]=n})),t):Object.keys(n).reduce((function(t,i){var o=n[i];return a.call(t,i)?t[i]=e(t[i],o,r):t[i]=o,t}),o)}}},494:(e,t,n)=>{e.exports=n(204)},204:(e,t,n)=>{"use strict";var r=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(n(609)),a=n(609);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var a=n[r],i=Object.getOwnPropertyDescriptor(t,a);i&&i.configurable&&void 0===e[a]&&Object.defineProperty(e,a,i)}}(e.prototype.constructor=e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s=function(e,t,n,r,a,i,o,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,l],u=0;(s=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}};function c(e,t,n){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=t,e.selectionEnd=n;else{var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}var u={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};function d(e,t,n){var r="",a="",i=null,o=[];if(void 0===t&&(t="_"),null==n&&(n=u),!e||"string"!=typeof e)return{maskChar:t,formatChars:n,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var l=!1;return e.split("").forEach((function(e){l=!l&&"\\"===e||(l||!n[e]?(o.push(r.length),r.length===o.length-1&&(a+=e)):i=r.length+1,r+=e,!1)})),{maskChar:t,formatChars:n,prefix:a,mask:r,lastEditablePosition:i,permanents:o}}function h(e,t){return-1!==e.permanents.indexOf(t)}function m(e,t,n){var r=e.mask,a=e.formatChars;if(!n)return!1;if(h(e,t))return r[t]===n;var i=a[r[t]];return new RegExp(i).test(n)}function p(e,t){return t.split("").every((function(t,n){return h(e,n)||!m(e,n,t)}))}function f(e,t){var n=e.maskChar,r=e.prefix;if(!n){for(;t.length>r.length&&h(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var a=r.length,i=t.length;i>=r.length;i--){var o=t[i];if(!h(e,i)&&m(e,i,o)){a=i+1;break}}return a}function v(e,t){return f(e,t)===e.mask.length}function g(e,t){var n=e.maskChar,r=e.mask,a=e.prefix;if(!n){for((t=y(e,"",t,0)).length<a.length&&(t=a);t.length<r.length&&h(e,t.length);)t+=r[t.length];return t}if(t)return y(e,g(e,""),t,0);for(var i=0;i<r.length;i++)h(e,i)?t+=r[i]:t+=n;return t}function y(e,t,n,r){var a=e.mask,i=e.maskChar,o=e.prefix,l=n.split(""),s=v(e,t);return!i&&r>t.length&&(t+=a.slice(t.length,r)),l.every((function(n){for(;u=n,h(e,c=r)&&u!==a[c];){if(r>=t.length&&(t+=a[r]),l=n,i&&h(e,r)&&l===i)return!0;if(++r>=a.length)return!1}var l,c,u;return!m(e,r,n)&&n!==i||(r<t.length?t=i||s||r<o.length?t.slice(0,r)+n+t.slice(r+1):(t=t.slice(0,r)+n+t.slice(r),g(e,t)):i||(t+=n),++r<a.length)})),t}function _(e,t){for(var n=e.mask,r=t;r<n.length;++r)if(!h(e,r))return r;return null}function b(e){return e||0===e?e+"":""}function w(e,t,n,r,a){var i=e.mask,o=e.prefix,l=e.lastEditablePosition,s=t,c="",u=0,d=0,p=Math.min(a.start,n.start);return n.end>a.start?d=(u=function(e,t,n,r){var a=e.mask,i=e.maskChar,o=n.split(""),l=r;return o.every((function(t){for(;o=t,h(e,n=r)&&o!==a[n];)if(++r>=a.length)return!1;var n,o;return(m(e,r,t)||t===i)&&r++,r<a.length})),r-l}(e,0,c=s.slice(a.start,n.end),p))?a.length:0:s.length<r.length&&(d=r.length-s.length),s=r,d&&(1!==d||a.length||(p=a.start===n.start?_(e,n.start):function(e,t){for(var n=t;0<=n;--n)if(!h(e,n))return n;return null}(e,n.start)),s=function(e,t,n,r){var a=n+r,i=e.maskChar,o=e.mask,l=e.prefix,s=t.split("");if(i)return s.map((function(t,r){return r<n||a<=r?t:h(e,r)?o[r]:i})).join("");for(var c=a;c<s.length;c++)h(e,c)&&(s[c]="");return n=Math.max(l.length,n),s.splice(n,a-n),t=s.join(""),g(e,t)}(e,s,p,d)),s=y(e,s,c,p),(p+=u)>=i.length?p=i.length:p<o.length&&!u?p=o.length:p>=o.length&&p<l&&u&&(p=_(e,p)),c||(c=null),{value:s=g(e,s),enteredString:c,selection:{start:p,end:p}}}function k(e){return"function"==typeof e}function S(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function x(e){return(S()?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame:function(){return setTimeout(e,1e3/60)})(e)}function C(e){(S()||clearTimeout)(e)}var E=function(e){function t(t){var n=e.call(this,t)||this;n.focused=!1,n.mounted=!1,n.previousSelection=null,n.selectionDeferId=null,n.saveSelectionLoopDeferId=null,n.saveSelectionLoop=function(){n.previousSelection=n.getSelection(),n.saveSelectionLoopDeferId=x(n.saveSelectionLoop)},n.runSaveSelectionLoop=function(){null===n.saveSelectionLoopDeferId&&n.saveSelectionLoop()},n.stopSaveSelectionLoop=function(){null!==n.saveSelectionLoopDeferId&&(C(n.saveSelectionLoopDeferId),n.saveSelectionLoopDeferId=null,n.previousSelection=null)},n.getInputDOMNode=function(){if(!n.mounted)return null;var e=a.findDOMNode(l(l(n))),t="undefined"!=typeof window&&e instanceof window.Element;if(e&&!t)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw new Error("react-input-mask: inputComponent doesn't contain input node");return e},n.getInputValue=function(){var e=n.getInputDOMNode();return e?e.value:null},n.setInputValue=function(e){var t=n.getInputDOMNode();t&&(n.value=e,t.value=e)},n.setCursorToEnd=function(){var e=f(n.maskOptions,n.value),t=_(n.maskOptions,e);null!==t&&n.setCursorPosition(t)},n.setSelection=function(e,t,r){void 0===r&&(r={});var a=n.getInputDOMNode(),i=n.isFocused();a&&i&&(r.deferred||c(a,e,t),null!==n.selectionDeferId&&C(n.selectionDeferId),n.selectionDeferId=x((function(){n.selectionDeferId=null,c(a,e,t)})),n.previousSelection={start:e,end:t,length:Math.abs(t-e)})},n.getSelection=function(){return function(e){var t=0,n=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,n=e.selectionEnd;else{var r=document.selection.createRange();r.parentElement()===e&&(t=-r.moveStart("character",-e.value.length),n=-r.moveEnd("character",-e.value.length))}return{start:t,end:n,length:n-t}}(n.getInputDOMNode())},n.getCursorPosition=function(){return n.getSelection().start},n.setCursorPosition=function(e){n.setSelection(e,e)},n.isFocused=function(){return n.focused},n.getBeforeMaskedValueChangeConfig=function(){var e=n.maskOptions,t=e.mask,r=e.maskChar,a=e.permanents,i=e.formatChars;return{mask:t,maskChar:r,permanents:a,alwaysShowMask:!!n.props.alwaysShowMask,formatChars:i}},n.isInputAutofilled=function(e,t,r,a){var i=n.getInputDOMNode();try{if(i.matches(":-webkit-autofill"))return!0}catch(u){}return!n.focused||a.end<r.length&&t.end===e.length},n.onChange=function(e){var t=l(l(n)).beforePasteState,r=l(l(n)).previousSelection,a=n.props.beforeMaskedValueChange,i=n.getInputValue(),o=n.value,s=n.getSelection();n.isInputAutofilled(i,s,o,r)&&(o=g(n.maskOptions,""),r={start:0,end:0,length:0}),t&&(r=t.selection,o=t.value,s={start:r.start+i.length,end:r.start+i.length,length:0},i=o.slice(0,r.start)+i+o.slice(r.end),n.beforePasteState=null);var c=w(n.maskOptions,i,s,o,r),u=c.enteredString,d=c.selection,h=c.value;if(k(a)){var m=a({value:h,selection:d},{value:o,selection:r},u,n.getBeforeMaskedValueChangeConfig());h=m.value,d=m.selection}n.setInputValue(h),k(n.props.onChange)&&n.props.onChange(e),n.isWindowsPhoneBrowser?n.setSelection(d.start,d.end,{deferred:!0}):n.setSelection(d.start,d.end)},n.onFocus=function(e){var t=n.props.beforeMaskedValueChange,r=n.maskOptions,a=r.mask,i=r.prefix;if(n.focused=!0,n.mounted=!0,a){if(n.value)f(n.maskOptions,n.value)<n.maskOptions.mask.length&&n.setCursorToEnd();else{var o=g(n.maskOptions,i),l=g(n.maskOptions,o),s=f(n.maskOptions,l),c=_(n.maskOptions,s),u={start:c,end:c};if(k(t)){var d=t({value:l,selection:u},{value:n.value,selection:null},null,n.getBeforeMaskedValueChangeConfig());l=d.value,u=d.selection}var h=l!==n.getInputValue();h&&n.setInputValue(l),h&&k(n.props.onChange)&&n.props.onChange(e),n.setSelection(u.start,u.end)}n.runSaveSelectionLoop()}k(n.props.onFocus)&&n.props.onFocus(e)},n.onBlur=function(e){var t=n.props.beforeMaskedValueChange,r=n.maskOptions.mask;if(n.stopSaveSelectionLoop(),n.focused=!1,r&&!n.props.alwaysShowMask&&p(n.maskOptions,n.value)){var a="";k(t)&&(a=t({value:a,selection:null},{value:n.value,selection:n.previousSelection},null,n.getBeforeMaskedValueChangeConfig()).value);var i=a!==n.getInputValue();i&&n.setInputValue(a),i&&k(n.props.onChange)&&n.props.onChange(e)}k(n.props.onBlur)&&n.props.onBlur(e)},n.onMouseDown=function(e){if(!n.focused&&document.addEventListener){n.mouseDownX=e.clientX,n.mouseDownY=e.clientY,n.mouseDownTime=(new Date).getTime();document.addEventListener("mouseup",(function e(t){if(document.removeEventListener("mouseup",e),n.focused){var r=Math.abs(t.clientX-n.mouseDownX),a=Math.abs(t.clientY-n.mouseDownY),i=Math.max(r,a),o=(new Date).getTime()-n.mouseDownTime;(i<=10&&o<=200||i<=5&&o<=300)&&n.setCursorToEnd()}}))}k(n.props.onMouseDown)&&n.props.onMouseDown(e)},n.onPaste=function(e){k(n.props.onPaste)&&n.props.onPaste(e),e.defaultPrevented||(n.beforePasteState={value:n.getInputValue(),selection:n.getSelection()},n.setInputValue(""))},n.handleRef=function(e){null==n.props.children&&k(n.props.inputRef)&&n.props.inputRef(e)};var r=t.mask,i=t.maskChar,o=t.formatChars,s=t.alwaysShowMask,u=t.beforeMaskedValueChange,h=t.defaultValue,m=t.value;n.maskOptions=d(r,i,o),null==h&&(h=""),null==m&&(m=h);var v=b(m);if(n.maskOptions.mask&&(s||v)&&(v=g(n.maskOptions,v),k(u))){var y=t.value;null==t.value&&(y=h),v=u({value:v,selection:null},{value:y=b(y),selection:null},null,n.getBeforeMaskedValueChangeConfig()).value}return n.value=v,n}o(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=function(){var e=new RegExp("windows","i"),t=new RegExp("phone","i"),n=navigator.userAgent;return e.test(n)&&t.test(n)}(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},n.componentDidUpdate=function(){var e=this.previousSelection,t=this.props,n=t.beforeMaskedValueChange,r=t.alwaysShowMask,a=t.mask,i=t.maskChar,o=t.formatChars,l=this.maskOptions,s=r||this.isFocused(),c=null!=this.props.value,u=c?b(this.props.value):this.value,h=e?e.start:null;if(this.maskOptions=d(a,i,o),this.maskOptions.mask){!l.mask&&this.isFocused()&&this.runSaveSelectionLoop();var m=this.maskOptions.mask&&this.maskOptions.mask!==l.mask;if(l.mask||c||(u=this.getInputValue()),(m||this.maskOptions.mask&&(u||s))&&(u=g(this.maskOptions,u)),m){var y=f(this.maskOptions,u);(null===h||y<h)&&(h=v(this.maskOptions,u)?y:_(this.maskOptions,y))}!this.maskOptions.mask||!p(this.maskOptions,u)||s||c&&this.props.value||(u="");var w={start:h,end:h};if(k(n)){var S=n({value:u,selection:w},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());u=S.value,w=S.selection}this.value=u;var x=this.getInputValue()!==this.value;x?(this.setInputValue(this.value),this.forceUpdate()):m&&this.forceUpdate();var C=!1;null!=w.start&&null!=w.end&&(C=!e||e.start!==w.start||e.end!==w.end),(C||x)&&this.setSelection(w.start,w.end)}else l.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},n.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&C(this.selectionDeferId),this.stopSaveSelectionLoop()},n.render=function(){var e,t=this.props,n=(t.mask,t.alwaysShowMask,t.maskChar,t.formatChars,t.inputRef,t.beforeMaskedValueChange,t.children),a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(t,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(n){k(n)||s(!1);var o=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],l=i({},a);o.forEach((function(e){return delete l[e]})),e=n(l),o.filter((function(t){return null!=e.props[t]&&e.props[t]!==a[t]})).length&&s(!1)}else e=r.createElement("input",i({ref:this.handleRef},a));var c={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(a.disabled||a.readOnly||(c.onChange=this.onChange,c.onPaste=this.onPaste,c.onMouseDown=this.onMouseDown),null!=a.value&&(c.value=this.value)),e=r.cloneElement(e,c)},t}(r.Component);e.exports=E},259:(e,t,n)=>{"use strict";var r=n(375),a=n(411),i=n(734)(),o=n(553),l=n(277),s=r("%Math.floor%");e.exports=function(e,t){if("function"!==typeof e)throw new l("`fn` is not a function");if("number"!==typeof t||t<0||t>4294967295||s(t)!==t)throw new l("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,c=!0;if("length"in e&&o){var u=o(e,"length");u&&!u.configurable&&(r=!1),u&&!u.writable&&(c=!1)}return(r||c||!n)&&(i?a(e,"length",t,!0,!0):a(e,"length",t)),e}},670:(e,t,n)=>{"use strict";var r=n(375),a=n(61),i=n(141),o=n(277),l=r("%WeakMap%",!0),s=r("%Map%",!0),c=a("WeakMap.prototype.get",!0),u=a("WeakMap.prototype.set",!0),d=a("WeakMap.prototype.has",!0),h=a("Map.prototype.get",!0),m=a("Map.prototype.set",!0),p=a("Map.prototype.has",!0),f=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new o("Side channel does not contain "+i(e))},get:function(r){if(l&&r&&("object"===typeof r||"function"===typeof r)){if(e)return c(e,r)}else if(s){if(t)return h(t,r)}else if(n)return function(e,t){var n=f(e,t);return n&&n.value}(n,r)},has:function(r){if(l&&r&&("object"===typeof r||"function"===typeof r)){if(e)return d(e,r)}else if(s){if(t)return p(t,r)}else if(n)return function(e,t){return!!f(e,t)}(n,r);return!1},set:function(r,a){l&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new l),u(e,r,a)):s?(t||(t=new s),m(t,r,a)):(n||(n={key:{},next:null}),function(e,t,n){var r=f(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,a))}};return r}},634:()=>{},738:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".f772060c.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="vmui:";n.l=(r,a,i,o)=>{if(e[r])e[r].push(a);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=r),e[r]=[a];var h=(t,n)=>{l.onerror=l.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=i);var o=n.p+n.u(t),l=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,a[1](l)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,i,o=r[0],l=r[1],s=r[2],c=0;if(o.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)s(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkvmui=self.webpackChunkvmui||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{AlarmIcon:()=>Vn,ArrowDownIcon:()=>Fn,ArrowDropDownIcon:()=>jn,CalendarIcon:()=>Un,ChartIcon:()=>Wn,ClockIcon:()=>Hn,CloseIcon:()=>Ln,CodeIcon:()=>Qn,CollapseIcon:()=>kr,CopyIcon:()=>rr,DeleteIcon:()=>Zn,DoneIcon:()=>Xn,DownloadIcon:()=>br,DragIcon:()=>ar,ErrorIcon:()=>Rn,ExpandIcon:()=>wr,FunctionIcon:()=>gr,InfoIcon:()=>In,IssueIcon:()=>lr,KeyboardIcon:()=>Bn,LabelIcon:()=>yr,ListIcon:()=>mr,LogoAnomalyIcon:()=>Mn,LogoIcon:()=>Nn,LogoLogsIcon:()=>An,LogoShortIcon:()=>Tn,MetricIcon:()=>vr,MinusIcon:()=>Jn,MoreIcon:()=>ur,PlayCircleOutlineIcon:()=>Yn,PlayIcon:()=>qn,PlusIcon:()=>Gn,Prettify:()=>nr,QuestionIcon:()=>sr,RefreshIcon:()=>zn,RestartIcon:()=>Pn,SearchIcon:()=>Sr,SettingsIcon:()=>$n,SpinnerIcon:()=>xr,StarBorderIcon:()=>pr,StarIcon:()=>fr,StorageIcon:()=>cr,SuccessIcon:()=>Dn,TableIcon:()=>Kn,TimelineIcon:()=>ir,TipIcon:()=>hr,TuneIcon:()=>dr,ValueIcon:()=>_r,VisibilityIcon:()=>er,VisibilityOffIcon:()=>tr,WarningIcon:()=>On,WikiIcon:()=>or});var t,r=n(609),a=n(159),i=n.n(a),o=n(7),l=n.n(o),s=n(648),c=n.n(s),u=n(220),d=n.n(u);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}i().extend(l()),i().extend(c()),i().extend(d()),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const m="popstate";function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,r){return void 0===n&&(n=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function y(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function _(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b(e,n,r,a){void 0===a&&(a={});let{window:i=document.defaultView,v5Compat:o=!1}=a,l=i.history,s=t.Pop,c=null,u=d();function d(){return(l.state||{idx:null}).idx}function f(){s=t.Pop;let e=d(),n=null==e?null:e-u;u=e,c&&c({action:s,location:b.location,delta:n})}function _(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:y(e);return n=n.replace(/ $/,"%20"),p(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,l.replaceState(h({},l.state,{idx:u}),""));let b={get action(){return s},get location(){return e(i,l)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(m,f),c=e,()=>{i.removeEventListener(m,f),c=null}},createHref:e=>n(i,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){s=t.Push;let a=g(b.location,e,n);r&&r(a,e),u=d()+1;let h=v(a,u),m=b.createHref(a);try{l.pushState(h,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(m)}o&&c&&c({action:s,location:b.location,delta:1})},replace:function(e,n){s=t.Replace;let a=g(b.location,e,n);r&&r(a,e),u=d();let i=v(a,u),h=b.createHref(a);l.replaceState(i,"",h),o&&c&&c({action:s,location:b.location,delta:0})},go:e=>l.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function k(e,t,n){return void 0===n&&(n="/"),S(e,t,n,!1)}function S(e,t,n,r){let a=D(("string"===typeof t?_(t):t).pathname||"/",n);if(null==a)return null;let i=x(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=R(a);o=I(i[l],e,r)}return o}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(p(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let l=U([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),x(e.children,t,s,l)),(null!=e.path||e.index)&&t.push({path:l,score:P(l,e.index),routesMeta:s})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of C(e.path))a(e,t,r);else a(e,t)})),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let o=C(r.join("/")),l=[];return l.push(...o.map((e=>""===e?i:[i,e].join("/")))),a&&l.push(...o),l.map((t=>e.startsWith("/")&&""===t?"/":t))}const E=/^:[\w-]+$/,N=3,A=2,M=1,T=10,$=-2,L=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=$),t&&(r+=A),n.filter((e=>!L(e))).reduce(((e,t)=>e+(E.test(t)?N:""===t?M:T)),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let e=r[l],s=l===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},c),d=e.route;if(!u&&s&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:U([i,u.pathname]),pathnameBase:V(U([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=U([i,u.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=l[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const s=l[n];return e[r]=a&&!s?void 0:(s||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:o,pattern:e}}function R(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=F(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function H(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=_(e):(a=h({},e),p(!a.pathname||!a.pathname.includes("?"),z("?","pathname","search",a)),p(!a.pathname||!a.pathname.includes("#"),z("#","pathname","hash",a)),p(!a.search||!a.search.includes("#"),z("#","search","hash",a)));let i,o=""===e||""===a.pathname,l=o?"/":a.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let s=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?_(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:B(r),hash:q(a)}}(a,i),c=l&&"/"!==l&&l.endsWith("/"),u=(o||"."===l)&&n.endsWith("/");return s.pathname.endsWith("/")||!c&&!u||(s.pathname+="/"),s}const U=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],K=(new Set(W),["get",...W]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}const Z=r.createContext(null);const G=r.createContext(null);const J=r.createContext(null);const X=r.createContext(null);const ee=r.createContext({outlet:null,matches:[],isDataRoute:!1});const te=r.createContext(null);function ne(){return null!=r.useContext(X)}function re(){return ne()||p(!1),r.useContext(X).location}function ae(e){r.useContext(J).static||r.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=r.useContext(ee);return e?function(){let{router:e}=ve(pe.UseNavigateStable),t=ye(fe.UseNavigateStable),n=r.useRef(!1);ae((()=>{n.current=!0}));let a=r.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Q({fromRouteId:t},a)))}),[e,t]);return a}():function(){ne()||p(!1);let e=r.useContext(Z),{basename:t,future:n,navigator:a}=r.useContext(J),{matches:i}=r.useContext(ee),{pathname:o}=re(),l=JSON.stringify(j(i,n.v7_relativeSplatPath)),s=r.useRef(!1);ae((()=>{s.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!s.current)return;if("number"===typeof n)return void a.go(n);let i=H(n,JSON.parse(l),o,"path"===r.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:U([t,i.pathname])),(r.replace?a.replace:a.push)(i,r.state,r)}),[t,a,l,o,e]);return c}()}const oe=r.createContext(null);function le(e,t){let{relative:n}=void 0===t?{}:t,{future:a}=r.useContext(J),{matches:i}=r.useContext(ee),{pathname:o}=re(),l=JSON.stringify(j(i,a.v7_relativeSplatPath));return r.useMemo((()=>H(e,JSON.parse(l),o,"path"===n)),[e,l,o,n])}function se(e,n,a,i){ne()||p(!1);let{navigator:o}=r.useContext(J),{matches:l}=r.useContext(ee),s=l[l.length-1],c=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let d,h=re();if(n){var m;let e="string"===typeof n?_(n):n;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||p(!1),d=e}else d=h;let f=d.pathname||"/",v=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=k(e,{pathname:v});let y=me(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,a,i);return n&&y?r.createElement(X.Provider,{value:{location:Q({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},y):y}function ce(){let e=function(){var e;let t=r.useContext(te),n=ge(fe.UseRouteError),a=ye(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[a]}(),t=Y(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,null)}const ue=r.createElement(ce,null);class de extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(ee.Provider,{value:this.props.routeContext},r.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function he(e){let{routeContext:t,match:n,children:a}=e,i=r.useContext(Z);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ee.Provider,{value:t},a)}function me(e,t,n,a){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===a&&(a=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=a)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,s=null==(i=n)?void 0:i.errors;if(null!=s){let e=l.findIndex((e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id])));e>=0||p(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,u=-1;if(n&&a&&a.v7_partialHydration)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){c=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight(((e,a,i)=>{let o,d=!1,h=null,m=null;var p;n&&(o=s&&a.route.id?s[a.route.id]:void 0,h=a.route.errorElement||ue,c&&(u<0&&0===i?(p="route-fallback",!1||_e[p]||(_e[p]=!0),d=!0,m=null):u===i&&(d=!0,m=a.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,i+1)),v=()=>{let t;return t=o?h:d?m:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(he,{match:a,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===i)?r.createElement(de,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:v(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):v()}),null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function ve(e){let t=r.useContext(Z);return t||p(!1),t}function ge(e){let t=r.useContext(G);return t||p(!1),t}function ye(e){let t=function(){let e=r.useContext(ee);return e||p(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||p(!1),n.route.id}const _e={};r.startTransition;function be(e){return function(e){let t=r.useContext(ee).outlet;return t?r.createElement(oe.Provider,{value:e},t):t}(e.context)}function we(e){p(!1)}function ke(e){let{basename:n="/",children:a=null,location:i,navigationType:o=t.Pop,navigator:l,static:s=!1,future:c}=e;ne()&&p(!1);let u=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:u,navigator:l,static:s,future:Q({v7_relativeSplatPath:!1},c)})),[u,c,l,s]);"string"===typeof i&&(i=_(i));let{pathname:h="/",search:m="",hash:f="",state:v=null,key:g="default"}=i,y=r.useMemo((()=>{let e=D(h,u);return null==e?null:{location:{pathname:e,search:m,hash:f,state:v,key:g},navigationType:o}}),[u,h,m,f,v,g,o]);return null==y?null:r.createElement(J.Provider,{value:d},r.createElement(X.Provider,{children:a,value:y}))}function Se(e){let{children:t,location:n}=e;return se(xe(t),n)}new Promise((()=>{}));r.Component;function xe(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,a)=>{if(!r.isValidElement(e))return;let i=[...t,a];if(e.type===r.Fragment)return void n.push.apply(n,xe(e.props.children,i));e.type!==we&&p(!1),e.props.index&&e.props.children&&p(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=xe(e.props.children,i)),n.push(o)})),n}function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Ne(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Me=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Yp){}const Te=r.createContext({isTransitioning:!1});new Map;const $e=r.startTransition;r.flushSync,r.useId;function Le(e){let{basename:t,children:n,future:a,window:i}=e,o=r.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),b((function(e,t){let{pathname:n="/",search:r="",hash:a=""}=_(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),g("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:y(t))}),(function(e,t){f("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}({window:i,v5Compat:!0}));let l=o.current,[s,c]=r.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},d=r.useCallback((e=>{u&&$e?$e((()=>c(e))):c(e)}),[c,u]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.createElement(ke,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:l,future:a})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=r.forwardRef((function(e,t){let n,{onClick:a,relative:i,reloadDocument:o,replace:l,state:s,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,m=Ee(e,Ae),{basename:f}=r.useContext(J),v=!1;if("string"===typeof u&&Ie.test(u)&&(n=u,Pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,f);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(Yp){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;ne()||p(!1);let{basename:a,navigator:i}=r.useContext(J),{hash:o,pathname:l,search:s}=le(e,{relative:n}),c=l;return"/"!==a&&(c="/"===l?a:U([a,l])),i.createHref({pathname:c,search:s,hash:o})}(u,{relative:i}),_=function(e,t){let{target:n,replace:a,state:i,preventScrollReset:o,relative:l,unstable_viewTransition:s}=void 0===t?{}:t,c=ie(),u=re(),d=le(e,{relative:l});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==a?a:y(u)===y(d);c(e,{replace:n,state:i,preventScrollReset:o,relative:l,unstable_viewTransition:s})}}),[u,c,d,a,i,n,e,o,l,s])}(u,{replace:l,state:s,target:c,preventScrollReset:d,relative:i,unstable_viewTransition:h});return r.createElement("a",Ce({},m,{href:n||g,onClick:v||o?a:function(e){a&&a(e),e.defaultPrevented||_(e)},ref:t,target:c}))}));const Re=r.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:s,unstable_viewTransition:c,children:u}=e,d=Ee(e,Me),h=le(s,{relative:d.relative}),m=re(),f=r.useContext(G),{navigator:v,basename:g}=r.useContext(J),y=null!=f&&function(e,t){void 0===t&&(t={});let n=r.useContext(Te);null==n&&p(!1);let{basename:a}=Fe(De.useViewTransitionState),i=le(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=D(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=D(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=O(i.pathname,l)||null!=O(i.pathname,o)}(h)&&!0===c,_=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,b=m.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;a||(b=b.toLowerCase(),w=w?w.toLowerCase():null,_=_.toLowerCase()),w&&g&&(w=D(w,g)||w);const k="/"!==_&&_.endsWith("/")?_.length-1:_.length;let S,x=b===_||!o&&b.startsWith(_)&&"/"===b.charAt(k),C=null!=w&&(w===_||!o&&w.startsWith(_)&&"/"===w.charAt(_.length)),E={isActive:x,isPending:C,isTransitioning:y},N=x?n:void 0;S="function"===typeof i?i(E):[i,x?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(E):l;return r.createElement(Oe,Ce({},d,{"aria-current":N,className:S,ref:t,style:A,to:s,unstable_viewTransition:c}),"function"===typeof u?u(E):u)}));var De,ze;function Fe(e){let t=r.useContext(Z);return t||p(!1),t}function je(e){let t=r.useRef(Ne(e)),n=r.useRef(!1),a=re(),i=r.useMemo((()=>function(e,t){let n=Ne(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(a.search,n.current?null:t.current)),[a.search]),o=ie(),l=r.useCallback(((e,t)=>{const r=Ne("function"===typeof e?e(i):e);n.current=!0,o("?"+r,t)}),[o,i]);return[i,l]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(De||(De={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ze||(ze={}));let He=function(e){return e.logs="logs",e.anomaly="anomaly",e}({});const Ue={home:"/",metrics:"/metrics",dashboards:"/dashboards",cardinality:"/cardinality",topQueries:"/top-queries",trace:"/trace",withTemplate:"/expand-with-exprs",relabel:"/relabeling",logs:"/logs",activeQueries:"/active-queries",queryAnalyzer:"/query-analyzer",icons:"/icons",anomaly:"/anomaly",query:"/query",rawQuery:"/raw-query",downsamplingDebug:"/downsampling-filters-debug",retentionDebug:"/retention-filters-debug"},{REACT_APP_TYPE:Ve}={},Be=Ve===He.logs,qe={header:{tenant:!0,stepControl:!Be,timeSelector:!Be,executionControls:!Be}},Ye={[Ue.home]:{title:"Query",...qe},[Ue.rawQuery]:{title:"Raw query",...qe},[Ue.metrics]:{title:"Explore Prometheus metrics",header:{tenant:!0,stepControl:!0,timeSelector:!0}},[Ue.cardinality]:{title:"Explore cardinality",header:{tenant:!0,cardinalityDatePicker:!0}},[Ue.topQueries]:{title:"Top queries",header:{tenant:!0}},[Ue.trace]:{title:"Trace analyzer",header:{}},[Ue.queryAnalyzer]:{title:"Query analyzer",header:{}},[Ue.dashboards]:{title:"Dashboards",...qe},[Ue.withTemplate]:{title:"WITH templates",header:{}},[Ue.relabel]:{title:"Metric relabel debug",header:{}},[Ue.logs]:{title:"Logs Explorer",header:{}},[Ue.activeQueries]:{title:"Active Queries",header:{}},[Ue.icons]:{title:"Icons",header:{}},[Ue.anomaly]:{title:"Anomaly exploration",...qe},[Ue.query]:{title:"Query",...qe},[Ue.downsamplingDebug]:{title:"Downsampling filters debug",header:{}},[Ue.retentionDebug]:{title:"Retention filters debug",header:{}}},We=Ue,Ke=()=>{var e;const t=(null===(e=document.getElementById("root"))||void 0===e?void 0:e.dataset.params)||"{}";try{return JSON.parse(t)}catch(Yp){return console.error(Yp),{}}},Qe=()=>!!Object.keys(Ke()).length,Ze=/(\/select\/)(\d+|\d.+)(\/)(.+)/,Ge=(e,t)=>e.replace(Ze,`$1${t}/$4`),Je=e=>{var t;return(null===(t=e.match(Ze))||void 0===t?void 0:t[2])||""},Xe=(e,t)=>{t?window.localStorage.setItem(e,JSON.stringify({value:t})):tt([e]),window.dispatchEvent(new Event("storage"))},et=e=>{const t=window.localStorage.getItem(e);if(null!==t)try{var n;return null===(n=JSON.parse(t))||void 0===n?void 0:n.value}catch(Yp){return t}},tt=e=>e.forEach((e=>window.localStorage.removeItem(e))),{REACT_APP_TYPE:nt}={};var rt=n(215),at=n.n(rt),it=n(424),ot=n.n(it);const lt={table:100,chart:20,code:1e3},st=[{id:"small",isDefault:!0,height:()=>.2*window.innerHeight},{id:"medium",height:()=>.4*window.innerHeight},{id:"large",height:()=>.8*window.innerHeight}],ct=["min","median","max"],ut=(e,t)=>{const n=window.location.hash.split("?")[1],r=at().parse(n,{ignoreQueryPrefix:!0});return ot()(r,e,t||"")},dt=()=>{var e;const t=(null===(e=(window.location.hash.split("?")[1]||"").match(/g\d+\.expr/g))||void 0===e?void 0:e.length)||1;return new Array(t>10?10:t).fill(1).map(((e,t)=>ut(`g${t}.expr`,"")))};let ht=function(e){return e.yhat="yhat",e.yhatUpper="yhat_upper",e.yhatLower="yhat_lower",e.anomaly="vmui_anomalies_points",e.training="vmui_training_data",e.actual="actual",e.anomalyScore="anomaly_score",e}({}),mt=function(e){return e.table="table",e.chart="chart",e.code="code",e}({}),pt=function(e){return e.emptyServer="Please enter Server URL",e.validServer="Please provide a valid Server URL",e.validQuery="Please enter a valid Query and execute it",e.traceNotFound="Not found the tracing information",e.emptyTitle="Please enter title",e.positiveNumber="Please enter positive number",e.validStep="Please enter a valid step",e.unknownType="Unknown server response format: must have 'errorType'",e}({}),ft=function(e){return e.system="system",e.light="light",e.dark="dark",e}({}),vt=function(e){return e.empty="empty",e.metricsql="metricsql",e.label="label",e.labelValue="labelValue",e}({});const gt=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),yt=(e,t)=>{document.documentElement.style.setProperty(`--${e}`,t)},_t=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,bt=e=>{let t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol},wt=e=>e.replace(/\/$/,""),kt=ut("g0.tenantID",""),St={serverUrl:wt((e=>{const{serverURL:t}=Ke(),n=et("SERVER_URL"),r=window.location.href.replace(/\/(select\/)?(vmui)\/.*/,""),a=`${window.location.origin}${window.location.pathname.replace(/^\/vmui/,"")}`,i=window.location.href.replace(/\/(?:prometheus\/)?(?:graph|vmui)\/.*/,"/prometheus"),o=t||n||i;switch(nt){case He.logs:return r;case He.anomaly:return n||a;default:return e?Ge(o,e):o}})(kt)),tenantId:kt,theme:et("THEME")||ft.system,isDarkTheme:null,flags:{},appConfig:{}};function xt(e,t){switch(t.type){case"SET_SERVER":return{...e,serverUrl:wt(t.payload)};case"SET_TENANT_ID":return{...e,tenantId:t.payload};case"SET_THEME":return Xe("THEME",t.payload),{...e,theme:t.payload};case"SET_DARK_THEME":return{...e,isDarkTheme:(n=e.theme,n===ft.system&&_t()||n===ft.dark)};case"SET_FLAGS":return{...e,flags:t.payload};case"SET_APP_CONFIG":return{...e,appConfig:t.payload};default:throw new Error}var n}var Ct=n(746);var Et=0;Array.isArray;function Nt(e,t,n,r,a,i){t||(t={});var o,l,s=t;"ref"in t&&(o=t.ref,delete t.ref);var c={type:e,props:s,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Et,__i:-1,__u:0,__source:a,__self:i};if("function"==typeof e&&(o=e.defaultProps))for(l in o)void 0===s[l]&&(s[l]=o[l]);return Ct.fF.vnode&&Ct.fF.vnode(c),c}const At=(0,r.createContext)({}),Mt=()=>(0,r.useContext)(At).state,Tt=()=>(0,r.useContext)(At).dispatch,$t=Object.entries(St).reduce(((e,t)=>{let[n,r]=t;return{...e,[n]:ut(n)||r}}),{}),Lt="YYYY-MM-DD",Pt="YYYY-MM-DD HH:mm:ss",It="YYYY-MM-DD HH:mm:ss:SSS (Z)",Ot="YYYY-MM-DD[T]HH:mm:ss",Rt="YYYY-MM-DD_HHmmss",Dt=window.innerWidth/4,zt=window.innerWidth/40,Ft=1,jt=1578e8,Ht=Intl.supportedValuesOf,Ut=Ht?Ht("timeZone"):["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmera","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Buenos_Aires","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Catamarca","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Coral_Harbour","America/Cordoba","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fort_Nelson","America/Fortaleza","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Inuvik","America/Iqaluit","America/Jamaica","America/Jujuy","America/Juneau","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Louisville","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Mendoza","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Chita","Asia/Choibalsan","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Hebron","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Katmandu","Asia/Khandyga","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qostanay","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Saigon","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faeroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Kirov","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Johnston","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Ponape","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Truk","Pacific/Wake","Pacific/Wallis"],Vt=[{long:"years",short:"y",possible:"year"},{long:"weeks",short:"w",possible:"week"},{long:"days",short:"d",possible:"day"},{long:"hours",short:"h",possible:"hour"},{long:"minutes",short:"m",possible:"min"},{long:"seconds",short:"s",possible:"sec"},{long:"milliseconds",short:"ms",possible:"millisecond"}],Bt=Vt.map((e=>e.short)),qt=e=>Math.round(1e3*e)/1e3,Yt=e=>en(i().duration(e,"seconds").asMilliseconds()),Wt=e=>{let t=qt(e);const n=Math.round(e);e>=100&&(t=n-n%10),e<100&&e>=10&&(t=n-n%5),e<10&&e>=1&&(t=n),e<1&&e>.01&&(t=Math.round(40*e)/40);return Yt(t||.001).replace(/\s/g,"")},Kt=e=>{const t=e.match(/\d+/g),n=e.match(/[a-zA-Z]+/g);if(n&&t&&Bt.includes(n[0]))return{[n[0]]:t[0]}},Qt=e=>{const t=Vt.map((e=>e.short)).join("|"),n=new RegExp(`\\d+(\\.\\d+)?[${t}]+`,"g"),r=(e.match(n)||[]).reduce(((e,t)=>{const n=Kt(t);return n?{...e,...n}:{...e}}),{});return i().duration(r).asSeconds()},Zt=(e,t)=>Wt(e/(t?zt:Dt)),Gt=(e,t)=>{const n=(t||i()().toDate()).valueOf()/1e3,r=Qt(e);return{start:n-r,end:n,step:Zt(r),date:Jt(t||i()().toDate())}},Jt=e=>i().tz(e).utc().format(Ot),Xt=e=>i().tz(e).format(Ot),en=e=>{const t=Math.floor(e%1e3),n=Math.floor(e/1e3%60),r=Math.floor(e/1e3/60%60),a=Math.floor(e/1e3/3600%24),i=Math.floor(e/864e5),o=["d","h","m","s","ms"],l=[i,a,r,n,t].map(((e,t)=>e?`${e}${o[t]}`:""));return l.filter((e=>e)).join("")},tn=e=>{const t=i()(1e3*e);return t.isValid()?t.toDate():new Date},nn={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1}.REACT_APP_TYPE===He.logs,rn=[{title:"Last 5 minutes",duration:"5m",isDefault:nn},{title:"Last 15 minutes",duration:"15m"},{title:"Last 30 minutes",duration:"30m",isDefault:!nn},{title:"Last 1 hour",duration:"1h"},{title:"Last 3 hours",duration:"3h"},{title:"Last 6 hours",duration:"6h"},{title:"Last 12 hours",duration:"12h"},{title:"Last 24 hours",duration:"24h"},{title:"Last 2 days",duration:"2d"},{title:"Last 7 days",duration:"7d"},{title:"Last 30 days",duration:"30d"},{title:"Last 90 days",duration:"90d"},{title:"Last 180 days",duration:"180d"},{title:"Last 1 year",duration:"1y"},{title:"Yesterday",duration:"1d",until:()=>i()().tz().subtract(1,"day").endOf("day").toDate()},{title:"Today",duration:"1d",until:()=>i()().tz().endOf("day").toDate()}].map((e=>({id:e.title.replace(/\s/g,"_").toLocaleLowerCase(),until:e.until?e.until:()=>i()().tz().toDate(),...e}))),an=e=>{var t;let{relativeTimeId:n,defaultDuration:r,defaultEndInput:a}=e;const i=null===(t=rn.find((e=>e.isDefault)))||void 0===t?void 0:t.id,o=n||ut("g0.relative_time",i),l=rn.find((e=>e.id===o));return{relativeTimeId:l?o:"none",duration:l?l.duration:r,endInput:l?l.until():a}},on=e=>`UTC${i()().tz(e).format("Z")}`,ln=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new RegExp(e,"i");return Ut.reduce(((n,r)=>{const a=(r.match(/^(.*?)\//)||[])[1]||"unknown",i=on(r),o=i.replace(/UTC|0/,""),l=r.replace(/[/_]/g," "),s={region:r,utc:i,search:`${r} ${i} ${l} ${o}`},c=!e||e&&t.test(s.search);return c&&n[a]?n[a].push(s):c&&(n[a]=[s]),n}),{})},sn=e=>{i().tz.setDefault(e)},cn=()=>{const e=i().tz.guess(),t=(e=>{try{return i()().tz(e),!0}catch(Yp){return!1}})(e);return{isValid:t,title:t?`Browser Time (${e})`:"Browser timezone (UTC)",region:t?e:"UTC"}},un=et("TIMEZONE")||cn().region;sn(un);const dn=()=>{const e=ut("g0.range_input"),{duration:t,endInput:n,relativeTimeId:r}=an({defaultDuration:e||"1h",defaultEndInput:(a=ut("g0.end_input",i()().utc().format(Ot)),i()(a).utcOffset(0,!0).toDate()),relativeTimeId:e?ut("g0.relative_time","none"):void 0});var a;return{duration:t,period:Gt(t,n),relativeTime:r}},hn={...dn(),timezone:un};function mn(e,t){switch(t.type){case"SET_TIME_STATE":return{...e,...t.payload};case"SET_DURATION":return{...e,duration:t.payload,period:Gt(t.payload,tn(e.period.end)),relativeTime:"none"};case"SET_RELATIVE_TIME":return{...e,duration:t.payload.duration,period:Gt(t.payload.duration,t.payload.until),relativeTime:t.payload.id};case"SET_PERIOD":const n=(e=>{const t=e.to.valueOf()-e.from.valueOf();return en(t)})(t.payload);return{...e,duration:n,period:Gt(n,t.payload.to),relativeTime:"none"};case"RUN_QUERY":const{duration:r,endInput:a}=an({relativeTimeId:e.relativeTime,defaultDuration:e.duration,defaultEndInput:tn(e.period.end)});return{...e,period:Gt(r,a)};case"RUN_QUERY_TO_NOW":return{...e,period:Gt(e.duration)};case"SET_TIMEZONE":return sn(t.payload),Xe("TIMEZONE",t.payload),e.defaultTimezone&&Xe("DISABLED_DEFAULT_TIMEZONE",t.payload!==e.defaultTimezone),{...e,timezone:t.payload};case"SET_DEFAULT_TIMEZONE":return{...e,defaultTimezone:t.payload};default:throw new Error}}const pn=(0,r.createContext)({}),fn=()=>(0,r.useContext)(pn).state,vn=()=>(0,r.useContext)(pn).dispatch,gn=e=>{const t=et(e);return t?JSON.parse(t):[]},yn=50,_n=1e3,bn=1e3;const wn=dt(),kn={query:wn,queryHistory:wn.map((e=>({index:0,values:[e]}))),autocomplete:et("AUTOCOMPLETE")||!1,autocompleteQuick:!1,autocompleteCache:new class{constructor(){this.maxSize=void 0,this.map=void 0,this.maxSize=bn,this.map=new Map}get(e){for(const[t,n]of this.map){const r=JSON.parse(t),a=r.start===e.start&&r.end===e.end,i=r.type===e.type,o=e.value&&r.value&&e.value.includes(r.value),l=r.match===e.match||o,s=n.length<_n;if(l&&a&&i&&s)return n}return this.map.get(JSON.stringify(e))}put(e,t){if(this.map.size>=this.maxSize){const e=this.map.keys().next().value;this.map.delete(e)}this.map.set(JSON.stringify(e),t)}},metricsQLFunctions:[]};function Sn(e,t){switch(t.type){case"SET_QUERY":return{...e,query:t.payload.map((e=>e))};case"SET_QUERY_HISTORY":return(e=>{const t=e.map((e=>e.values[e.index])),n=gn("QUERY_HISTORY");n[0]||(n[0]=[]);const r=n[0];t.forEach((e=>{!r.includes(e)&&e&&r.unshift(e),r.length>250&&r.shift()})),Xe("QUERY_HISTORY",JSON.stringify(n))})(t.payload),{...e,queryHistory:t.payload};case"SET_QUERY_HISTORY_BY_INDEX":return e.queryHistory.splice(t.payload.queryNumber,1,t.payload.value),{...e,queryHistory:e.queryHistory};case"TOGGLE_AUTOCOMPLETE":return Xe("AUTOCOMPLETE",!e.autocomplete),{...e,autocomplete:!e.autocomplete};case"SET_AUTOCOMPLETE_QUICK":return{...e,autocompleteQuick:t.payload};case"SET_AUTOCOMPLETE_CACHE":return e.autocompleteCache.put(t.payload.key,t.payload.value),{...e};case"SET_METRICSQL_FUNCTIONS":return{...e,metricsQLFunctions:t.payload};default:throw new Error}}const xn=(0,r.createContext)({}),Cn=()=>(0,r.useContext)(xn).state,En=()=>(0,r.useContext)(xn).dispatch,Nn=()=>Nt("svg",{viewBox:"0 0 74 24",fill:"currentColor",children:Nt("path",{d:"M6.12 10.48c.36.28.8.43 1.26.43h.05c.48 0 .96-.19 1.25-.44 1.5-1.28 5.88-5.29 5.88-5.29C15.73 4.1 12.46 3.01 7.43 3h-.06C2.33 3-.93 4.1.24 5.18c0 0 4.37 4 5.88 5.3Zm2.56 2.16c-.36.28-.8.44-1.26.45h-.04c-.46 0-.9-.17-1.26-.45-1.04-.88-4.74-4.22-6.12-5.5v1.94c0 .21.08.5.22.63l.07.06c1.05.96 4.55 4.16 5.83 5.25.36.28.8.43 1.26.44h.04c.49-.02.96-.2 1.26-.44 1.3-1.11 4.94-4.45 5.88-5.31.15-.14.23-.42.23-.63V7.15a454.94 454.94 0 0 1-6.11 5.5Zm-1.26 4.99c.46 0 .9-.16 1.26-.44a454.4 454.4 0 0 0 6.1-5.5v1.94c0 .2-.07.48-.22.62-.94.87-4.57 4.2-5.88 5.3-.3.26-.77.44-1.26.45h-.04c-.46 0-.9-.16-1.26-.44-1.2-1.02-4.38-3.92-5.62-5.06l-.28-.25c-.14-.14-.22-.42-.22-.62v-1.94c1.38 1.26 5.08 4.6 6.12 5.5.36.28.8.43 1.26.44h.04ZM35 5l-5.84 14.46h-2.43L20.89 5h2.16a.9.9 0 0 1 .9.61l3.41 8.82a18.8 18.8 0 0 1 .62 2.02 19.44 19.44 0 0 1 .57-2.02l3.39-8.82c.05-.15.16-.3.31-.42a.9.9 0 0 1 .58-.19H35Zm17.18 0v14.46H49.8v-9.34c0-.37.02-.78.06-1.21l-4.37 8.21c-.21.4-.53.59-.95.59h-.38c-.43 0-.75-.2-.95-.59L38.8 8.88a22.96 22.96 0 0 1 .07 1.24v9.34H36.5V5h2.03l.3.01c.1 0 .17.02.24.05.07.03.13.07.19.13a1 1 0 0 1 .17.24l4.33 8.03a16.97 16.97 0 0 1 .6 1.36 14.34 14.34 0 0 1 .6-1.38l4.28-8.01c.05-.1.1-.18.17-.24.06-.06.12-.1.19-.13a.9.9 0 0 1 .24-.05l.3-.01h2.04Zm8.88 13.73a4.5 4.5 0 0 0 1.82-.35 3.96 3.96 0 0 0 2.22-2.47c.2-.57.3-1.19.3-1.85V5.31h1.02v8.75c0 .78-.12 1.51-.37 2.19a4.88 4.88 0 0 1-2.76 2.95c-.66.29-1.4.43-2.23.43-.82 0-1.57-.14-2.24-.43a5.01 5.01 0 0 1-2.75-2.95 6.37 6.37 0 0 1-.37-2.19V5.31h1.03v8.74c0 .66.1 1.28.3 1.85a3.98 3.98 0 0 0 2.21 2.47c.53.24 1.14.36 1.82.36Zm10.38.73h-1.03V5.31h1.03v14.15Z"})}),An=()=>Nt("svg",{viewBox:"0 0 85 38",fill:"currentColor",children:[Nt("path",{d:"M11.12 10.48c.36.28.8.43 1.26.43h.05c.48 0 .96-.19 1.25-.44 1.5-1.28 5.88-5.29 5.88-5.29 1.17-1.09-2.1-2.17-7.13-2.18h-.06c-5.04 0-8.3 1.1-7.13 2.18 0 0 4.37 4 5.88 5.3Zm2.56 2.16c-.36.28-.8.44-1.26.45h-.04c-.46 0-.9-.17-1.26-.45-1.04-.88-4.74-4.22-6.12-5.5v1.94c0 .21.08.5.22.63l.07.06c1.05.96 4.55 4.16 5.83 5.25.36.28.8.43 1.26.44h.04c.49-.02.96-.2 1.26-.44 1.3-1.11 4.94-4.45 5.88-5.31.15-.14.23-.42.23-.63V7.15a455.13 455.13 0 0 1-6.11 5.5Zm-1.26 4.99c.46 0 .9-.16 1.26-.44 2.05-1.82 4.09-3.65 6.1-5.5v1.94c0 .2-.07.48-.22.62-.94.87-4.57 4.2-5.88 5.3-.3.26-.77.44-1.26.45h-.04c-.46 0-.9-.16-1.26-.44-1.2-1.02-4.38-3.92-5.62-5.06l-.28-.25c-.14-.14-.22-.42-.22-.62v-1.94c1.38 1.26 5.08 4.6 6.12 5.5.36.28.8.43 1.26.44h.04ZM40 5l-5.84 14.46h-2.43L25.89 5h2.16a.9.9 0 0 1 .9.61l3.41 8.82a18.8 18.8 0 0 1 .62 2.02 19.44 19.44 0 0 1 .57-2.02l3.39-8.82c.05-.15.16-.3.31-.42a.9.9 0 0 1 .58-.19H40Zm17.18 0v14.46H54.8v-9.34c0-.37.02-.78.06-1.21l-4.37 8.21c-.21.4-.53.59-.95.59h-.38c-.43 0-.75-.2-.95-.59L43.8 8.88a22.96 22.96 0 0 1 .07 1.24v9.34H41.5V5h2.03l.3.01c.1 0 .17.02.24.05.07.03.13.07.19.13a1 1 0 0 1 .17.24l4.33 8.03a16.97 16.97 0 0 1 .6 1.36 14.34 14.34 0 0 1 .6-1.38l4.28-8.01c.05-.1.1-.18.17-.24.06-.06.12-.1.19-.13a.9.9 0 0 1 .24-.05l.3-.01h2.04Zm8.88 13.73a4.5 4.5 0 0 0 1.82-.35 3.96 3.96 0 0 0 2.22-2.47c.2-.57.3-1.19.3-1.85V5.31h1.02v8.75c0 .78-.12 1.51-.37 2.19a4.88 4.88 0 0 1-2.76 2.95c-.66.29-1.4.43-2.23.43-.82 0-1.57-.14-2.24-.43a5.01 5.01 0 0 1-2.75-2.95 6.37 6.37 0 0 1-.37-2.19V5.31h1.03v8.74c0 .66.1 1.28.3 1.85a3.98 3.98 0 0 0 2.21 2.47c.53.24 1.14.36 1.82.36Zm10.38.73h-1.03V5.31h1.03v14.15ZM1.73 36v-5.17l-.67-.07a.6.6 0 0 1-.21-.1.23.23 0 0 1-.08-.18v-.44h.96v-.59c0-.34.05-.65.14-.92a1.79 1.79 0 0 1 1.08-1.11 2.45 2.45 0 0 1 1.62-.02l-.03.53c0 .1-.06.15-.16.16H4c-.18 0-.35.03-.5.08a.95.95 0 0 0-.39.23c-.1.11-.19.25-.25.43-.05.18-.08.4-.08.65v.56h1.75v.78H2.8V36H1.73Zm6.17-6.17c.45 0 .85.07 1.2.22a2.57 2.57 0 0 1 1.5 1.62c.13.38.2.81.2 1.29s-.07.91-.2 1.3a2.57 2.57 0 0 1-1.49 1.61c-.36.14-.76.21-1.2.21-.45 0-.86-.07-1.22-.21a2.57 2.57 0 0 1-1.5-1.62c-.12-.38-.19-.81-.19-1.3 0-.47.07-.9.2-1.28a2.57 2.57 0 0 1 1.5-1.62c.35-.15.76-.22 1.2-.22Zm0 5.42c.6 0 1.05-.2 1.35-.6.3-.4.44-.97.44-1.69s-.15-1.28-.44-1.69c-.3-.4-.75-.6-1.35-.6-.3 0-.57.05-.8.15-.22.1-.4.26-.56.45-.15.2-.26.44-.33.73-.08.28-.11.6-.11.96 0 .72.15 1.29.44 1.69.3.4.76.6 1.36.6Zm5.26-4.11c.2-.42.43-.74.71-.97.28-.24.62-.36 1.03-.36.13 0 .25.02.36.05.12.02.23.07.32.13l-.08.8c-.02.1-.08.15-.18.15l-.24-.04a1.7 1.7 0 0 0-.88.05c-.15.05-.29.14-.4.25-.12.1-.23.24-.32.4-.1.17-.18.35-.26.56V36h-1.07v-6.08h.61c.12 0 .2.02.24.07.05.04.08.12.1.23l.06.92Zm13.73-3.82L23.39 36h-1.46l-3.5-8.68h1.29a.54.54 0 0 1 .54.37l2.04 5.3a11.31 11.31 0 0 1 .37 1.21 11.65 11.65 0 0 1 .35-1.22l2.03-5.29c.03-.1.1-.18.19-.25.1-.08.21-.12.35-.12h1.3Zm2.2 2.52V36H27.6v-6.16h1.49Zm.2-1.79c0 .13-.02.25-.08.36a1 1 0 0 1-.51.5.96.96 0 0 1-.73 0 1.02 1.02 0 0 1-.5-.5.96.96 0 0 1 0-.73.93.93 0 0 1 .86-.58.9.9 0 0 1 .37.08c.12.05.22.11.3.2a.94.94 0 0 1 .3.67Zm5.72 3.1a.68.68 0 0 1-.13.13c-.04.03-.1.05-.18.05a.42.42 0 0 1-.22-.07 3.95 3.95 0 0 0-.62-.31c-.14-.05-.3-.07-.51-.07-.26 0-.5.04-.69.14-.2.1-.36.23-.49.4-.13.18-.22.4-.29.64-.06.25-.1.53-.1.85 0 .33.04.62.1.88.08.25.18.47.32.64.13.18.29.3.48.4.18.09.4.13.63.13a1.6 1.6 0 0 0 .94-.27l.26-.2a.4.4 0 0 1 .25-.09.3.3 0 0 1 .27.14l.43.54a2.76 2.76 0 0 1-1.77.96c-.22.03-.43.05-.65.05a2.57 2.57 0 0 1-1.96-.83c-.25-.28-.45-.6-.6-1-.14-.4-.21-.85-.21-1.35 0-.45.06-.87.2-1.25a2.61 2.61 0 0 1 1.51-1.67c.37-.16.8-.24 1.28-.24.46 0 .86.07 1.2.22.35.15.66.36.94.64l-.4.54Zm3.43 4.95c-.54 0-.95-.15-1.24-.45-.28-.3-.42-.73-.42-1.26v-3.44h-.63a.29.29 0 0 1-.2-.07c-.06-.06-.09-.13-.09-.24v-.59l.99-.16.31-1.68a.33.33 0 0 1 .12-.18.34.34 0 0 1 .21-.07h.77v1.94h1.64v1.05h-1.64v3.34c0 .2.05.34.14.45.1.1.22.16.39.16a.73.73 0 0 0 .39-.1l.12-.07a.2.2 0 0 1 .11-.03c.05 0 .08.01.11.03l.09.1.44.72c-.21.18-.46.32-.74.4-.28.1-.57.15-.87.15Zm5.09-6.35c.46 0 .87.07 1.24.22a2.7 2.7 0 0 1 1.58 1.63c.14.39.22.83.22 1.31 0 .49-.08.93-.22 1.32-.14.4-.35.73-.62 1-.26.28-.58.49-.96.64-.37.15-.78.22-1.24.22a3.4 3.4 0 0 1-1.25-.22 2.71 2.71 0 0 1-1.59-1.64 3.8 3.8 0 0 1-.21-1.32c0-.48.07-.92.21-1.31a2.75 2.75 0 0 1 1.58-1.63c.38-.15.8-.22 1.26-.22Zm0 5.2c.51 0 .89-.17 1.13-.52.25-.34.38-.84.38-1.5a2.6 2.6 0 0 0-.38-1.53c-.24-.34-.62-.52-1.13-.52-.52 0-.9.18-1.16.53-.25.35-.37.85-.37 1.51s.12 1.17.37 1.51c.25.35.64.52 1.16.52Zm5.56-4.04c.2-.37.42-.65.69-.86.26-.21.57-.32.94-.32.28 0 .5.06.68.19l-.1 1.1a.3.3 0 0 1-.09.16.24.24 0 0 1-.15.04 1.8 1.8 0 0 1-.27-.03 2.01 2.01 0 0 0-.34-.03c-.16 0-.3.03-.44.08a1.1 1.1 0 0 0-.34.2c-.1.1-.2.2-.27.33-.08.13-.15.27-.22.44V36H47.7v-6.16h.87c.15 0 .26.03.31.09.06.05.1.15.13.29l.09.7Zm4.62-1.07V36h-1.49v-6.16h1.49Zm.2-1.79c0 .13-.02.25-.07.36a1 1 0 0 1-.51.5.96.96 0 0 1-.74 0 1.02 1.02 0 0 1-.5-.5.96.96 0 0 1 0-.73.93.93 0 0 1 .86-.58.9.9 0 0 1 .38.08c.11.05.21.11.3.2a.94.94 0 0 1 .28.67Zm4.56 5.32a7.8 7.8 0 0 0-1.08.12c-.29.05-.52.12-.7.2a.92.92 0 0 0-.38.3.64.64 0 0 0-.11.36c0 .26.07.45.23.56.15.11.35.17.6.17.3 0 .57-.06.79-.17.22-.1.44-.28.65-.5v-1.04Zm-3.4-2.67c.71-.65 1.57-.97 2.56-.97.36 0 .68.06.97.18a1.99 1.99 0 0 1 1.16 1.24c.1.3.16.61.16.96V36h-.67a.7.7 0 0 1-.33-.06c-.07-.04-.13-.13-.18-.26l-.13-.44c-.16.14-.3.26-.46.37a2.8 2.8 0 0 1-.97.43 2.77 2.77 0 0 1-1.32-.05 1.62 1.62 0 0 1-.57-.31 1.41 1.41 0 0 1-.38-.53 1.85 1.85 0 0 1-.05-1.18c.05-.16.14-.3.25-.45.12-.14.28-.27.46-.4a3 3 0 0 1 .7-.32 9.19 9.19 0 0 1 2.2-.33v-.36c0-.41-.09-.71-.26-.91-.18-.2-.43-.3-.76-.3a1.84 1.84 0 0 0-1.02.28l-.33.18c-.1.06-.2.09-.32.09-.1 0-.2-.03-.27-.08a.72.72 0 0 1-.17-.2l-.26-.47Zm11.49 4.32V36h-4.88v-8.6h1.16v7.62h3.72Zm3.16-5.2c.44 0 .84.08 1.2.23a2.57 2.57 0 0 1 1.49 1.62c.13.38.2.81.2 1.29s-.07.91-.2 1.3a2.57 2.57 0 0 1-1.49 1.61c-.36.14-.76.21-1.2.21-.45 0-.85-.07-1.21-.21a2.57 2.57 0 0 1-1.5-1.62c-.13-.38-.2-.81-.2-1.3 0-.47.07-.9.2-1.28.14-.39.33-.72.59-1 .25-.26.55-.47.9-.62.37-.15.77-.22 1.22-.22Zm0 5.43c.6 0 1.05-.2 1.34-.6.3-.4.45-.97.45-1.69s-.15-1.28-.45-1.69c-.3-.4-.74-.6-1.34-.6-.3 0-.57.05-.8.15-.22.1-.4.26-.56.45-.15.2-.26.44-.34.73-.07.28-.1.6-.1.96 0 .72.14 1.29.44 1.69.3.4.75.6 1.36.6Zm6.33-2.22c.22 0 .4-.03.57-.09.16-.06.3-.14.41-.25.12-.11.2-.24.26-.39.05-.15.08-.31.08-.5 0-.37-.11-.66-.34-.88-.23-.22-.55-.33-.98-.33-.43 0-.76.1-.99.33-.22.22-.34.51-.34.89 0 .18.03.34.09.5a1.1 1.1 0 0 0 .67.63c.16.06.35.09.57.09Zm1.93 3.3a.51.51 0 0 0-.13-.36.84.84 0 0 0-.34-.22 8.57 8.57 0 0 0-1.73-.2 7.5 7.5 0 0 1-.62-.05c-.23.1-.41.23-.56.4a.8.8 0 0 0-.1.92c.07.12.18.22.32.3.14.1.32.16.54.21a3.5 3.5 0 0 0 1.55 0c.23-.05.42-.12.57-.22.16-.1.29-.21.37-.34a.8.8 0 0 0 .13-.44Zm1.08-6.17v.4c0 .13-.08.21-.25.25l-.69.09c.14.26.2.56.2.88a1.86 1.86 0 0 1-1.36 1.82 3.07 3.07 0 0 1-1.72.04c-.12.08-.22.16-.29.25a.44.44 0 0 0-.1.27c0 .15.06.26.17.33.12.08.28.13.47.16a5 5 0 0 0 .66.06 16.56 16.56 0 0 1 1.5.13c.26.05.48.12.67.22.19.1.34.24.46.41.12.18.18.4.18.69 0 .26-.07.5-.2.75s-.31.46-.56.65c-.24.2-.54.34-.9.46a4.57 4.57 0 0 1-2.36.04c-.33-.09-.6-.2-.82-.36a1.56 1.56 0 0 1-.5-.51c-.1-.2-.16-.4-.16-.6 0-.3.1-.56.28-.77.19-.2.45-.37.77-.5a1.15 1.15 0 0 1-.43-.32.88.88 0 0 1-.15-.54c0-.09.01-.18.04-.27.04-.1.08-.2.15-.28a1.55 1.55 0 0 1 .58-.5c-.3-.16-.53-.39-.7-.66-.17-.28-.25-.6-.25-.97 0-.3.05-.57.16-.8.12-.25.28-.46.48-.63.2-.17.45-.3.73-.4a3 3 0 0 1 2.3.21h1.64Zm4.65.76a.24.24 0 0 1-.23.14.42.42 0 0 1-.2-.07 3.59 3.59 0 0 0-.67-.3 1.8 1.8 0 0 0-1.03 0c-.14.05-.27.11-.37.2a.87.87 0 0 0-.23.27.75.75 0 0 0-.08.35c0 .15.04.28.13.39.1.1.21.19.36.27.15.07.32.14.5.2a13.63 13.63 0 0 1 1.16.4c.2.08.36.18.5.3a1.33 1.33 0 0 1 .5 1.07 2 2 0 0 1-.15.78c-.1.24-.25.44-.45.62-.2.17-.43.3-.72.4a3.1 3.1 0 0 1-2.14-.05 2.97 2.97 0 0 1-.87-.53l.25-.41c.04-.05.07-.1.12-.12a.3.3 0 0 1 .17-.04.4.4 0 0 1 .22.08l.3.19a1.91 1.91 0 0 0 1.03.27c.2 0 .38-.03.54-.08.16-.06.29-.13.4-.22a.96.96 0 0 0 .3-.7c0-.17-.05-.31-.14-.42-.09-.11-.2-.2-.36-.28a2.6 2.6 0 0 0-.5-.2l-.59-.19c-.2-.06-.39-.14-.58-.22a2.14 2.14 0 0 1-.5-.3 1.45 1.45 0 0 1-.36-.46c-.1-.19-.14-.41-.14-.67a1.6 1.6 0 0 1 .57-1.23c.18-.16.4-.3.68-.39.26-.1.57-.14.91-.14a2.84 2.84 0 0 1 1.9.7l-.23.4Z"}),Nt("defs",{children:Nt("path",{d:"M0 0h85v38H0z"})})]}),Mn=()=>Nt("svg",{viewBox:"0 0 85 38",fill:"currentColor",children:Nt("path",{d:"M11.118 10.476c.36.28.801.433 1.257.436h.052c.48-.007.961-.192 1.25-.444 1.509-1.279 5.88-5.287 5.88-5.287 1.168-1.087-2.093-2.174-7.13-2.181h-.06c-5.036.007-8.298 1.094-7.13 2.181 0 0 4.372 4.008 5.88 5.295zm2.559 2.166c-.359.283-.801.439-1.258.444h-.044a2.071 2.071 0 0 1-1.257-.444C10.082 11.755 6.384 8.42 5 7.148v1.93c0 .215.081.496.222.629l.07.064c1.045.955 4.546 4.154 5.825 5.245.358.283.8.438 1.257.444h.044c.489-.015.962-.2 1.258-.444 1.309-1.11 4.948-4.444 5.887-5.31.148-.132.222-.413.222-.628v-1.93a455.127 455.127 0 0 1-6.11 5.494zm-1.258 4.984a2.071 2.071 0 0 0 1.258-.436c2.053-1.815 4.09-3.65 6.11-5.502v1.938c0 .207-.075.488-.223.621-.94.873-4.578 4.2-5.887 5.31-.296.25-.77.436-1.258.443h-.044a2.071 2.071 0 0 1-1.257-.436c-1.204-1.027-4.376-3.928-5.616-5.062l-.28-.255c-.14-.133-.221-.414-.221-.621v-1.938c1.383 1.265 5.081 4.607 6.117 5.495.358.282.8.438 1.257.443h.044zM40 5l-5.84 14.46h-2.43L25.89 5h2.16c.233 0 .423.057.57.17.146.113.256.26.33.44l3.41 8.82c.113.287.22.603.32.95.106.34.206.697.3 1.07.08-.373.166-.73.26-1.07a8.84 8.84 0 0 1 .31-.95l3.39-8.82a.959.959 0 0 1 .31-.42.906.906 0 0 1 .58-.19H40zm17.176 0v14.46h-2.37v-9.34c0-.373.02-.777.06-1.21l-4.37 8.21c-.206.393-.523.59-.95.59h-.38c-.426 0-.743-.197-.95-.59l-4.42-8.24c.02.22.037.437.05.65.014.213.02.41.02.59v9.34h-2.37V5h2.03c.12 0 .224.003.31.01a.778.778 0 0 1 .23.05c.074.027.137.07.19.13.06.06.117.14.17.24l4.33 8.03c.114.213.217.433.31.66.1.227.197.46.29.7.094-.247.19-.483.29-.71.1-.233.207-.457.32-.67l4.27-8.01c.054-.1.11-.18.17-.24a.57.57 0 0 1 .19-.13.903.903 0 0 1 .24-.05c.087-.007.19-.01.31-.01h2.03zm8.887 13.73c.68 0 1.286-.117 1.82-.35.54-.24.996-.57 1.37-.99a4.28 4.28 0 0 0 .85-1.48c.2-.573.3-1.19.3-1.85V5.31h1.02v8.75c0 .78-.124 1.51-.37 2.19a5.248 5.248 0 0 1-1.07 1.77c-.46.5-1.024.893-1.69 1.18-.66.287-1.404.43-2.23.43-.827 0-1.574-.143-2.24-.43a5.012 5.012 0 0 1-1.69-1.18 5.33 5.33 0 0 1-1.06-1.77 6.373 6.373 0 0 1-.37-2.19V5.31h1.03v8.74c0 .66.096 1.277.29 1.85.2.567.483 1.06.85 1.48.373.42.826.75 1.36.99.54.24 1.15.36 1.83.36zm10.38.73h-1.03V5.31h1.03v14.15zM4.242 35v-5.166l-.672-.078a.595.595 0 0 1-.21-.09.23.23 0 0 1-.078-.186v-.438h.96v-.588c0-.348.048-.656.144-.924.1-.272.24-.5.42-.684a1.79 1.79 0 0 1 .66-.426c.256-.096.544-.144.864-.144.272 0 .522.04.75.12l-.024.534c-.008.096-.062.148-.162.156a4.947 4.947 0 0 1-.39.012c-.184 0-.352.024-.504.072a.949.949 0 0 0-.384.234c-.108.108-.192.25-.252.426a2.184 2.184 0 0 0-.084.654v.558h1.752v.774H5.316V35H4.242zM10.416 28.826a3.1 3.1 0 0 1 1.2.222c.356.148.66.358.912.63s.444.602.576.99c.136.384.204.814.204 1.29 0 .48-.068.912-.204 1.296a2.735 2.735 0 0 1-.576.984 2.572 2.572 0 0 1-.912.63 3.175 3.175 0 0 1-1.2.216c-.448 0-.852-.072-1.212-.216a2.572 2.572 0 0 1-.912-.63 2.805 2.805 0 0 1-.582-.984 3.972 3.972 0 0 1-.198-1.296c0-.476.066-.906.198-1.29.136-.388.33-.718.582-.99.252-.272.556-.482.912-.63.36-.148.764-.222 1.212-.222zm0 5.424c.6 0 1.048-.2 1.344-.6.296-.404.444-.966.444-1.686 0-.724-.148-1.288-.444-1.692-.296-.404-.744-.606-1.344-.606-.304 0-.57.052-.798.156a1.507 1.507 0 0 0-.564.45c-.148.196-.26.438-.336.726a3.941 3.941 0 0 0-.108.966c0 .72.148 1.282.444 1.686.3.4.754.6 1.362.6zM15.677 30.14c.192-.416.428-.74.708-.972.28-.236.622-.354 1.026-.354.128 0 .25.014.366.042.12.028.226.072.318.132l-.078.798c-.024.1-.084.15-.18.15-.056 0-.138-.012-.246-.036a1.694 1.694 0 0 0-.366-.036c-.192 0-.364.028-.516.084-.148.056-.282.14-.402.252a1.782 1.782 0 0 0-.318.408c-.092.16-.176.344-.252.552V35h-1.074v-6.078h.612c.116 0 .196.022.24.066.044.044.074.12.09.228l.072.924zM26.761 28.922 24.283 35h-.96l-2.478-6.078h.87a.33.33 0 0 1 .33.222l1.542 3.912c.048.148.09.292.126.432.036.14.07.28.102.42.032-.14.066-.28.102-.42.036-.14.08-.284.132-.432l1.56-3.912a.33.33 0 0 1 .12-.156.311.311 0 0 1 .198-.066h.834zM27.74 35v-6.078h.643c.152 0 .246.074.282.222l.078.624c.224-.276.476-.502.756-.678.28-.176.604-.264.972-.264.408 0 .738.114.99.342.256.228.44.536.552.924.088-.22.2-.41.336-.57a1.987 1.987 0 0 1 1.014-.624c.196-.048.394-.072.594-.072.32 0 .604.052.852.156.252.1.464.248.636.444.176.196.31.438.402.726.092.284.138.61.138.978V35H34.91v-3.87c0-.476-.104-.836-.312-1.08-.208-.248-.508-.372-.9-.372-.176 0-.344.032-.504.096-.156.06-.294.15-.414.27-.12.12-.216.272-.288.456-.068.18-.102.39-.102.63V35h-1.074v-3.87c0-.488-.098-.852-.294-1.092-.196-.24-.482-.36-.858-.36-.264 0-.508.072-.732.216a2.38 2.38 0 0 0-.618.576V35H27.74zM40.746 32.372c-.428.02-.788.058-1.08.114-.292.052-.526.12-.702.204a.923.923 0 0 0-.378.294.639.639 0 0 0-.114.366c0 .26.076.446.228.558.156.112.358.168.606.168.304 0 .566-.054.786-.162.224-.112.442-.28.654-.504v-1.038zm-3.396-2.67c.708-.648 1.56-.972 2.556-.972.36 0 .682.06.966.18.284.116.524.28.72.492.196.208.344.458.444.75.104.292.156.612.156.96V35h-.672a.708.708 0 0 1-.324-.06c-.076-.044-.136-.13-.18-.258l-.132-.444c-.156.14-.308.264-.456.372a2.804 2.804 0 0 1-.462.264c-.16.072-.332.126-.516.162-.18.04-.38.06-.6.06-.26 0-.5-.034-.72-.102a1.618 1.618 0 0 1-.57-.318 1.414 1.414 0 0 1-.372-.522 1.852 1.852 0 0 1-.132-.726 1.419 1.419 0 0 1 .33-.906c.12-.14.274-.272.462-.396s.418-.232.69-.324c.276-.092.596-.166.96-.222.364-.06.78-.096 1.248-.108v-.36c0-.412-.088-.716-.264-.912-.176-.2-.43-.3-.762-.3-.24 0-.44.028-.6.084-.156.056-.294.12-.414.192l-.33.186a.631.631 0 0 1-.324.084.439.439 0 0 1-.264-.078.716.716 0 0 1-.174-.192l-.264-.474zM44.974 29.6c.124-.124.254-.238.39-.342a2.395 2.395 0 0 1 .936-.444c.176-.044.368-.066.576-.066.336 0 .634.058.894.174.26.112.476.272.648.48.176.204.308.45.396.738.092.284.138.598.138.942V35H47.47v-3.918c0-.376-.086-.666-.258-.87-.172-.208-.434-.312-.786-.312-.256 0-.496.058-.72.174a2.58 2.58 0 0 0-.636.474V35h-1.482v-6.156h.906c.192 0 .318.09.378.27l.102.486zM53.085 28.748c.456 0 .87.074 1.242.222a2.692 2.692 0 0 1 1.578 1.626c.144.392.216.83.216 1.314 0 .488-.072.928-.216 1.32-.144.392-.35.726-.618 1.002a2.653 2.653 0 0 1-.96.636 3.333 3.333 0 0 1-1.242.222c-.46 0-.878-.074-1.254-.222a2.712 2.712 0 0 1-.966-.636 2.922 2.922 0 0 1-.618-1.002 3.807 3.807 0 0 1-.216-1.32c0-.484.072-.922.216-1.314.148-.392.354-.724.618-.996.268-.272.59-.482.966-.63a3.397 3.397 0 0 1 1.254-.222zm0 5.202c.512 0 .89-.172 1.134-.516.248-.344.372-.848.372-1.512s-.124-1.17-.372-1.518c-.244-.348-.622-.522-1.134-.522-.52 0-.906.176-1.158.528-.248.348-.372.852-.372 1.512s.124 1.164.372 1.512c.252.344.638.516 1.158.516zM57.252 35v-6.156h.906c.192 0 .318.09.378.27l.096.456c.108-.12.22-.23.336-.33a2.017 2.017 0 0 1 1.32-.492c.388 0 .706.106.954.318.252.208.44.486.564.834a1.93 1.93 0 0 1 .834-.882c.172-.092.354-.16.546-.204.196-.044.392-.066.588-.066.34 0 .642.052.906.156.264.104.486.256.666.456.18.2.316.444.408.732.096.288.144.618.144.99V35h-1.482v-3.918c0-.392-.086-.686-.258-.882-.172-.2-.424-.3-.756-.3-.152 0-.294.026-.426.078a1.026 1.026 0 0 0-.342.228 1.019 1.019 0 0 0-.228.366 1.435 1.435 0 0 0-.084.51V35h-1.488v-3.918c0-.412-.084-.712-.252-.9-.164-.188-.406-.282-.726-.282-.216 0-.418.054-.606.162a1.979 1.979 0 0 0-.516.432V35h-1.482zM70.558 32.372c-.428.02-.788.058-1.08.114-.292.052-.526.12-.702.204a.923.923 0 0 0-.378.294.639.639 0 0 0-.114.366c0 .26.076.446.228.558.156.112.358.168.606.168.304 0 .566-.054.786-.162.224-.112.442-.28.654-.504v-1.038zm-3.396-2.67c.708-.648 1.56-.972 2.556-.972.36 0 .682.06.966.18.284.116.524.28.72.492.196.208.344.458.444.75.104.292.156.612.156.96V35h-.672a.708.708 0 0 1-.324-.06c-.076-.044-.136-.13-.18-.258l-.132-.444c-.156.14-.308.264-.456.372a2.804 2.804 0 0 1-.462.264c-.16.072-.332.126-.516.162-.18.04-.38.06-.6.06-.26 0-.5-.034-.72-.102a1.618 1.618 0 0 1-.57-.318 1.414 1.414 0 0 1-.372-.522 1.852 1.852 0 0 1-.132-.726 1.419 1.419 0 0 1 .33-.906c.12-.14.274-.272.462-.396s.418-.232.69-.324c.276-.092.596-.166.96-.222.364-.06.78-.096 1.248-.108v-.36c0-.412-.088-.716-.264-.912-.176-.2-.43-.3-.762-.3-.24 0-.44.028-.6.084-.156.056-.294.12-.414.192l-.33.186a.631.631 0 0 1-.324.084.439.439 0 0 1-.264-.078.716.716 0 0 1-.174-.192l-.264-.474zM74.9 26.084V35h-1.482v-8.916H74.9zM81.969 28.844l-3.354 7.848a.538.538 0 0 1-.174.234c-.068.056-.174.084-.318.084h-1.104l1.152-2.472-2.49-5.694h1.302c.116 0 .206.028.27.084.068.056.118.12.15.192l1.308 3.192c.044.108.08.216.108.324.032.108.062.218.09.33a32.3 32.3 0 0 1 .108-.33c.036-.112.076-.222.12-.33l1.236-3.186a.437.437 0 0 1 .408-.276h1.188z"})}),Tn=()=>Nt("svg",{viewBox:"0 0 15 17",fill:"currentColor",children:Nt("path",{d:"M6.11767 7.47586C6.47736 7.75563 6.91931 7.90898 7.37503 7.91213H7.42681C7.90756 7.90474 8.38832 7.71987 8.67677 7.46846C10.1856 6.18921 14.5568 2.18138 14.5568 2.18138C15.7254 1.09438 12.4637 0.00739 7.42681 0H7.36764C2.3308 0.00739 -0.930935 1.09438 0.237669 2.18138C0.237669 2.18138 4.60884 6.18921 6.11767 7.47586ZM8.67677 9.64243C8.31803 9.92483 7.87599 10.0808 7.41941 10.0861H7.37503C6.91845 10.0808 6.47641 9.92483 6.11767 9.64243C5.0822 8.75513 1.38409 5.42018 0.000989555 4.14832V6.07829C0.000989555 6.29273 0.0823481 6.57372 0.222877 6.70682L0.293316 6.7712L0.293344 6.77122C1.33784 7.72579 4.83903 10.9255 6.11767 12.0161C6.47641 12.2985 6.91845 12.4545 7.37503 12.4597H7.41941C7.90756 12.4449 8.38092 12.2601 8.67677 12.0161C9.9859 10.9069 13.6249 7.57198 14.5642 6.70682C14.7121 6.57372 14.7861 6.29273 14.7861 6.07829V4.14832C12.7662 5.99804 10.7297 7.82949 8.67677 9.64243ZM7.41941 14.6263C7.87513 14.6232 8.31708 14.4698 8.67677 14.19C10.7298 12.3746 12.7663 10.5407 14.7861 8.68853V10.6259C14.7861 10.8329 14.7121 11.1139 14.5642 11.247C13.6249 12.1196 9.9859 15.4471 8.67677 16.5563C8.38092 16.8077 7.90756 16.9926 7.41941 17H7.37503C6.91931 16.9968 6.47736 16.8435 6.11767 16.5637C4.91427 15.5373 1.74219 12.6364 0.502294 11.5025C0.393358 11.4029 0.299337 11.3169 0.222877 11.247C0.0823481 11.1139 0.000989555 10.8329 0.000989555 10.6259V8.68853C1.38409 9.95303 5.0822 13.2953 6.11767 14.1827C6.47641 14.4651 6.91845 14.6211 7.37503 14.6263H7.41941Z"})}),$n=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})}),Ln=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}),Pn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"})}),In=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),On=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),Rn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),Dn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),zn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})}),Fn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})}),jn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"m7 10 5 5 5-5z"})}),Hn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[Nt("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),Nt("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),Un=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"})}),Vn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"m22 5.72-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39 6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})}),Bn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"})}),qn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M8 5v14l11-7z"})}),Yn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"m10 16.5 6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),Wn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"})}),Kn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5v11zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2zM3 19c0 1.1.9 2 2 2h3V10H3v9z"})}),Qn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"})}),Zn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),Gn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),Jn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M19 13H5v-2h14v2z"})}),Xn=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M8.9999 14.7854L18.8928 4.8925C19.0803 4.70497 19.3347 4.59961 19.5999 4.59961C19.8651 4.59961 20.1195 4.70497 20.307 4.8925L21.707 6.2925C22.0975 6.68303 22.0975 7.31619 21.707 7.70672L9.70701 19.7067C9.31648 20.0972 8.68332 20.0972 8.2928 19.7067L2.6928 14.1067C2.50526 13.9192 2.3999 13.6648 2.3999 13.3996C2.3999 13.1344 2.50526 12.88 2.6928 12.6925L4.0928 11.2925C4.48332 10.902 5.11648 10.902 5.50701 11.2925L8.9999 14.7854Z"})}),er=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),tr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})}),nr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"})}),rr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),ar=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"})}),ir=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"})}),or=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[Nt("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 5C19.89 4.65 18.67 4.5 17.5 4.5C15.55 4.5 13.45 4.9 12 6C10.55 4.9 8.45 4.5 6.5 4.5C5.33 4.5 4.11 4.65 3 5C2.25 5.25 1.6 5.55 1 6V20.6C1 20.85 1.25 21.1 1.5 21.1C1.6 21.1 1.65 21.1 1.75 21.05C3.15 20.3 4.85 20 6.5 20C8.2 20 10.65 20.65 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5ZM21 18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5C10.65 18.65 8.2 18 6.5 18C5.3 18 4.1 18.15 3 18.5V7C4.1 6.65 5.3 6.5 6.5 6.5C8.2 6.5 10.65 7.15 12 8C13.35 7.15 15.8 6.5 17.5 6.5C18.7 6.5 19.9 6.65 21 7V18.5Z"}),Nt("path",{d:"M17.5 10.5C18.38 10.5 19.23 10.59 20 10.76V9.24C19.21 9.09 18.36 9 17.5 9C15.8 9 14.26 9.29 13 9.83V11.49C14.13 10.85 15.7 10.5 17.5 10.5ZM13 12.49V14.15C14.13 13.51 15.7 13.16 17.5 13.16C18.38 13.16 19.23 13.25 20 13.42V11.9C19.21 11.75 18.36 11.66 17.5 11.66C15.8 11.66 14.26 11.96 13 12.49ZM17.5 14.33C15.8 14.33 14.26 14.62 13 15.16V16.82C14.13 16.18 15.7 15.83 17.5 15.83C18.38 15.83 19.23 15.92 20 16.09V14.57C19.21 14.41 18.36 14.33 17.5 14.33Z"}),Nt("path",{d:"M6.5 10.5C5.62 10.5 4.77 10.59 4 10.76V9.24C4.79 9.09 5.64 9 6.5 9C8.2 9 9.74 9.29 11 9.83V11.49C9.87 10.85 8.3 10.5 6.5 10.5ZM11 12.49V14.15C9.87 13.51 8.3 13.16 6.5 13.16C5.62 13.16 4.77 13.25 4 13.42V11.9C4.79 11.75 5.64 11.66 6.5 11.66C8.2 11.66 9.74 11.96 11 12.49ZM6.5 14.33C8.2 14.33 9.74 14.62 11 15.16V16.82C9.87 16.18 8.3 15.83 6.5 15.83C5.62 15.83 4.77 15.92 4 16.09V14.57C4.79 14.41 5.64 14.33 6.5 14.33Z"})]}),lr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"})}),sr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 6C9.79 6 8 7.79 8 10H10C10 8.9 10.9 8 12 8C13.1 8 14 8.9 14 10C14 10.8792 13.4202 11.3236 12.7704 11.8217C11.9421 12.4566 11 13.1787 11 15H13C13 13.9046 13.711 13.2833 14.4408 12.6455C15.21 11.9733 16 11.2829 16 10C16 7.79 14.21 6 12 6ZM13 16V18H11V16H13Z"})}),cr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M4 20h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2zm0-3h2v2H4v-2zM2 6c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2zm4 1H4V5h2v2zm-2 7h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2zm0-3h2v2H4v-2z"})}),ur=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),dr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"})}),hr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M7 20h4c0 1.1-.9 2-2 2s-2-.9-2-2zm-2-1h8v-2H5v2zm11.5-9.5c0 3.82-2.66 5.86-3.77 6.5H5.27c-1.11-.64-3.77-2.68-3.77-6.5C1.5 5.36 4.86 2 9 2s7.5 3.36 7.5 7.5zm4.87-2.13L20 8l1.37.63L22 10l.63-1.37L24 8l-1.37-.63L22 6l-.63 1.37zM19 6l.94-2.06L22 3l-2.06-.94L19 0l-.94 2.06L16 3l2.06.94L19 6z"})}),mr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"})}),pr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"})}),fr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),vr=()=>Nt("svg",{viewBox:"0 0 16 16",fill:gt("color-error"),children:Nt("path",{d:"M13.5095 4L8.50952 1H7.50952L2.50952 4L2.01953 4.85999V10.86L2.50952 11.71L7.50952 14.71H8.50952L13.5095 11.71L13.9995 10.86V4.85999L13.5095 4ZM7.50952 13.5601L3.00952 10.86V5.69995L7.50952 8.15002V13.5601ZM3.26953 4.69995L8.00952 1.85999L12.7495 4.69995L8.00952 7.29004L3.26953 4.69995ZM13.0095 10.86L8.50952 13.5601V8.15002L13.0095 5.69995V10.86Z"})}),gr=()=>Nt("svg",{viewBox:"0 0 16 16",fill:gt("color-primary"),children:Nt("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z"})}),yr=()=>Nt("svg",{viewBox:"0 0 16 16",fill:gt("color-warning"),children:Nt("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z"})}),_r=()=>Nt("svg",{viewBox:"0 0 16 16",fill:gt("color-primary"),children:Nt("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z"})}),br=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),wr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15z"})}),kr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10z"})}),Sr=()=>Nt("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Nt("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})}),xr=()=>Nt("svg",{viewBox:"0 0 24 24",children:Nt("path",{fill:"currentColor",d:"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z",children:Nt("animateTransform",{attributeName:"transform",dur:"0.75s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})})});var Cr=n(738),Er=n.n(Cr);const Nr=e=>{let{to:t,isNavLink:n,children:r,...a}=e;return n?Nt(Re,{to:t,...a,children:r}):Nt("div",{...a,children:r})},Ar=e=>{let{activeItem:t,item:n,color:r=gt("color-primary"),activeNavRef:a,onChange:i,isNavLink:o}=e;return Nt(Nr,{className:Er()({"vm-tabs-item":!0,"vm-tabs-item_active":t===n.value,[n.className||""]:n.className}),isNavLink:o,to:n.value,style:{color:r},onClick:(l=n.value,()=>{i&&i(l)}),ref:t===n.value?a:void 0,children:[n.icon&&Nt("div",{className:Er()({"vm-tabs-item__icon":!0,"vm-tabs-item__icon_single":!n.label}),children:n.icon}),n.label]});var l};const Mr=function(e,t,n,a){const i=(0,r.useRef)(t);(0,r.useEffect)((()=>{i.current=t}),[t]),(0,r.useEffect)((()=>{var t;const r=null!==(t=null===n||void 0===n?void 0:n.current)&&void 0!==t?t:window;if(!r||!r.addEventListener)return;const o=e=>i.current(e);return r.addEventListener(e,o,a),()=>{r.removeEventListener(e,o,a)}}),[e,n,a])},Tr=()=>{const[e,t]=(0,r.useState)({width:0,height:0}),n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return Mr("resize",n),(0,r.useEffect)(n,[]),e},$r=e=>{let{activeItem:t,items:n,color:a=gt("color-primary"),onChange:i,indicatorPlacement:o="bottom",isNavLink:l}=e;const s=Tr(),c=(0,r.useRef)(null),[u,d]=(0,r.useState)({left:0,width:0,bottom:0});return(0,r.useEffect)((()=>{var e;if((null===(e=c.current)||void 0===e?void 0:e.base)instanceof HTMLElement){const{offsetLeft:e,offsetWidth:t,offsetHeight:n}=c.current.base;d({left:e,width:t,bottom:"top"===o?n-2:0})}}),[s,t,c,n]),Nt("div",{className:"vm-tabs",children:[n.map((e=>Nt(Ar,{activeItem:t,item:e,onChange:i,color:a,activeNavRef:c,isNavLink:l},e.value))),Nt("div",{className:"vm-tabs__indicator",style:{...u,borderColor:a}})]})},Lr=[{value:mt.chart,icon:Nt(Wn,{}),label:"Graph",prometheusCode:0},{value:mt.code,icon:Nt(Qn,{}),label:"JSON",prometheusCode:3},{value:mt.table,icon:Nt(Kn,{}),label:"Table",prometheusCode:1}],Pr=e=>{let{tabFilter:t}=e;const{displayType:n}=Fr(),r=jr(),a=Lr.filter(null!==t&&void 0!==t?t:()=>!0);return Nt($r,{activeItem:n,items:a,onChange:e=>{var t;r({type:"SET_DISPLAY_TYPE",payload:null!==(t=e)&&void 0!==t?t:n})}})},Ir=()=>{const e=ut("g0.tab",0),t=Lr.find((t=>t.prometheusCode===+e||t.value===e));return(null===t||void 0===t?void 0:t.value)||mt.chart},Or=et("SERIES_LIMITS"),Rr={displayType:Ir(),nocache:!1,isTracingEnabled:!1,seriesLimits:Or?JSON.parse(Or):lt,tableCompact:et("TABLE_COMPACT")||!1,reduceMemUsage:!1};function Dr(e,t){switch(t.type){case"SET_DISPLAY_TYPE":return{...e,displayType:t.payload};case"SET_SERIES_LIMITS":return Xe("SERIES_LIMITS",JSON.stringify(t.payload)),{...e,seriesLimits:t.payload};case"TOGGLE_QUERY_TRACING":return{...e,isTracingEnabled:!e.isTracingEnabled};case"TOGGLE_NO_CACHE":return{...e,nocache:!e.nocache};case"TOGGLE_TABLE_COMPACT":return Xe("TABLE_COMPACT",!e.tableCompact),{...e,tableCompact:!e.tableCompact};case"TOGGLE_REDUCE_MEM_USAGE":return Xe("TABLE_COMPACT",!e.reduceMemUsage),{...e,reduceMemUsage:!e.reduceMemUsage};default:throw new Error}}const zr=(0,r.createContext)({}),Fr=()=>(0,r.useContext)(zr).state,jr=()=>(0,r.useContext)(zr).dispatch,Hr={customStep:ut("g0.step_input",""),yaxis:{limits:{enable:!1,range:{1:[0,0]}}},isHistogram:!1,spanGaps:!1};function Ur(e,t){switch(t.type){case"TOGGLE_ENABLE_YAXIS_LIMITS":return{...e,yaxis:{...e.yaxis,limits:{...e.yaxis.limits,enable:!e.yaxis.limits.enable}}};case"SET_CUSTOM_STEP":return{...e,customStep:t.payload};case"SET_YAXIS_LIMITS":return{...e,yaxis:{...e.yaxis,limits:{...e.yaxis.limits,range:t.payload}}};case"SET_IS_HISTOGRAM":return{...e,isHistogram:t.payload};case"SET_SPAN_GAPS":return{...e,spanGaps:t.payload};default:throw new Error}}const Vr=(0,r.createContext)({}),Br=()=>(0,r.useContext)(Vr).state,qr=()=>(0,r.useContext)(Vr).dispatch,Yr={dashboardsSettings:[],dashboardsLoading:!1,dashboardsError:""};function Wr(e,t){switch(t.type){case"SET_DASHBOARDS_SETTINGS":return{...e,dashboardsSettings:t.payload};case"SET_DASHBOARDS_LOADING":return{...e,dashboardsLoading:t.payload};case"SET_DASHBOARDS_ERROR":return{...e,dashboardsError:t.payload};default:throw new Error}}const Kr=(0,r.createContext)({}),Qr=()=>(0,r.useContext)(Kr).state,Zr={markdownParsing:"true"===et("LOGS_MARKDOWN")};function Gr(e,t){if("SET_MARKDOWN_PARSING"===t.type)return Xe("LOGS_MARKDOWN",`${t.payload}`),{...e,markdownParsing:t.payload};throw new Error}const Jr=(0,r.createContext)({}),Xr={windows:"Windows",mac:"Mac OS",linux:"Linux"},ea=()=>(Object.values(Xr).find((e=>navigator.userAgent.indexOf(e)>=0))||"unknown")===Xr.mac;function ta(){const e=Tr(),t=()=>{const e=["Android","webOS","iPhone","iPad","iPod","BlackBerry","Windows Phone"].map((e=>navigator.userAgent.match(new RegExp(e,"i")))).some((e=>e)),t=window.innerWidth<500;return e||t},[n,a]=(0,r.useState)(t());return(0,r.useEffect)((()=>{a(t())}),[e]),{isMobile:n}}const na={success:Nt(Dn,{}),error:Nt(Rn,{}),warning:Nt(On,{}),info:Nt(In,{})},ra=e=>{let{variant:t,children:n}=e;const{isDarkTheme:r}=Mt(),{isMobile:a}=ta();return Nt("div",{className:Er()({"vm-alert":!0,[`vm-alert_${t}`]:t,"vm-alert_dark":r,"vm-alert_mobile":a}),children:[Nt("div",{className:"vm-alert__icon",children:na[t||"info"]}),Nt("div",{className:"vm-alert__content",children:n})]})},aa=(0,r.createContext)({showInfoMessage:()=>{}}),ia=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>n=>{let{children:r}=n;return Nt(e,{children:Nt(t,{children:r})})}),(e=>{let{children:t}=e;return Nt(Ct.FK,{children:t})}))}(...[e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(xt,$t),i=(0,r.useMemo)((()=>({state:n,dispatch:a})),[n,a]);return Nt(At.Provider,{value:i,children:t})},e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(mn,hn),i=(0,r.useMemo)((()=>({state:n,dispatch:a})),[n,a]);return Nt(pn.Provider,{value:i,children:t})},e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(Sn,kn),i=(0,r.useMemo)((()=>({state:n,dispatch:a})),[n,a]);return Nt(xn.Provider,{value:i,children:t})},e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(Dr,Rr),i=(0,r.useMemo)((()=>({state:n,dispatch:a})),[n,a]);return Nt(zr.Provider,{value:i,children:t})},e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(Ur,Hr),i=(0,r.useMemo)((()=>({state:n,dispatch:a})),[n,a]);return Nt(Vr.Provider,{value:i,children:t})},e=>{let{children:t}=e;const{isMobile:n}=ta(),[a,i]=(0,r.useState)({text:"",type:"info"}),[o,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!s)return;i({...s,key:Date.now()}),l(!0);const e=setTimeout(u,s.timeout||4e3);return()=>clearTimeout(e)}),[s]);const u=()=>{c(null),l(!1)};return Nt(aa.Provider,{value:{showInfoMessage:c},children:[o&&Nt("div",{className:Er()({"vm-snackbar":!0,"vm-snackbar_mobile":n}),children:Nt(ra,{variant:a.type,children:Nt("div",{className:"vm-snackbar-content",children:[Nt("span",{children:a.text}),Nt("div",{className:"vm-snackbar-content__close",onClick:u,children:Nt(Ln,{})})]})})}),t]})},e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(Wr,Yr),i=(0,r.useMemo)((()=>({state:n,dispatch:a})),[n,a]);return Nt(Kr.Provider,{value:i,children:t})},e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(Gr,Zr),i=(0,r.useMemo)((()=>({state:n,dispatch:a})),[n,a]);return Nt(Jr.Provider,{value:i,children:t})}]);let oa=function(e){return e[e.internalLink=0]="internalLink",e[e.externalLink=1]="externalLink",e}({});const la=(e,t)=>({label:"Alerts",value:!!Je(e)?`${e}/vmalert`:e.replace(/\/prometheus$/,"/vmalert"),type:oa.externalLink,hide:!t}),sa=e=>[{value:We.trace},{value:We.queryAnalyzer},{value:We.withTemplate},{value:We.relabel},{value:We.downsamplingDebug,hide:!e},{value:We.retentionDebug,hide:!e}],ca=e=>{let{activeMenu:t,label:n,value:r,type:a,color:i}=e;return a===oa.externalLink?Nt("a",{className:Er()({"vm-header-nav-item":!0,"vm-header-nav-item_active":t===r}),style:{color:i},href:r,target:"_blank",rel:"noreferrer",children:n}):Nt(Re,{className:Er()({"vm-header-nav-item":!0,"vm-header-nav-item_active":t===r}),style:{color:i},to:r,children:n})},ua=(e,t,n)=>{const a=(0,r.useCallback)((r=>{const a=null===e||void 0===e?void 0:e.current,i=r.target,o=(null===n||void 0===n?void 0:n.current)&&n.current.contains(i);!a||a.contains((null===r||void 0===r?void 0:r.target)||null)||o||t(r)}),[e,t]);Mr("mousedown",a),Mr("touchstart",a)},da=e=>{let{variant:t="contained",color:n="primary",size:r="medium",ariaLabel:a,children:i,endIcon:o,startIcon:l,fullWidth:s=!1,className:c,disabled:u,onClick:d,onMouseDown:h}=e;return Nt("button",{className:Er()({"vm-button":!0,[`vm-button_${t}_${n}`]:!0,[`vm-button_${r}`]:r,"vm-button_icon":(l||o)&&!i,"vm-button_full-width":s,"vm-button_with-icon":l||o,"vm-button_disabled":u,[c||""]:c}),disabled:u,"aria-label":a,onClick:d,onMouseDown:h,children:Nt(Ct.FK,{children:[l&&Nt("span",{className:"vm-button__start-icon",children:l}),i&&Nt("span",{children:i}),o&&Nt("span",{className:"vm-button__end-icon",children:o})]})})},ha=e=>{let{children:t,buttonRef:n,placement:a="bottom-left",open:i=!1,onClose:o,offset:l={top:6,left:0},clickOutside:s=!0,fullWidth:c,title:u,disabledFullScreen:d,variant:h}=e;const{isMobile:m}=ta(),p=ie(),f=re(),[v,g]=(0,r.useState)({width:0,height:0}),[y,_]=(0,r.useState)(!1),b=(0,r.useRef)(null);(0,r.useEffect)((()=>(_(i),!i&&o&&o(),i&&m&&!d&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"})),[i]),(0,r.useEffect)((()=>{var e,t;g({width:(null===b||void 0===b||null===(e=b.current)||void 0===e?void 0:e.clientWidth)||0,height:(null===b||void 0===b||null===(t=b.current)||void 0===t?void 0:t.clientHeight)||0}),_(!1)}),[b]);const w=(0,r.useMemo)((()=>{const e=n.current;if(!e||!y)return{};const t=e.getBoundingClientRect(),r={top:0,left:0,width:"auto"},i="bottom-right"===a||"top-right"===a,o=null===a||void 0===a?void 0:a.includes("top"),s=(null===l||void 0===l?void 0:l.top)||0,u=(null===l||void 0===l?void 0:l.left)||0;r.left=r.left=t.left+u,r.top=t.height+t.top+s,i&&(r.left=t.right-v.width),o&&(r.top=t.top-v.height-s);const{innerWidth:d,innerHeight:h}=window,m=r.top+v.height+20>h,p=r.top-20<0,f=r.left+v.width+20>d,g=r.left-20<0;return m&&(r.top=t.top-v.height-s),p&&(r.top=t.height+t.top+s),f&&(r.left=t.right-v.width-u),g&&(r.left=t.left+u),c&&(r.width=`${t.width}px`),r.top<0&&(r.top=20),r.left<0&&(r.left=20),r}),[n,a,y,t,c]),k=()=>{_(!1),o()};(0,r.useEffect)((()=>{if(!b.current||!y||m&&!d)return;const{right:e,width:t}=b.current.getBoundingClientRect();if(e>window.innerWidth){const e=window.innerWidth-20-t;b.current.style.left=e<window.innerWidth?"0":`${e}px`}}),[y,b]);const S=(0,r.useCallback)((()=>{y&&m&&!d&&(p(f,{replace:!0}),o())}),[y,m,d,f,o]);return Mr("scroll",k),Mr("popstate",S),ua(b,(()=>{s&&k()}),n),Nt(Ct.FK,{children:(y||!v.width)&&r.default.createPortal(Nt("div",{className:Er()({"vm-popper":!0,[`vm-popper_${h}`]:h,"vm-popper_mobile":m&&!d,"vm-popper_open":(m||Object.keys(w).length)&&y}),ref:b,style:m&&!d?{}:w,children:[(u||m&&!d)&&Nt("div",{className:"vm-popper-header",children:[Nt("p",{className:"vm-popper-header__title",children:u}),Nt(da,{variant:"text",color:"dark"===h?"white":"primary",size:"small",onClick:e=>{e.stopPropagation(),o()},ariaLabel:"close",children:Nt(Ln,{})})]}),t]}),document.body)})},ma=e=>{const[t,n]=(0,r.useState)(!!e),a=(0,r.useCallback)((()=>n(!0)),[]),i=(0,r.useCallback)((()=>n(!1)),[]),o=(0,r.useCallback)((()=>n((e=>!e))),[]);return{value:t,setValue:n,setTrue:a,setFalse:i,toggle:o}},pa=e=>{let{activeMenu:t,label:n,color:a,background:i,submenu:o,direction:l}=e;const{pathname:s}=re(),[c,u]=(0,r.useState)(null),d=(0,r.useRef)(null),{value:h,setFalse:m,setTrue:p}=ma(!1),f=()=>{c&&clearTimeout(c);const e=setTimeout(m,300);u(e)};return(0,r.useEffect)((()=>{m()}),[s]),"column"===l?Nt(Ct.FK,{children:o.map((e=>Nt(ca,{activeMenu:t,value:e.value||"",label:e.label||"",type:e.type||oa.internalLink},e.value)))}):Nt("div",{className:Er()({"vm-header-nav-item":!0,"vm-header-nav-item_sub":!0,"vm-header-nav-item_open":h,"vm-header-nav-item_active":o.find((e=>e.value===t))}),style:{color:a},onMouseEnter:()=>{p(),c&&clearTimeout(c)},onMouseLeave:f,ref:d,children:[n,Nt(jn,{}),Nt(ha,{open:h,placement:"bottom-left",offset:{top:12,left:0},onClose:m,buttonRef:d,children:Nt("div",{className:"vm-header-nav-item-submenu",style:{background:i},onMouseLeave:f,onMouseEnter:()=>{c&&clearTimeout(c)},children:o.map((e=>Nt(ca,{activeMenu:t,value:e.value||"",label:e.label||"",color:a,type:e.type||oa.internalLink},e.value)))})})]})},fa=e=>e.filter((e=>!e.hide)).map((e=>{const t={...e};var n;t.value&&!t.label&&(t.label=(null===(n=Ye[t.value])||void 0===n?void 0:n.title)||(e=>{try{return e.replace(/^\/+/,"").replace(/-/g," ").trim().replace(/^\w/,(e=>e.toUpperCase()))}catch(Yp){return e}})(t.value));return t.submenu&&t.submenu.length>0&&(t.submenu=fa(t.submenu)),t})),va={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1}.REACT_APP_TYPE,ga=()=>{var e;const t=Qe(),{dashboardsSettings:n}=Qr(),{serverUrl:a,flags:i,appConfig:o}=Mt(),l="enterprise"===(null===(e=o.license)||void 0===e?void 0:e.type),s=Boolean(i["vmalert.proxyURL"]),c=Boolean(!t&&n.length),u=(0,r.useMemo)((()=>({serverUrl:a,isEnterpriseLicense:l,showAlertLink:s,showPredefinedDashboards:c})),[a,l,s,c]),d=(0,r.useMemo)((()=>{switch(va){case He.logs:return[{label:Ye[We.logs].title,value:We.home}];case He.anomaly:return[{label:Ye[We.anomaly].title,value:We.home}];default:return(e=>{let{serverUrl:t,isEnterpriseLicense:n,showPredefinedDashboards:r,showAlertLink:a}=e;return[{value:We.home},{value:We.rawQuery},{label:"Explore",submenu:[{value:We.metrics},{value:We.cardinality},{value:We.topQueries},{value:We.activeQueries}]},{label:"Tools",submenu:sa(n)},{value:We.dashboards,hide:!r},la(t,a)]})(u)}}),[u]);return fa(d)},ya=e=>{let{color:t,background:n,direction:a}=e;const{pathname:i}=re(),[o,l]=(0,r.useState)(i),s=ga();return(0,r.useEffect)((()=>{l(i)}),[i]),Nt("nav",{className:Er()({"vm-header-nav":!0,[`vm-header-nav_${a}`]:a}),children:s.map((e=>e.submenu?Nt(pa,{activeMenu:o,label:e.label||"",submenu:e.submenu,color:t,background:n,direction:a},e.label):Nt(ca,{activeMenu:o,value:e.value||"",label:e.label||"",color:t,type:e.type||oa.internalLink},e.value)))})},_a=e=>{let{title:t,children:n,onClose:a,className:i,isOpen:o=!0}=e;const{isMobile:l}=ta(),s=ie(),c=re(),u=(0,r.useCallback)((e=>{o&&"Escape"===e.key&&a()}),[o]),d=e=>{e.stopPropagation()},h=(0,r.useCallback)((()=>{o&&(s(c,{replace:!0}),a())}),[o,c,a]);return(0,r.useEffect)((()=>{if(o)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}}),[o]),Mr("popstate",h),Mr("keyup",u),r.default.createPortal(Nt("div",{className:Er()({"vm-modal":!0,"vm-modal_mobile":l,[`${i}`]:i}),onMouseDown:a,children:Nt("div",{className:"vm-modal-content",children:[Nt("div",{className:"vm-modal-content-header",onMouseDown:d,children:[t&&Nt("div",{className:"vm-modal-content-header__title",children:t}),Nt("div",{className:"vm-modal-header__close",children:Nt(da,{variant:"text",size:"small",onClick:a,ariaLabel:"close",children:Nt(Ln,{})})})]}),Nt("div",{className:"vm-modal-content-body",onMouseDown:d,tabIndex:0,children:n})]})}),document.body)},ba=e=>{let{children:t,title:n,open:a,placement:i="bottom-center",offset:o={top:6,left:0}}=e;const{isMobile:l}=ta(),[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)({width:0,height:0}),h=(0,r.useRef)(null),m=(0,r.useRef)(null),p=()=>c(!1);(0,r.useEffect)((()=>{if(m.current&&s)return d({width:m.current.clientWidth,height:m.current.clientHeight}),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}}),[s,n]);const f=(0,r.useMemo)((()=>{var e;const t=null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.base;if(!t||!s)return{};const n=t.getBoundingClientRect(),r={top:0,left:0},a="bottom-right"===i||"top-right"===i,l="bottom-left"===i||"top-left"===i,c=null===i||void 0===i?void 0:i.includes("top"),d=(null===o||void 0===o?void 0:o.top)||0,m=(null===o||void 0===o?void 0:o.left)||0;r.left=n.left-(u.width-n.width)/2+m,r.top=n.height+n.top+d,a&&(r.left=n.right-u.width),l&&(r.left=n.left+m),c&&(r.top=n.top-u.height-d);const{innerWidth:p,innerHeight:f}=window,v=r.top+u.height+20>f,g=r.top-20<0,y=r.left+u.width+20>p,_=r.left-20<0;return v&&(r.top=n.top-u.height-d),g&&(r.top=n.height+n.top+d),y&&(r.left=n.right-u.width-m),_&&(r.left=n.left+m),r.top<0&&(r.top=20),r.left<0&&(r.left=20),r}),[h,i,s,u]),v=()=>{"boolean"!==typeof a&&c(!0)},g=()=>{c(!1)};return(0,r.useEffect)((()=>{"boolean"===typeof a&&c(a)}),[a]),(0,r.useEffect)((()=>{var e;const t=null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.base;if(t)return t.addEventListener("mouseenter",v),t.addEventListener("mouseleave",g),()=>{t.removeEventListener("mouseenter",v),t.removeEventListener("mouseleave",g)}}),[h]),Nt(Ct.FK,{children:[Nt(r.Fragment,{ref:h,children:t}),!l&&s&&r.default.createPortal(Nt("div",{className:"vm-tooltip",ref:m,style:f,children:n}),document.body)]})},wa=Nt("code",{children:ea()?"Cmd":"Ctrl"}),ka=[{title:"Zoom in",description:Nt(Ct.FK,{children:["To zoom in, hold down the ",wa," + ",Nt("code",{children:"scroll up"}),", or press the ",Nt("code",{children:"+"}),". Also, you can zoom in on a range on the graph by holding down your mouse button and selecting the range."]})},{title:"Zoom out",description:Nt(Ct.FK,{children:["To zoom out, hold down the ",wa," + ",Nt("code",{children:"scroll down"}),", or press the ",Nt("code",{children:"-"}),"."]})},{title:"Move horizontal axis",description:Nt(Ct.FK,{children:["To move the graph, hold down the ",wa," + ",Nt("code",{children:"drag"})," the graph to the right or left."]})},{title:"Fixing a tooltip",description:Nt(Ct.FK,{children:["To fix the tooltip, ",Nt("code",{children:"click"})," mouse when it's open. Then, you can drag the fixed tooltip by ",Nt("code",{children:"clicking"})," and ",Nt("code",{children:"dragging"})," on the ",Nt(ar,{})," icon."]})},{title:"Set a custom range for the vertical axis",description:Nt(Ct.FK,{children:["To set a custom range for the vertical axis, click on the ",Nt($n,{})," icon located in the upper right corner of the graph, activate the toggle, and set the values."]})}],Sa=[{title:"Show/hide a legend item",description:Nt(Ct.FK,{children:[Nt("code",{children:"click"})," on a legend item to isolate it on the graph.",wa," + ",Nt("code",{children:"click"})," on a legend item to remove it from the graph. To revert to the previous state, click again."]})},{title:"Copy label key-value pairs",description:Nt(Ct.FK,{children:[Nt("code",{children:"click"})," on a label key-value pair to save it to the clipboard."]})},{title:"Collapse/Expand the legend group",description:Nt(Ct.FK,{children:[Nt("code",{children:"click"})," on the group name (e.g. ",Nt("b",{children:'Query 1: {__name__!=""}'}),") to collapse or expand the legend."]})}],xa=ka.concat(Sa),Ca=()=>{const{value:e,setFalse:t,setTrue:n}=ma(!1);return Nt(Ct.FK,{children:[Nt(ba,{title:"Show tips on working with the graph",children:Nt(da,{variant:"text",color:"gray",startIcon:Nt(hr,{}),onClick:n,ariaLabel:"open the tips"})}),e&&Nt(_a,{title:"Tips on working with the graph and the legend",onClose:t,children:Nt("div",{className:"fc-graph-tips",children:xa.map((e=>{let{title:t,description:n}=e;return Nt("div",{className:"fc-graph-tips-item",children:[Nt("h4",{className:"fc-graph-tips-item__action",children:t}),Nt("p",{className:"fc-graph-tips-item__description",children:n})]},t)}))})})]})},Ea=Nt("code",{children:ea()?"Cmd":"Ctrl"}),Na=Nt(Ct.FK,{children:[Nt("code",{children:ea()?"Option":"Ctrl"})," + ",Nt("code",{children:"Space"})]}),Aa=[{title:"Query",list:[{keys:Nt("code",{children:"Enter"}),description:"Run"},{keys:Nt(Ct.FK,{children:[Nt("code",{children:"Shift"})," + ",Nt("code",{children:"Enter"})]}),description:"Multi-line queries"},{keys:Nt(Ct.FK,{children:[Ea," + ",Nt("code",{children:"Arrow Up"})]}),description:"Previous command from the Query history"},{keys:Nt(Ct.FK,{children:[Ea," + ",Nt("code",{children:"Arrow Down"})]}),description:"Next command from the Query history"},{keys:Nt(Ct.FK,{children:[Ea," + ",Nt("code",{children:"click"})," by ",Nt(er,{})]}),description:"Toggle multiple queries"},{keys:Na,description:"Show quick autocomplete tips"}]},{title:"Graph",readMore:Nt(Ca,{}),list:[{keys:Nt(Ct.FK,{children:[Ea," + ",Nt("code",{children:"scroll Up"})," or ",Nt("code",{children:"+"})]}),description:"Zoom in"},{keys:Nt(Ct.FK,{children:[Ea," + ",Nt("code",{children:"scroll Down"})," or ",Nt("code",{children:"-"})]}),description:"Zoom out"},{keys:Nt(Ct.FK,{children:[Ea," + ",Nt("code",{children:"drag"})]}),description:"Move the graph left/right"},{keys:Nt(Ct.FK,{children:Nt("code",{children:"click"})}),description:"Select the series in the legend"},{keys:Nt(Ct.FK,{children:[Ea," + ",Nt("code",{children:"click"})]}),description:"Toggle multiple series in the legend"}]}],Ma="Shortcut keys",Ta=ea(),$a=Ta?"Cmd + /":"F1",La=e=>{let{showTitle:t}=e;const n=Qe(),{value:a,setTrue:i,setFalse:o}=ma(!1),l=(0,r.useCallback)((e=>{const t=Ta&&"/"===e.key&&e.metaKey,n=!Ta&&"F1"===e.key&&!e.metaKey;(t||n)&&i()}),[i]);return Mr("keydown",l),Nt(Ct.FK,{children:[Nt(ba,{open:!0!==t&&void 0,title:`${Ma} (${$a})`,placement:"bottom-center",children:Nt(da,{className:n?"":"vm-header-button",variant:"contained",color:"primary",startIcon:Nt(Bn,{}),onClick:i,ariaLabel:Ma,children:t&&Ma})}),a&&Nt(_a,{title:"Shortcut keys",onClose:o,children:Nt("div",{className:"vm-shortcuts",children:Aa.map((e=>Nt("div",{className:"vm-shortcuts-section",children:[e.readMore&&Nt("div",{className:"vm-shortcuts-section__read-more",children:e.readMore}),Nt("h3",{className:"vm-shortcuts-section__title",children:e.title}),Nt("div",{className:"vm-shortcuts-section-list",children:e.list.map(((t,n)=>Nt("div",{className:"vm-shortcuts-section-list-item",children:[Nt("div",{className:"vm-shortcuts-section-list-item__key",children:t.keys}),Nt("p",{className:"vm-shortcuts-section-list-item__description",children:t.description})]},`${e.title}_${n}`)))})]},e.title)))})})]})},Pa=e=>{let{open:t}=e;return Nt("button",{className:Er()({"vm-menu-burger":!0,"vm-menu-burger_opened":t}),"aria-label":"menu",children:Nt("span",{})})},{REACT_APP_TYPE:Ia}={},Oa=Ia===He.logs,Ra=e=>{let{background:t,color:n}=e;const{pathname:a}=re(),{isMobile:i}=ta(),o=(0,r.useRef)(null),{value:l,toggle:s,setFalse:c}=ma(!1);return(0,r.useEffect)(c,[a]),ua(o,c),Nt("div",{className:"vm-header-sidebar",ref:o,children:[Nt("div",{className:Er()({"vm-header-sidebar-button":!0,"vm-header-sidebar-button_open":l}),onClick:s,children:Nt(Pa,{open:l})}),Nt("div",{className:Er()({"vm-header-sidebar-menu":!0,"vm-header-sidebar-menu_open":l}),children:[Nt("div",{children:Nt(ya,{color:n,background:t,direction:"column"})}),Nt("div",{className:"vm-header-sidebar-menu-settings",children:!i&&!Oa&&Nt(La,{showTitle:!0})})]})]})},Da=e=>{let{controlsComponent:t,isMobile:n,...a}=e;const i=Qe(),{pathname:o}=re(),{accountIds:l}=(()=>{const{useTenantID:e}=Ke(),t=Qe(),{serverUrl:n}=Mt(),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(),[s,c]=(0,r.useState)([]),u=(0,r.useMemo)((()=>`${n.replace(/^(.+)(\/select.+)/,"$1")}/admin/tenants`),[n]),d=(0,r.useMemo)((()=>!!Je(n)),[n]),h=t?!e:!d;return(0,r.useEffect)((()=>{h||(async()=>{i(!0);try{const e=await fetch(u),t=await e.json(),n=t.data||[];c(n.sort(((e,t)=>e.localeCompare(t)))),e.ok?l(void 0):l(`${t.errorType}\r\n${null===t||void 0===t?void 0:t.error}`)}catch(Yp){Yp instanceof Error&&l(`${Yp.name}: ${Yp.message}`)}i(!1)})().catch(console.error)}),[u]),{accountIds:s,isLoading:a,error:o}})(),{value:s,toggle:c,setFalse:u}=ma(!1),d=Nt(t,{...a,isMobile:n,accountIds:l,headerSetup:(0,r.useMemo)((()=>(Ye[o]||{}).header||{}),[o])});return n?Nt(Ct.FK,{children:[Nt("div",{children:Nt(da,{className:Er()({"vm-header-button":!i}),startIcon:Nt(ur,{}),onClick:c,ariaLabel:"controls"})}),Nt(_a,{title:"Controls",onClose:u,isOpen:s,className:Er()({"vm-header-controls-modal":!0,"vm-header-controls-modal_open":s}),children:d})]}):d},{REACT_APP_TYPE:za}={},Fa=za===He.logs||za===He.anomaly,ja=()=>{switch(za){case He.logs:return Nt(An,{});case He.anomaly:return Nt(Mn,{});default:return Nt(Nn,{})}},Ha=e=>{let{controlsComponent:t}=e;const{isMobile:n}=ta(),a=Tr(),i=(0,r.useMemo)((()=>window.innerWidth<1e3),[a]),{isDarkTheme:o}=Mt(),l=Qe(),s=(0,r.useMemo)((()=>gt(o?"color-background-block":"color-primary")),[o]),{background:c,color:u}=(0,r.useMemo)((()=>{const{headerStyles:{background:e=(l?"#FFF":s),color:t=(l?s:"#FFF")}={}}=Ke();return{background:e,color:t}}),[s]),d=ie(),h=()=>{d({pathname:We.home}),window.location.reload()};return Nt("header",{className:Er()({"vm-header":!0,"vm-header_app":l,"vm-header_dark":o,"vm-header_sidebar":i,"vm-header_mobile":n}),style:{background:c,color:u},children:[i?Nt(Ra,{background:c,color:u}):Nt(Ct.FK,{children:[!l&&Nt("div",{className:Er()({"vm-header-logo":!0,"vm-header-logo_logs":Fa}),onClick:h,style:{color:u},children:Nt(ja,{})}),Nt(ya,{color:u,background:c})]}),i&&Nt("div",{className:Er()({"vm-header-logo":!0,"vm-header-logo_mobile":!0,"vm-header-logo_logs":Fa}),onClick:h,style:{color:u},children:Nt(ja,{})}),Nt(Da,{controlsComponent:t,displaySidebar:i,isMobile:n})]})},Ua={href:"https://github.com/VictoriaMetrics/VictoriaMetrics/issues/new/choose",Icon:lr,title:"Create an issue"},Va=[{href:"https://docs.victoriametrics.com/MetricsQL.html",Icon:Qn,title:"MetricsQL"},{href:"https://docs.victoriametrics.com/#vmui",Icon:or,title:"Documentation"},Ua],Ba=(0,r.memo)((e=>{let{links:t=Va}=e;const n=`2019-${(new Date).getFullYear()}`;return Nt("footer",{className:"vm-footer",children:[Nt("a",{className:"vm-link vm-footer__website",target:"_blank",href:"https://victoriametrics.com/",rel:"me noreferrer",children:[Nt(Tn,{}),"victoriametrics.com"]}),t.map((e=>{let{href:t,Icon:n,title:r}=e;return Nt("a",{className:"vm-link vm-footer__link",target:"_blank",href:t,rel:"help noreferrer",children:[Nt(n,{}),r]},`${t}-${r}`)})),Nt("div",{className:"vm-footer__copyright",children:["\xa9 ",n," VictoriaMetrics"]})]})})),qa=Ba,Ya=()=>{const e=Qe(),{serverUrl:t}=Mt(),n=(0,r.useContext)(Kr).dispatch,[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[s,c]=(0,r.useState)([]),u=async()=>{try{const e=window.__VMUI_PREDEFINED_DASHBOARDS__;if(null===e||void 0===e||!e.length)return[];const t=await Promise.all(e.map((async e=>(async e=>{const t=await fetch(`./dashboards/${e}`);return await t.json()})(e))));c((e=>[...t,...e]))}catch(Yp){Yp instanceof Error&&l(`${Yp.name}: ${Yp.message}`)}};return(0,r.useEffect)((()=>{e||(c([]),(async()=>{if(t&&!{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1}.REACT_APP_TYPE){l(""),i(!0);try{const e=await fetch(`${t}/vmui/custom-dashboards`),n=await e.json();if(e.ok){const{dashboardsSettings:e}=n;e&&e.length>0?c((t=>[...t,...e])):await u(),i(!1)}else await u(),l(n.error),i(!1)}catch(Yp){i(!1),Yp instanceof Error&&l(`${Yp.name}: ${Yp.message}`),await u()}}})())}),[t]),(0,r.useEffect)((()=>{n({type:"SET_DASHBOARDS_SETTINGS",payload:s})}),[s]),(0,r.useEffect)((()=>{n({type:"SET_DASHBOARDS_LOADING",payload:a})}),[a]),(0,r.useEffect)((()=>{n({type:"SET_DASHBOARDS_ERROR",payload:o})}),[o]),{dashboardsSettings:s,isLoading:a,error:o}},Wa=e=>{let{error:t,warning:n,info:a}=e;const i=(0,r.useRef)(null),[o,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),u=`${(0,r.useMemo)((()=>t?"ERROR: ":n?"WARNING: ":""),[t,n])}${t||n||a}`,d=()=>{const e=i.current;if(e){const{offsetWidth:t,scrollWidth:n,offsetHeight:r,scrollHeight:a}=e;l(t+1<n||r+1<a)}else l(!1)};return(0,r.useEffect)((()=>{c(!1),d()}),[i,u]),Mr("resize",d),t||n||a?Nt("span",{className:Er()({"vm-text-field__error":!0,"vm-text-field__warning":n&&!t,"vm-text-field__helper-text":!n&&!t,"vm-text-field__error_overflowed":o,"vm-text-field__error_full":s}),"data-show":!!u,ref:i,onClick:()=>{o&&(c(!0),l(!1))},children:u}):null},Ka=e=>{let{label:t,value:n,type:a="text",error:i="",warning:o="",helperText:l="",placeholder:s,endIcon:c,startIcon:u,disabled:d=!1,autofocus:h=!1,inputmode:m="text",caretPosition:p,onChange:f,onEnter:v,onKeyDown:g,onFocus:y,onBlur:_,onChangeCaret:b}=e;const{isDarkTheme:w}=Mt(),{isMobile:k}=ta(),S=(0,r.useRef)(null),x=(0,r.useRef)(null),C=(0,r.useMemo)((()=>"textarea"===a?x:S),[a]),[E,N]=(0,r.useState)([0,0]),A=Er()({"vm-text-field__input":!0,"vm-text-field__input_error":i,"vm-text-field__input_warning":!i&&o,"vm-text-field__input_icon-start":u,"vm-text-field__input_disabled":d,"vm-text-field__input_textarea":"textarea"===a}),M=e=>{const{selectionStart:t,selectionEnd:n}=e;N([t||0,n||0])},T=e=>{M(e.currentTarget)},$=e=>{g&&g(e);const{key:t,ctrlKey:n,metaKey:r}=e,i="Enter"===t;("textarea"!==a?i:i&&(r||n))&&v&&(e.preventDefault(),v())},L=e=>{M(e.currentTarget)},P=e=>{d||(f&&f(e.currentTarget.value),M(e.currentTarget))},I=()=>{y&&y()},O=()=>{_&&_()},R=e=>{try{C.current&&C.current.setSelectionRange(e[0],e[1])}catch(Yp){return Yp}};return(0,r.useEffect)((()=>{var e;h&&!k&&(null===C||void 0===C||null===(e=C.current)||void 0===e?void 0:e.focus)&&C.current.focus()}),[C,h]),(0,r.useEffect)((()=>{b&&b(E)}),[E]),(0,r.useEffect)((()=>{R(E)}),[n]),(0,r.useEffect)((()=>{p&&R(p)}),[p]),Nt("label",{className:Er()({"vm-text-field":!0,"vm-text-field_textarea":"textarea"===a,"vm-text-field_dark":w}),"data-replicated-value":n,children:[u&&Nt("div",{className:"vm-text-field__icon-start",children:u}),c&&Nt("div",{className:"vm-text-field__icon-end",children:c}),"textarea"===a?Nt("textarea",{className:A,disabled:d,ref:x,value:n,rows:1,inputMode:m,placeholder:s,autoCapitalize:"none",onInput:P,onKeyDown:$,onKeyUp:L,onFocus:I,onBlur:O,onMouseUp:T}):Nt("input",{className:A,disabled:d,ref:S,value:n,type:a,placeholder:s,inputMode:m,autoCapitalize:"none",onInput:P,onKeyDown:$,onKeyUp:L,onFocus:I,onBlur:O,onMouseUp:T}),t&&Nt("span",{className:"vm-text-field__label",children:t}),Nt(Wa,{error:i,warning:o,info:l})]})},Qa=e=>{let{accountIds:t}=e;const n=Qe(),{isMobile:a}=ta(),{tenantId:i,serverUrl:o}=Mt(),l=Tt(),s=vn(),[c,u]=(0,r.useState)(""),d=(0,r.useRef)(null),{value:h,toggle:m,setFalse:p}=ma(!1),f=(0,r.useMemo)((()=>{if(!c)return t;try{const e=new RegExp(c,"i");return t.filter((t=>e.test(t))).sort(((t,n)=>{var r,a;return((null===(r=t.match(e))||void 0===r?void 0:r.index)||0)-((null===(a=n.match(e))||void 0===a?void 0:a.index)||0)}))}catch(Yp){return[]}}),[c,t]),v=(0,r.useMemo)((()=>t.length>1),[t]),g=e=>()=>{const t=e;if(l({type:"SET_TENANT_ID",payload:t}),o){const e=Ge(o,t);if(e===o)return;l({type:"SET_SERVER",payload:e}),s({type:"RUN_QUERY"})}p()};return(0,r.useEffect)((()=>{const e=Je(o);i&&i!==e?g(i)():g(e)()}),[o]),v?Nt("div",{className:"vm-tenant-input",children:[Nt(ba,{title:"Define Tenant ID if you need request to another storage",children:Nt("div",{ref:d,children:a?Nt("div",{className:"vm-mobile-option",onClick:m,children:[Nt("span",{className:"vm-mobile-option__icon",children:Nt(cr,{})}),Nt("div",{className:"vm-mobile-option-text",children:[Nt("span",{className:"vm-mobile-option-text__label",children:"Tenant ID"}),Nt("span",{className:"vm-mobile-option-text__value",children:i})]}),Nt("span",{className:"vm-mobile-option__arrow",children:Nt(Fn,{})})]}):Nt(da,{className:n?"":"vm-header-button",variant:"contained",color:"primary",fullWidth:!0,startIcon:Nt(cr,{}),endIcon:Nt("div",{className:Er()({"vm-execution-controls-buttons__arrow":!0,"vm-execution-controls-buttons__arrow_open":h}),children:Nt(Fn,{})}),onClick:m,children:i})})}),Nt(ha,{open:h,placement:"bottom-right",onClose:p,buttonRef:d,title:a?"Define Tenant ID":void 0,children:Nt("div",{className:Er()({"vm-list vm-tenant-input-list":!0,"vm-list vm-tenant-input-list_mobile":a}),children:[Nt("div",{className:"vm-tenant-input-list__search",children:Nt(Ka,{autofocus:!0,label:"Search",value:c,onChange:u,type:"search"})}),f.map((e=>Nt("div",{className:Er()({"vm-list-item":!0,"vm-list-item_mobile":a,"vm-list-item_active":e===i}),onClick:g(e),children:e},e)))]})})]}):null};const Za=function(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current},Ga=()=>{const e=Qe(),{isMobile:t}=ta(),{customStep:n,isHistogram:a}=Br(),{period:{step:i,end:o,start:l}}=fn(),s=qr(),c=Za(o-l),u=(0,r.useMemo)((()=>Zt(o-l,a)),[i,a]),[d,h]=(0,r.useState)(n||u),[m,p]=(0,r.useState)(""),{value:f,toggle:v,setFalse:g}=ma(!1),y=(0,r.useRef)(null),_=e=>{const t=e||d||u||"1s",n=(t.match(/[a-zA-Z]+/g)||[]).length?t:`${t}s`;s({type:"SET_CUSTOM_STEP",payload:n}),h(n),p("")},b=()=>{_(),g()},w=e=>{const t=e.match(/[-+]?([0-9]*\.[0-9]+|[0-9]+)/g)||[],n=e.match(/[a-zA-Z]+/g)||[],r=t.length&&t.every((e=>parseFloat(e)>0)),a=n.every((e=>Vt.find((t=>t.short===e)))),i=r&&a;h(e),p(i?"":pt.validStep)};return(0,r.useEffect)((()=>{n&&_(n)}),[n]),(0,r.useEffect)((()=>{!n&&u&&_(u)}),[u]),(0,r.useEffect)((()=>{o-l!==c&&c&&u&&_(u)}),[o,l,c,u]),(0,r.useEffect)((()=>{i!==n&&i!==u||_(u)}),[a]),Nt("div",{className:"vm-step-control",ref:y,children:[t?Nt("div",{className:"vm-mobile-option",onClick:v,children:[Nt("span",{className:"vm-mobile-option__icon",children:Nt(ir,{})}),Nt("div",{className:"vm-mobile-option-text",children:[Nt("span",{className:"vm-mobile-option-text__label",children:"Step"}),Nt("span",{className:"vm-mobile-option-text__value",children:d})]}),Nt("span",{className:"vm-mobile-option__arrow",children:Nt(Fn,{})})]}):Nt(ba,{title:"Query resolution step width",children:Nt(da,{className:e?"":"vm-header-button",variant:"contained",color:"primary",startIcon:Nt(ir,{}),onClick:v,children:Nt("p",{children:["STEP",Nt("p",{className:"vm-step-control__value",children:d})]})})}),Nt(ha,{open:f,placement:"bottom-right",onClose:b,buttonRef:y,title:t?"Query resolution step width":void 0,children:Nt("div",{className:Er()({"vm-step-control-popper":!0,"vm-step-control-popper_mobile":t}),children:[Nt(Ka,{autofocus:!0,label:"Step value",value:d,error:m,onChange:w,onEnter:()=>{_(),b()},onFocus:()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.select()},onBlur:_,endIcon:Nt(ba,{title:`Set default step value: ${u}`,children:Nt(da,{size:"small",variant:"text",color:"primary",startIcon:Nt(Pn,{}),onClick:()=>{const e=u||"1s";w(e),_(e)},ariaLabel:"reset step"})})}),Nt("div",{className:"vm-step-control-popper-info",children:[Nt("code",{children:"step"})," - the ",Nt("a",{className:"vm-link vm-link_colored",href:"https://prometheus.io/docs/prometheus/latest/querying/basics/#time-durations",target:"_blank",rel:"noreferrer",children:"interval"}),"between datapoints, which must be returned from the range query. The ",Nt("code",{children:"query"})," is executed at",Nt("code",{children:"start"}),", ",Nt("code",{children:"start+step"}),", ",Nt("code",{children:"start+2*step"}),", \u2026, ",Nt("code",{children:"end"})," timestamps.",Nt("a",{className:"vm-link vm-link_colored",href:"https://docs.victoriametrics.com/keyConcepts.html#range-query",target:"_blank",rel:"help noreferrer",children:"Read more about Range query"})]})]})})]})},Ja=e=>{let{relativeTime:t,setDuration:n}=e;const{isMobile:r}=ta();return Nt("div",{className:Er()({"vm-time-duration":!0,"vm-time-duration_mobile":r}),children:rn.map((e=>{let{id:a,duration:i,until:o,title:l}=e;return Nt("div",{className:Er()({"vm-list-item":!0,"vm-list-item_mobile":r,"vm-list-item_active":a===t}),onClick:(s={duration:i,until:o(),id:a},()=>{n(s)}),children:l||i},a);var s}))})},Xa=e=>{let{viewDate:t,showArrowNav:n,onChangeViewDate:r,toggleDisplayYears:a}=e;return Nt("div",{className:"vm-calendar-header",children:[Nt("div",{className:"vm-calendar-header-left",onClick:a,children:[Nt("span",{className:"vm-calendar-header-left__date",children:t.format("MMMM YYYY")}),Nt("div",{className:"vm-calendar-header-left__select-year",children:Nt(jn,{})})]}),n&&Nt("div",{className:"vm-calendar-header-right",children:[Nt("div",{className:"vm-calendar-header-right__prev",onClick:()=>{r(t.subtract(1,"month"))},children:Nt(Fn,{})}),Nt("div",{className:"vm-calendar-header-right__next",onClick:()=>{r(t.add(1,"month"))},children:Nt(Fn,{})})]})]})},ei=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ti=e=>{let{viewDate:t,selectDate:n,onChangeSelectDate:a}=e;const o="YYYY-MM-DD",l=i().tz(),s=i()(t.format(o)),c=(0,r.useMemo)((()=>{const e=new Array(42).fill(null),t=s.startOf("month"),n=s.endOf("month").diff(t,"day")+1,r=new Array(n).fill(t).map(((e,t)=>e.add(t,"day"))),a=t.day();return e.splice(a,n,...r),e}),[s]),u=e=>()=>{e&&a(e)};return Nt("div",{className:"vm-calendar-body",children:[ei.map((e=>Nt(ba,{title:e,children:Nt("div",{className:"vm-calendar-body-cell vm-calendar-body-cell_weekday",children:e[0]})},e))),c.map(((e,t)=>Nt("div",{className:Er()({"vm-calendar-body-cell":!0,"vm-calendar-body-cell_day":!0,"vm-calendar-body-cell_day_empty":!e,"vm-calendar-body-cell_day_active":(e&&e.format(o))===n.format(o),"vm-calendar-body-cell_day_today":(e&&e.format(o))===l.format(o)}),onClick:u(e),children:e&&e.format("D")},e?e.format(o):t)))]})},ni=e=>{let{viewDate:t,onChangeViewDate:n}=e;const a=i()().format("YYYY"),o=(0,r.useMemo)((()=>t.format("YYYY")),[t]),l=(0,r.useMemo)((()=>{const e=i()().subtract(9,"year");return new Array(18).fill(e).map(((e,t)=>e.add(t,"year")))}),[t]);(0,r.useEffect)((()=>{const e=document.getElementById(`vm-calendar-year-${o}`);e&&e.scrollIntoView({block:"center"})}),[]);return Nt("div",{className:"vm-calendar-years",children:l.map((e=>{return Nt("div",{className:Er()({"vm-calendar-years__year":!0,"vm-calendar-years__year_selected":e.format("YYYY")===o,"vm-calendar-years__year_today":e.format("YYYY")===a}),id:`vm-calendar-year-${e.format("YYYY")}`,onClick:(t=e,()=>{n(t)}),children:e.format("YYYY")},e.format("YYYY"));var t}))})},ri=e=>{let{viewDate:t,selectDate:n,onChangeViewDate:a}=e;const o=i()().format("MM"),l=(0,r.useMemo)((()=>n.format("MM")),[n]),s=(0,r.useMemo)((()=>new Array(12).fill("").map(((e,n)=>i()(t).month(n)))),[t]);(0,r.useEffect)((()=>{const e=document.getElementById(`vm-calendar-year-${l}`);e&&e.scrollIntoView({block:"center"})}),[]);return Nt("div",{className:"vm-calendar-years",children:s.map((e=>{return Nt("div",{className:Er()({"vm-calendar-years__year":!0,"vm-calendar-years__year_selected":e.format("MM")===l,"vm-calendar-years__year_today":e.format("MM")===o}),id:`vm-calendar-year-${e.format("MM")}`,onClick:(t=e,()=>{a(t)}),children:e.format("MMMM")},e.format("MM"));var t}))})};var ai=function(e){return e[e.days=0]="days",e[e.months=1]="months",e[e.years=2]="years",e}(ai||{});const ii=e=>{let{date:t,format:n=Pt,onChange:a}=e;const[o,l]=(0,r.useState)(ai.days),[s,c]=(0,r.useState)(i().tz(t)),[u,d]=(0,r.useState)(i().tz(t)),h=i().tz(),m=h.format(Lt)===s.format(Lt),{isMobile:p}=ta(),f=e=>{c(e),l((e=>e===ai.years?ai.months:ai.days))};return(0,r.useEffect)((()=>{u.format()!==i().tz(t).format()&&a(u.format(n))}),[u]),(0,r.useEffect)((()=>{const e=i().tz(t);c(e),d(e)}),[t]),Nt("div",{className:Er()({"vm-calendar":!0,"vm-calendar_mobile":p}),children:[Nt(Xa,{viewDate:s,onChangeViewDate:f,toggleDisplayYears:()=>{l((e=>e===ai.years?ai.days:ai.years))},showArrowNav:o===ai.days}),o===ai.days&&Nt(ti,{viewDate:s,selectDate:u,onChangeSelectDate:e=>{d(e)}}),o===ai.years&&Nt(ni,{viewDate:s,onChangeViewDate:f}),o===ai.months&&Nt(ri,{selectDate:u,viewDate:s,onChangeViewDate:f}),!m&&o===ai.days&&Nt("div",{className:"vm-calendar-footer",children:Nt(da,{variant:"text",size:"small",onClick:()=>{c(h)},children:"show today"})})]})},oi=(0,r.forwardRef)(((e,t)=>{let{date:n,targetRef:a,format:o=Pt,onChange:l,label:s}=e;const c=(0,r.useMemo)((()=>i()(n).isValid()?i().tz(n):i()().tz()),[n]),{isMobile:u}=ta(),{value:d,toggle:h,setFalse:m}=ma(!1);return Mr("click",h,a),Mr("keyup",(e=>{"Escape"!==e.key&&"Enter"!==e.key||m()})),Nt(Ct.FK,{children:Nt(ha,{open:d,buttonRef:a,placement:"bottom-right",onClose:m,title:u?s:void 0,children:Nt("div",{ref:t,children:Nt(ii,{date:c,format:o,onChange:e=>{l(e),m()}})})})})}));var li=n(494),si=n.n(li);const ci=e=>i()(e).isValid()?i().tz(e).format(Pt):e,ui=e=>{let{value:t="",label:n,pickerLabel:a,pickerRef:o,onChange:l,onEnter:s}=e;const c=(0,r.useRef)(null),[u,d]=(0,r.useState)(null),[h,m]=(0,r.useState)(ci(t)),[p,f]=(0,r.useState)(!1),[v,g]=(0,r.useState)(!1),y=i()(h).isValid()?"":"Invalid date format";return(0,r.useEffect)((()=>{const e=ci(t);e!==h&&m(e),v&&(s(),g(!1))}),[t]),(0,r.useEffect)((()=>{p&&u&&(u.focus(),u.setSelectionRange(11,11),f(!1))}),[p]),Nt("div",{className:Er()({"vm-date-time-input":!0,"vm-date-time-input_error":y}),children:[Nt("label",{children:n}),Nt(si(),{tabIndex:1,inputRef:d,mask:"9999-99-99 99:99:99",placeholder:"YYYY-MM-DD HH:mm:ss",value:h,autoCapitalize:"none",inputMode:"numeric",maskChar:null,onChange:e=>{m(e.currentTarget.value)},onBlur:()=>{l(h)},onKeyUp:e=>{"Enter"===e.key&&(l(h),g(!0))}}),y&&Nt("span",{className:"vm-date-time-input__error-text",children:y}),Nt("div",{className:"vm-date-time-input__icon",ref:c,children:Nt(da,{variant:"text",color:"gray",size:"small",startIcon:Nt(Un,{}),ariaLabel:"calendar"})}),Nt(oi,{label:a,ref:o,date:h,onChange:e=>{m(e),f(!0)},targetRef:c})]})},di=()=>{const{isMobile:e}=ta(),{isDarkTheme:t}=Mt(),n=(0,r.useRef)(null),a=Tr(),o=(0,r.useMemo)((()=>a.width>1120),[a]),[l,s]=(0,r.useState)(),[c,u]=(0,r.useState)(),{period:{end:d,start:h},relativeTime:m,timezone:p,duration:f}=fn(),v=vn(),g=Qe(),y=Za(p),{value:_,toggle:b,setFalse:w}=ma(!1),k=(0,r.useMemo)((()=>({region:p,utc:on(p)})),[p]);(0,r.useEffect)((()=>{s(Xt(tn(d)))}),[p,d]),(0,r.useEffect)((()=>{u(Xt(tn(h)))}),[p,h]);const S=e=>{let{duration:t,until:n,id:r}=e;v({type:"SET_RELATIVE_TIME",payload:{duration:t,until:n,id:r}}),w()},x=(0,r.useMemo)((()=>({start:i().tz(tn(h)).format(Pt),end:i().tz(tn(d)).format(Pt)})),[h,d,p]),C=(0,r.useMemo)((()=>m&&"none"!==m?m.replace(/_/g," "):`${x.start} - ${x.end}`),[m,x]),E=(0,r.useRef)(null),N=(0,r.useRef)(null),A=(0,r.useRef)(null),M=()=>{c&&l&&v({type:"SET_PERIOD",payload:{from:i().tz(c).toDate(),to:i().tz(l).toDate()}}),w()};return(0,r.useEffect)((()=>{const e=an({relativeTimeId:m,defaultDuration:f,defaultEndInput:tn(d)});y&&p!==y&&S({id:e.relativeTimeId,duration:e.duration,until:e.endInput})}),[p,y]),ua(n,(t=>{var n,r;if(e)return;const a=t.target,i=(null===E||void 0===E?void 0:E.current)&&(null===E||void 0===E||null===(n=E.current)||void 0===n?void 0:n.contains(a)),o=(null===N||void 0===N?void 0:N.current)&&(null===N||void 0===N||null===(r=N.current)||void 0===r?void 0:r.contains(a));i||o||w()})),Nt(Ct.FK,{children:[Nt("div",{ref:A,children:e?Nt("div",{className:"vm-mobile-option",onClick:b,children:[Nt("span",{className:"vm-mobile-option__icon",children:Nt(Hn,{})}),Nt("div",{className:"vm-mobile-option-text",children:[Nt("span",{className:"vm-mobile-option-text__label",children:"Time range"}),Nt("span",{className:"vm-mobile-option-text__value",children:C})]}),Nt("span",{className:"vm-mobile-option__arrow",children:Nt(Fn,{})})]}):Nt(ba,{title:o?"Time range controls":C,children:Nt(da,{className:g?"":"vm-header-button",variant:"contained",color:"primary",startIcon:Nt(Hn,{}),onClick:b,ariaLabel:"time range controls",children:o&&Nt("span",{children:C})})})}),Nt(ha,{open:_,buttonRef:A,placement:"bottom-right",onClose:w,clickOutside:!1,title:e?"Time range controls":"",children:Nt("div",{className:Er()({"vm-time-selector":!0,"vm-time-selector_mobile":e}),ref:n,children:[Nt("div",{className:"vm-time-selector-left",children:[Nt("div",{className:Er()({"vm-time-selector-left-inputs":!0,"vm-time-selector-left-inputs_dark":t}),children:[Nt(ui,{value:c,label:"From:",pickerLabel:"Date From",pickerRef:E,onChange:u,onEnter:M}),Nt(ui,{value:l,label:"To:",pickerLabel:"Date To",pickerRef:N,onChange:s,onEnter:M})]}),Nt("div",{className:"vm-time-selector-left-timezone",children:[Nt("div",{className:"vm-time-selector-left-timezone__title",children:k.region}),Nt("div",{className:"vm-time-selector-left-timezone__utc",children:k.utc})]}),Nt(da,{variant:"text",startIcon:Nt(Vn,{}),onClick:()=>v({type:"RUN_QUERY_TO_NOW"}),children:"switch to now"}),Nt("div",{className:"vm-time-selector-left__controls",children:[Nt(da,{color:"error",variant:"outlined",onClick:()=>{s(Xt(tn(d))),u(Xt(tn(h))),w()},children:"Cancel"}),Nt(da,{color:"primary",onClick:M,children:"Apply"})]})]}),Nt(Ja,{relativeTime:m||"",setDuration:S})]})})]})},hi=()=>{const e=ie(),[t,n]=je();return{setSearchParamsFromKeys:(0,r.useCallback)((r=>{const a=!!Array.from(t.values()).length;let i=!1;Object.entries(r).forEach((e=>{let[n,r]=e;t.get(n)!==`${r}`&&(t.set(n,`${r}`),i=!0)})),i&&(a?n(t):e(`?${t.toString()}`,{replace:!0}))}),[t,e])}},mi=()=>{const{isMobile:e}=ta(),t=Qe(),n=(0,r.useRef)(null),[a]=je(),{setSearchParamsFromKeys:o}=hi(),l=a.get("date")||i()().tz().format(Lt),s=(0,r.useMemo)((()=>i().tz(l).format(Lt)),[l]),c=e=>{o({date:e})};return(0,r.useEffect)((()=>{c(l)}),[]),Nt("div",{children:[Nt("div",{ref:n,children:e?Nt("div",{className:"vm-mobile-option",children:[Nt("span",{className:"vm-mobile-option__icon",children:Nt(Un,{})}),Nt("div",{className:"vm-mobile-option-text",children:[Nt("span",{className:"vm-mobile-option-text__label",children:"Date control"}),Nt("span",{className:"vm-mobile-option-text__value",children:s})]}),Nt("span",{className:"vm-mobile-option__arrow",children:Nt(Fn,{})})]}):Nt(ba,{title:"Date control",children:Nt(da,{className:t?"":"vm-header-button",variant:"contained",color:"primary",startIcon:Nt(Un,{}),children:s})})}),Nt(oi,{label:"Date control",date:l||"",format:Lt,onChange:c,targetRef:n})]})},pi=[{seconds:0,title:"Off"},{seconds:1,title:"1s"},{seconds:2,title:"2s"},{seconds:5,title:"5s"},{seconds:10,title:"10s"},{seconds:30,title:"30s"},{seconds:60,title:"1m"},{seconds:300,title:"5m"},{seconds:900,title:"15m"},{seconds:1800,title:"30m"},{seconds:3600,title:"1h"},{seconds:7200,title:"2h"}],fi=()=>{const{isMobile:e}=ta(),t=vn(),n=Qe(),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(pi[0]),{value:s,toggle:c,setFalse:u}=ma(!1),d=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=o.seconds;let n;return a?n=setInterval((()=>{t({type:"RUN_QUERY"})}),1e3*e):l(pi[0]),()=>{n&&clearInterval(n)}}),[o,a]);const h=e=>()=>{(e=>{(a&&!e.seconds||!a&&e.seconds)&&i((e=>!e)),l(e),u()})(e)};return Nt(Ct.FK,{children:[Nt("div",{className:"vm-execution-controls",children:Nt("div",{className:Er()({"vm-execution-controls-buttons":!0,"vm-execution-controls-buttons_mobile":e,"vm-header-button":!n}),children:[!e&&Nt(ba,{title:"Refresh dashboard",children:Nt(da,{variant:"contained",color:"primary",onClick:()=>{t({type:"RUN_QUERY"})},startIcon:Nt(zn,{}),ariaLabel:"refresh dashboard"})}),e?Nt("div",{className:"vm-mobile-option",onClick:c,children:[Nt("span",{className:"vm-mobile-option__icon",children:Nt(Pn,{})}),Nt("div",{className:"vm-mobile-option-text",children:[Nt("span",{className:"vm-mobile-option-text__label",children:"Auto-refresh"}),Nt("span",{className:"vm-mobile-option-text__value",children:o.title})]}),Nt("span",{className:"vm-mobile-option__arrow",children:Nt(Fn,{})})]}):Nt(ba,{title:"Auto-refresh control",children:Nt("div",{ref:d,children:Nt(da,{variant:"contained",color:"primary",fullWidth:!0,endIcon:Nt("div",{className:Er()({"vm-execution-controls-buttons__arrow":!0,"vm-execution-controls-buttons__arrow_open":s}),children:Nt(Fn,{})}),onClick:c,children:o.title})})})]})}),Nt(ha,{open:s,placement:"bottom-right",onClose:u,buttonRef:d,title:e?"Auto-refresh duration":void 0,children:Nt("div",{className:Er()({"vm-execution-controls-list":!0,"vm-execution-controls-list_mobile":e}),children:pi.map((t=>Nt("div",{className:Er()({"vm-list-item":!0,"vm-list-item_mobile":e,"vm-list-item_active":t.seconds===o.seconds}),onClick:h(t),children:t.title},t.seconds)))})})]})},vi="Enable to save the modified server URL to local storage, preventing reset upon page refresh.",gi="Disable to stop saving the server URL to local storage, reverting to the default URL on page refresh.",yi=(0,r.forwardRef)(((e,t)=>{let{onClose:n}=e;const{serverUrl:a}=Mt(),i=Tt(),{value:o,toggle:l}=ma(!!et("SERVER_URL")),[s,c]=(0,r.useState)(a),[u,d]=(0,r.useState)(""),h=(0,r.useCallback)((()=>{const e=Je(s);""!==e&&i({type:"SET_TENANT_ID",payload:e}),i({type:"SET_SERVER",payload:s}),n()}),[s]);return(0,r.useEffect)((()=>{a||d(pt.emptyServer),bt(a)||d(pt.validServer)}),[a]),(0,r.useEffect)((()=>{o?Xe("SERVER_URL",s):tt(["SERVER_URL"])}),[o]),(0,r.useEffect)((()=>{o&&Xe("SERVER_URL",s)}),[s]),(0,r.useEffect)((()=>{a!==s&&c(a)}),[a]),(0,r.useImperativeHandle)(t,(()=>({handleApply:h})),[h]),Nt("div",{children:[Nt("div",{className:"vm-server-configurator__title",children:"Server URL"}),Nt("div",{className:"vm-server-configurator-url",children:[Nt(Ka,{autofocus:!0,value:s,error:u,onChange:e=>{c(e||""),d("")},onEnter:h,inputmode:"url"}),Nt(ba,{title:o?gi:vi,children:Nt(da,{className:"vm-server-configurator-url__button",variant:"text",color:o?"primary":"gray",onClick:l,startIcon:Nt(cr,{})})})]})]})})),_i=[{label:"Graph",type:mt.chart},{label:"JSON",type:mt.code},{label:"Table",type:mt.table}],bi=(0,r.forwardRef)(((e,t)=>{let{onClose:n}=e;const{isMobile:a}=ta(),{seriesLimits:i}=Fr(),o=jr(),[l,s]=(0,r.useState)(i),[c,u]=(0,r.useState)({table:"",chart:"",code:""}),d=(0,r.useCallback)((()=>{o({type:"SET_SERIES_LIMITS",payload:l}),n()}),[l]);return(0,r.useImperativeHandle)(t,(()=>({handleApply:d})),[d]),Nt("div",{className:"vm-limits-configurator",children:[Nt("div",{className:"vm-server-configurator__title",children:["Series limits by tabs",Nt(ba,{title:"Set to 0 to disable the limit",children:Nt(da,{variant:"text",color:"primary",size:"small",startIcon:Nt(In,{})})}),Nt("div",{className:"vm-limits-configurator-title__reset",children:Nt(da,{variant:"text",color:"primary",size:"small",startIcon:Nt(Pn,{}),onClick:()=>{s(lt)},children:"Reset limits"})})]}),Nt("div",{className:Er()({"vm-limits-configurator__inputs":!0,"vm-limits-configurator__inputs_mobile":a}),children:_i.map((e=>{return Nt("div",{children:Nt(Ka,{label:e.label,value:l[e.type],error:c[e.type],onChange:(t=e.type,e=>{const n=e||"";u((e=>({...e,[t]:+n<0?pt.positiveNumber:""}))),s({...l,[t]:n||1/0})}),onEnter:d,type:"number"})},e.type);var t}))})]})})),wi=bi,ki=e=>{let{defaultExpanded:t=!1,onChange:n,title:a,children:i}=e;const[o,l]=(0,r.useState)(t);return(0,r.useEffect)((()=>{n&&n(o)}),[o]),Nt(Ct.FK,{children:[Nt("header",{className:`vm-accordion-header ${o&&"vm-accordion-header_open"}`,onClick:()=>{const e=window.getSelection();e&&e.toString()||l((e=>!e))},children:[a,Nt("div",{className:`vm-accordion-header__arrow ${o&&"vm-accordion-header__arrow_open"}`,children:Nt(Fn,{})})]}),o&&Nt("section",{className:"vm-accordion-section",children:i},"content")]})},Si=()=>Nt(ba,{title:"Browser timezone is not recognized, supported, or could not be determined.",children:Nt(On,{})}),xi=cn(),Ci=(0,r.forwardRef)(((e,t)=>{const{isMobile:n}=ta(),a=ln(),{timezone:i,defaultTimezone:o}=fn(),l=vn(),[s,c]=(0,r.useState)(i),[u,d]=(0,r.useState)(""),h=(0,r.useRef)(null),{value:m,toggle:p,setFalse:f}=ma(!1),v=(0,r.useMemo)((()=>[{title:`Default time (${o})`,region:o,utc:o?on(o):"UTC"},{title:xi.title,region:xi.region,utc:on(xi.region),isInvalid:!xi.isValid},{title:"UTC (Coordinated Universal Time)",region:"UTC",utc:"UTC"}].filter((e=>e.region))),[o]),g=(0,r.useMemo)((()=>{if(!u)return a;try{return ln(u)}catch(Yp){return{}}}),[u,a]),y=(0,r.useMemo)((()=>Object.keys(g)),[g]),_=(0,r.useMemo)((()=>({region:s,utc:on(s)})),[s]),b=e=>()=>{(e=>{c(e.region),d(""),f()})(e)};return(0,r.useEffect)((()=>{c(i)}),[i]),(0,r.useImperativeHandle)(t,(()=>({handleApply:()=>{l({type:"SET_TIMEZONE",payload:s})}})),[s]),Nt("div",{className:"vm-timezones",children:[Nt("div",{className:"vm-server-configurator__title",children:"Time zone"}),Nt("div",{className:"vm-timezones-item vm-timezones-item_selected",onClick:p,ref:h,children:[Nt("div",{className:"vm-timezones-item__title",children:_.region}),Nt("div",{className:"vm-timezones-item__utc",children:_.utc}),Nt("div",{className:Er()({"vm-timezones-item__icon":!0,"vm-timezones-item__icon_open":m}),children:Nt(jn,{})})]}),Nt(ha,{open:m,buttonRef:h,placement:"bottom-left",onClose:f,fullWidth:!0,title:n?"Time zone":void 0,children:Nt("div",{className:Er()({"vm-timezones-list":!0,"vm-timezones-list_mobile":n}),children:[Nt("div",{className:"vm-timezones-list-header",children:[Nt("div",{className:"vm-timezones-list-header__search",children:Nt(Ka,{autofocus:!0,label:"Search",value:u,onChange:e=>{d(e)}})}),v.map(((e,t)=>e&&Nt("div",{className:"vm-timezones-item vm-timezones-list-group-options__item",onClick:b(e),children:[Nt("div",{className:"vm-timezones-item__title",children:[e.title,e.isInvalid&&Nt(Si,{})]}),Nt("div",{className:"vm-timezones-item__utc",children:e.utc})]},`${t}_${e.region}`)))]}),y.map((e=>Nt("div",{className:"vm-timezones-list-group",children:Nt(ki,{defaultExpanded:!0,title:Nt("div",{className:"vm-timezones-list-group__title",children:e}),children:Nt("div",{className:"vm-timezones-list-group-options",children:g[e]&&g[e].map((e=>Nt("div",{className:"vm-timezones-item vm-timezones-list-group-options__item",onClick:b(e),children:[Nt("div",{className:"vm-timezones-item__title",children:e.region}),Nt("div",{className:"vm-timezones-item__utc",children:e.utc})]},e.search)))})})},e)))]})})]})})),Ei=Ci,Ni=e=>{let{options:t,value:n,label:a,onChange:i}=e;const o=(0,r.useRef)(null),[l,s]=(0,r.useState)({width:"0px",left:"0px",borderRadius:"0px"}),c=e=>()=>{i(e)};return(0,r.useEffect)((()=>{if(!o.current)return void s({width:"0px",left:"0px",borderRadius:"0px"});const e=t.findIndex((e=>e.value===n)),{width:r}=o.current.getBoundingClientRect();let a=r,i=e*a,l="0";0===e&&(l="16px 0 0 16px"),e===t.length-1&&(l="10px",i-=1,l="0 16px 16px 0"),0!==e&&e!==t.length-1&&(a+=1,i-=1),s({width:`${a}px`,left:`${i}px`,borderRadius:l})}),[o,n,t]),Nt("div",{className:"vm-toggles",children:[a&&Nt("label",{className:"vm-toggles__label",children:a}),Nt("div",{className:"vm-toggles-group",style:{gridTemplateColumns:`repeat(${t.length}, 1fr)`},children:[l.borderRadius&&Nt("div",{className:"vm-toggles-group__highlight",style:l}),t.map(((e,t)=>Nt("div",{className:Er()({"vm-toggles-group-item":!0,"vm-toggles-group-item_first":0===t,"vm-toggles-group-item_active":e.value===n,"vm-toggles-group-item_icon":e.icon&&e.title}),onClick:c(e.value),ref:e.value===n?o:null,children:[e.icon,e.title]},e.value)))]})]})},Ai=Object.values(ft).map((e=>({title:e,value:e}))),Mi=()=>{const{isMobile:e}=ta(),t=Tt(),{theme:n}=Mt();return Nt("div",{className:Er()({"vm-theme-control":!0,"vm-theme-control_mobile":e}),children:[Nt("div",{className:"vm-server-configurator__title",children:"Theme preferences"}),Nt("div",{className:"vm-theme-control__toggle",children:Nt(Ni,{options:Ai,value:n,onChange:e=>{t({type:"SET_THEME",payload:e})}})},`${e}`)]})},Ti=e=>{let{value:t=!1,disabled:n=!1,label:r,color:a="secondary",fullWidth:i,onChange:o}=e;return Nt("div",{className:Er()({"vm-switch":!0,"vm-switch_full-width":i,"vm-switch_disabled":n,"vm-switch_active":t,[`vm-switch_${a}_active`]:t,[`vm-switch_${a}`]:a}),onClick:()=>{n||o(!t)},children:[Nt("div",{className:"vm-switch-track",children:Nt("div",{className:"vm-switch-track__thumb"})}),r&&Nt("span",{className:"vm-switch__label",children:r})]})},$i=()=>{const{isMobile:e}=ta(),{markdownParsing:t}=(0,r.useContext)(Jr).state,n=(0,r.useContext)(Jr).dispatch;return Nt("div",{children:[Nt("div",{className:"vm-server-configurator__title",children:"Markdown Parsing for Logs"}),Nt(Ti,{label:t?"Disable markdown parsing":"Enable markdown parsing",value:t,onChange:e=>{n({type:"SET_MARKDOWN_PARSING",payload:e})},fullWidth:e}),Nt("div",{className:"vm-server-configurator__info",children:"Toggle this switch to enable or disable the Markdown formatting for log entries. Enabling this will parse log texts to Markdown."})]})},Li="Settings",{REACT_APP_TYPE:Pi}={},Ii=Pi===He.logs,Oi=()=>{const{isMobile:e}=ta(),t=Qe(),n=(0,r.useRef)(null),a=(0,r.useRef)(null),i=(0,r.useRef)(null),{value:o,setTrue:l,setFalse:s}=ma(!1),c=[{show:!t&&!Ii,component:Nt(yi,{ref:n,onClose:s})},{show:!Ii,component:Nt(wi,{ref:a,onClose:s})},{show:Ii,component:Nt($i,{})},{show:!0,component:Nt(Ei,{ref:i})},{show:!t,component:Nt(Mi,{})}].filter((e=>e.show));return Nt(Ct.FK,{children:[e?Nt("div",{className:"vm-mobile-option",onClick:l,children:[Nt("span",{className:"vm-mobile-option__icon",children:Nt($n,{})}),Nt("div",{className:"vm-mobile-option-text",children:Nt("span",{className:"vm-mobile-option-text__label",children:Li})}),Nt("span",{className:"vm-mobile-option__arrow",children:Nt(Fn,{})})]}):Nt(ba,{title:Li,children:Nt(da,{className:Er()({"vm-header-button":!t}),variant:"contained",color:"primary",startIcon:Nt($n,{}),onClick:l,ariaLabel:"settings"})}),o&&Nt(_a,{title:Li,onClose:s,children:Nt("div",{className:Er()({"vm-server-configurator":!0,"vm-server-configurator_mobile":e}),children:[c.map(((e,t)=>Nt("div",{className:"vm-server-configurator__input",children:e.component},t))),Nt("div",{className:"vm-server-configurator-footer",children:[Nt(da,{color:"error",variant:"outlined",onClick:s,children:"Cancel"}),Nt(da,{color:"primary",variant:"contained",onClick:()=>{n.current&&n.current.handleApply(),a.current&&a.current.handleApply(),i.current&&i.current.handleApply(),s()},children:"Apply"})]})]})})]})},Ri=e=>{let{displaySidebar:t,isMobile:n,headerSetup:r,accountIds:a}=e;return Nt("div",{className:Er()({"vm-header-controls":!0,"vm-header-controls_mobile":n}),children:[(null===r||void 0===r?void 0:r.tenant)&&Nt(Qa,{accountIds:a||[]}),(null===r||void 0===r?void 0:r.stepControl)&&Nt(Ga,{}),(null===r||void 0===r?void 0:r.timeSelector)&&Nt(di,{}),(null===r||void 0===r?void 0:r.cardinalityDatePicker)&&Nt(mi,{}),(null===r||void 0===r?void 0:r.executionControls)&&Nt(fi,{}),Nt(Oi,{}),!t&&Nt(La,{})]})},Di=Boolean(et("DISABLED_DEFAULT_TIMEZONE")),zi=()=>{const{serverUrl:e}=Mt(),t=vn(),[n,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),s=async()=>{if(e&&!{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1}.REACT_APP_TYPE){l(""),a(!0);try{const n=await fetch(`${e}/vmui/timezone`),r=await n.json();n.ok?((e=>{const n="local"===e.toLowerCase()?cn().region:e;try{if(i()().tz(n).isValid(),t({type:"SET_DEFAULT_TIMEZONE",payload:n}),Di)return;t({type:"SET_TIMEZONE",payload:n})}catch(Yp){Yp instanceof Error&&l(`${Yp.name}: ${Yp.message}`)}})(r.timezone),a(!1)):(l(r.error),a(!1))}catch(Yp){a(!1),Yp instanceof Error&&l(`${Yp.name}: ${Yp.message}`)}}};return(0,r.useEffect)((()=>{s()}),[e]),{isLoading:n,error:o}},Fi=()=>{const{serverUrl:e}=Mt(),t=Tt(),[n,a]=(0,r.useState)(!1),[i,o]=(0,r.useState)("");return(0,r.useEffect)((()=>{(async()=>{if(e&&!{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1}.REACT_APP_TYPE){o(""),a(!0);try{const n=new URL(e).origin,r=await fetch(`${n}/flags`),a=(await r.text()).split("\n").filter((e=>""!==e.trim())).reduce(((e,t)=>{const[n,r]=t.split("=");return e[n.trim().replace(/^-/,"").trim()]=r?r.trim().replace(/^"(.*)"$/,"$1"):null,e}),{});t({type:"SET_FLAGS",payload:a})}catch(Yp){a(!1),Yp instanceof Error&&o(`${Yp.name}: ${Yp.message}`)}}})()}),[e]),{isLoading:n,error:i}},ji=()=>{const e=Tt(),[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)("");return(0,r.useEffect)((()=>{(async()=>{if(!{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1}.REACT_APP_TYPE){i(""),n(!0);try{const t=await fetch("./config.json"),n=await t.json();e({type:"SET_APP_CONFIG",payload:n||{}})}catch(Yp){n(!1),Yp instanceof Error&&i(`${Yp.name}: ${Yp.message}`)}}})()}),[]),{isLoading:t,error:a}},Hi=()=>{const e=Qe(),{isMobile:t}=ta(),{pathname:n}=re(),[a,i]=je();Ya(),zi(),ji(),Fi();return(0,r.useEffect)((()=>{var e;const t="vmui",r=null===(e=Ye[n])||void 0===e?void 0:e.title;document.title=r?`${r} - ${t}`:t}),[n]),(0,r.useEffect)((()=>{const{search:e,href:t}=window.location;if(e){const t=at().parse(e,{ignoreQueryPrefix:!0});Object.entries(t).forEach((e=>{let[t,n]=e;return a.set(t,n)})),i(a),window.location.search=""}const n=t.replace(/\/\?#\//,"/#/");n!==t&&window.location.replace(n)}),[]),Nt("section",{className:"vm-container",children:[Nt(Ha,{controlsComponent:Ri}),Nt("div",{className:Er()({"vm-container-body":!0,"vm-container-body_mobile":t,"vm-container-body_app":e}),children:Nt(be,{})}),!e&&Nt(qa,{})]})};var Ui=function(e){return e[e.mouse=0]="mouse",e[e.keyboard=1]="keyboard",e}(Ui||{});const Vi=e=>{var t;let{value:n,options:a,anchor:i,disabled:o,minLength:l=2,fullWidth:s,selected:c,noOptionsText:u,label:d,disabledFullScreen:h,offset:m,maxDisplayResults:p,loading:f,onSelect:v,onOpenAutocomplete:g,onFoundOptions:y,onChangeWrapperRef:_}=e;const{isMobile:b}=ta(),w=(0,r.useRef)(null),[k,S]=(0,r.useState)({index:-1}),[x,C]=(0,r.useState)(""),[E,N]=(0,r.useState)(0),{value:A,setValue:M,setFalse:T}=ma(!1),$=(0,r.useMemo)((()=>{if(!A)return[];try{const e=new RegExp(String(n.trim()),"i"),t=a.filter((t=>e.test(t.value))).sort(((t,r)=>{var a,i;return t.value.toLowerCase()===n.trim().toLowerCase()?-1:r.value.toLowerCase()===n.trim().toLowerCase()?1:((null===(a=t.value.match(e))||void 0===a?void 0:a.index)||0)-((null===(i=r.value.match(e))||void 0===i?void 0:i.index)||0)}));return N(t.length),C(t.length>Number(null===p||void 0===p?void 0:p.limit)&&(null===p||void 0===p?void 0:p.message)||""),null!==p&&void 0!==p&&p.limit?t.slice(0,p.limit):t}catch(Yp){return[]}}),[A,a,n]),L=(0,r.useMemo)((()=>{var e;return 1===$.length&&(null===(e=$[0])||void 0===e?void 0:e.value)===n}),[$]),P=(0,r.useMemo)((()=>u&&!$.length),[u,$]),I=()=>{S({index:-1})},O=(0,r.useCallback)((e=>{const{key:t,ctrlKey:n,metaKey:r,shiftKey:a}=e,i=n||r||a,o=$.length&&!L;if("ArrowUp"===t&&!i&&o&&(e.preventDefault(),S((e=>{let{index:t}=e;return{index:t<=0?0:t-1,type:Ui.keyboard}}))),"ArrowDown"===t&&!i&&o){e.preventDefault();const t=$.length-1;S((e=>{let{index:n}=e;return{index:n>=t?t:n+1,type:Ui.keyboard}}))}if("Enter"===t){const e=$[k.index];e&&v(e.value),c||T()}"Escape"===t&&T()}),[k,$,L,T,v,c]);return(0,r.useEffect)((()=>{M(n.length>=l)}),[n,a]),Mr("keydown",O),(0,r.useEffect)((()=>{if(!w.current||k.type===Ui.mouse)return;const e=w.current.childNodes[k.index];null!==e&&void 0!==e&&e.scrollIntoView&&e.scrollIntoView({block:"center"})}),[k,$]),(0,r.useEffect)((()=>{S({index:-1})}),[$]),(0,r.useEffect)((()=>{g&&g(A)}),[A]),(0,r.useEffect)((()=>{y&&y(L?[]:$)}),[$,L]),(0,r.useEffect)((()=>{_&&_(w)}),[w]),Nt(ha,{open:A,buttonRef:i,placement:"bottom-left",onClose:T,fullWidth:s,title:b?d:void 0,disabledFullScreen:h,offset:m,children:[Nt("div",{className:Er()({"vm-autocomplete":!0,"vm-autocomplete_mobile":b&&!h}),ref:w,children:[f&&Nt("div",{className:"vm-autocomplete__loader",children:[Nt(zn,{}),Nt("span",{children:"Loading..."})]}),P&&Nt("div",{className:"vm-autocomplete__no-options",children:u}),!L&&$.map(((e,t)=>{return Nt("div",{className:Er()({"vm-list-item":!0,"vm-list-item_mobile":b,"vm-list-item_active":t===k.index,"vm-list-item_multiselect":c,"vm-list-item_multiselect_selected":null===c||void 0===c?void 0:c.includes(e.value),"vm-list-item_with-icon":e.icon}),id:`$autocomplete$${e.value}`,onClick:(r=e.value,()=>{o||(v(r),c||T())}),onMouseEnter:(n=t,()=>{S({index:n,type:Ui.mouse})}),onMouseLeave:I,children:[(null===c||void 0===c?void 0:c.includes(e.value))&&Nt(Xn,{}),Nt(Ct.FK,{children:e.icon}),Nt("span",{children:e.value})]},`${t}${e.value}`);var n,r}))]}),x&&Nt("div",{className:"vm-autocomplete-message",children:["Shown ",null===p||void 0===p?void 0:p.limit," results out of ",E,". ",x]}),(null===(t=$[k.index])||void 0===t?void 0:t.description)&&Nt("div",{className:"vm-autocomplete-info",children:[Nt("div",{className:"vm-autocomplete-info__type",children:$[k.index].type}),Nt("div",{className:"vm-autocomplete-info__description",dangerouslySetInnerHTML:{__html:$[k.index].description||""}})]})]})};var Bi=n(267),qi=n.n(Bi);const Yi=e=>e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),Wi=e=>JSON.stringify(e).slice(1,-1),Ki=e=>{const t=e.match(/["`']/g);return!!t&&t.length%2!==0};var Qi=function(e){return e.metric="metric",e.label="label",e.labelValue="labelValue",e}(Qi||{});const Zi={[Qi.metric]:Nt(vr,{}),[Qi.label]:Nt(yr,{}),[Qi.labelValue]:Nt(_r,{})};function Gi(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ji={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Xi(e){Ji=e}const eo=/[&<>"']/,to=new RegExp(eo.source,"g"),no=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ro=new RegExp(no.source,"g"),ao={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},io=e=>ao[e];function oo(e,t){if(t){if(eo.test(e))return e.replace(to,io)}else if(no.test(e))return e.replace(ro,io);return e}const lo=/(^|[^\[])\^/g;function so(e,t){let n="string"===typeof e?e:e.source;t=t||"";const r={replace:(e,t)=>{let a="string"===typeof t?t:t.source;return a=a.replace(lo,"$1"),n=n.replace(e,a),r},getRegex:()=>new RegExp(n,t)};return r}function co(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const uo={exec:()=>null};function ho(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,a=t;for(;--a>=0&&"\\"===n[a];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function mo(e,t,n){const r=e.length;if(0===r)return"";let a=0;for(;a<r;){const i=e.charAt(r-a-1);if(i!==t||n){if(i===t||!n)break;a++}else a++}return e.slice(0,r-a)}function po(e,t,n,r){const a=t.href,i=t.title?oo(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:a,title:i,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:a,title:i,text:oo(o)}}class fo{options;rules;lexer;constructor(e){this.options=e||Ji}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:mo(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=mo(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:mo(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=mo(t[0],"\n").split("\n"),n="",r="";const a=[];for(;e.length>0;){let t=!1;const i=[];let o;for(o=0;o<e.length;o++)if(/^ {0,3}>/.test(e[o]))i.push(e[o]),t=!0;else{if(t)break;i.push(e[o])}e=e.slice(o);const l=i.join("\n"),s=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}\n${l}`:l,r=r?`${r}\n${s}`:s;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(s,a,!0),this.lexer.state.top=c,0===e.length)break;const u=a[a.length-1];if("code"===u?.type)break;if("blockquote"===u?.type){const t=u,i=t.raw+"\n"+e.join("\n"),o=this.blockquote(i);a[a.length-1]=o,n=n.substring(0,n.length-t.raw.length)+o.raw,r=r.substring(0,r.length-t.text.length)+o.text;break}if("list"!==u?.type);else{const t=u,i=t.raw+"\n"+e.join("\n"),o=this.list(i);a[a.length-1]=o,n=n.substring(0,n.length-u.raw.length)+o.raw,r=r.substring(0,r.length-t.raw.length)+o.raw,e=i.substring(a[a.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:a,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,a={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let n=!1,r="",l="";if(!(t=i.exec(e)))break;if(this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let s=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],u=!s.trim(),d=0;if(this.options.pedantic?(d=2,l=s.trimStart()):u?d=t[1].length+1:(d=t[2].search(/[^ ]/),d=d>4?1:d,l=s.slice(d),d+=t[1].length),u&&/^[ \t]*$/.test(c)&&(r+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),a=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),i=new RegExp(`^ {0,${Math.min(3,d-1)}}#`),o=new RegExp(`^ {0,${Math.min(3,d-1)}}<[a-z].*>`,"i");for(;e;){const h=e.split("\n",1)[0];let m;if(c=h,this.options.pedantic?(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),m=c):m=c.replace(/\t/g,"    "),a.test(c))break;if(i.test(c))break;if(o.test(c))break;if(t.test(c))break;if(n.test(c))break;if(m.search(/[^ ]/)>=d||!c.trim())l+="\n"+m.slice(d);else{if(u)break;if(s.replace(/\t/g,"    ").search(/[^ ]/)>=4)break;if(a.test(s))break;if(i.test(s))break;if(n.test(s))break;l+="\n"+c}u||c.trim()||(u=!0),r+=h+"\n",e=e.substring(h.length+1),s=m.slice(d)}}a.loose||(o?a.loose=!0:/\n[ \t]*\n[ \t]*$/.test(r)&&(o=!0));let h,m=null;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(h="[ ] "!==m[0],l=l.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:r,task:!!m,checked:h,loose:!1,text:l,tokens:[]}),a.raw+=r}a.items[a.items.length-1].raw=a.items[a.items.length-1].raw.trimEnd(),a.items[a.items.length-1].text=a.items[a.items.length-1].text.trimEnd(),a.raw=a.raw.trimEnd();for(let e=0;e<a.items.length;e++)if(this.lexer.state.top=!1,a.items[e].tokens=this.lexer.blockTokens(a.items[e].text,[]),!a.loose){const t=a.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));a.loose=n}if(a.loose)for(let e=0;e<a.items.length;e++)a.items[e].loose=!0;return a}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=ho(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),a=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const e of r)/^ *-+: *$/.test(e)?i.align.push("right"):/^ *:-+: *$/.test(e)?i.align.push("center"):/^ *:-+ *$/.test(e)?i.align.push("left"):i.align.push(null);for(let e=0;e<n.length;e++)i.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:i.align[e]});for(const e of a)i.rows.push(ho(e,i.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:i.align[t]}))));return i}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:oo(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=mo(e.slice(0,-1),"\\");if((e.length-t.length)%2===0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),po(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return po(n,e,n[0],this.lexer)}}emStrong(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.rules.inline.emStrongLDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...r[0]].length-1;let a,i,o=n,l=0;const s="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(s.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=s.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(i=[...a].length,r[3]||r[4]){o+=i;continue}if((r[5]||r[6])&&n%3&&!((n+i)%3)){l+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+l);const t=[...r[0]][0].length,s=e.slice(0,n+r.index+t+i);if(Math.min(n,i)%2){const e=s.slice(1,-1);return{type:"em",raw:s,text:e,tokens:this.lexer.inlineTokens(e)}}const c=s.slice(2,-2);return{type:"strong",raw:s,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=oo(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=oo(t[1]),n="mailto:"+e):(e=oo(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])e=oo(t[0]),r="mailto:"+e;else{let a;do{var n;a=t[0],t[0]=null!==(n=this.rules.inline._backpedal.exec(t[0])?.[0])&&void 0!==n?n:""}while(a!==t[0]);e=oo(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:oo(t[0]),{type:"text",raw:t[0],text:e}}}}const vo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,go=/(?:[*+-]|\d{1,9}[.)])/,yo=so(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,go).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_o=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,bo=/(?!\s*\])(?:\\.|[^\[\]\\])+/,wo=so(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",bo).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ko=so(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,go).getRegex(),So="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",xo=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Co=so("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",xo).replace("tag",So).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Eo=so(_o).replace("hr",vo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",So).getRegex(),No={blockquote:so(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Eo).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:wo,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:vo,html:Co,lheading:yo,list:ko,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Eo,table:uo,text:/^[^\n]+/},Ao=so("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",vo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",So).getRegex(),Mo={...No,table:Ao,paragraph:so(_o).replace("hr",vo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ao).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",So).getRegex()},To={...No,html:so("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",xo).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:uo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:so(_o).replace("hr",vo).replace("heading"," *#{1,6} *[^\n]").replace("lheading",yo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},$o=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Lo=/^( {2,}|\\)\n(?!\s*$)/,Po="\\p{P}\\p{S}",Io=so(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Po).getRegex(),Oo=so(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Po).getRegex(),Ro=so("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Po).getRegex(),Do=so("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Po).getRegex(),zo=so(/\\([punct])/,"gu").replace(/punct/g,Po).getRegex(),Fo=so(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jo=so(xo).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ho=so("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Uo=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Vo=so(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Uo).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Bo=so(/^!?\[(label)\]\[(ref)\]/).replace("label",Uo).replace("ref",bo).getRegex(),qo=so(/^!?\[(ref)\](?:\[\])?/).replace("ref",bo).getRegex(),Yo={_backpedal:uo,anyPunctuation:zo,autolink:Fo,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Lo,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:uo,emStrongLDelim:Oo,emStrongRDelimAst:Ro,emStrongRDelimUnd:Do,escape:$o,link:Vo,nolink:qo,punctuation:Io,reflink:Bo,reflinkSearch:so("reflink|nolink(?!\\()","g").replace("reflink",Bo).replace("nolink",qo).getRegex(),tag:Ho,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:uo},Wo={...Yo,link:so(/^!?\[(label)\]\((.*?)\)/).replace("label",Uo).getRegex(),reflink:so(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Uo).getRegex()},Ko={...Yo,escape:so($o).replace("])","~|])").getRegex(),url:so(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Qo={...Ko,br:so(Lo).replace("{2,}","*").getRegex(),text:so(Ko.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zo={normal:No,gfm:Mo,pedantic:To},Go={normal:Yo,gfm:Ko,breaks:Qo,pedantic:Wo};class Jo{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ji,this.options.tokenizer=this.options.tokenizer||new fo,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Zo.normal,inline:Go.normal};this.options.pedantic?(t.block=Zo.pedantic,t.inline=Go.pedantic):this.options.gfm&&(t.block=Zo.gfm,this.options.breaks?t.inline=Go.breaks:t.inline=Go.gfm),this.tokenizer.rules=t}static get rules(){return{block:Zo,inline:Go}}static lex(e,t){return new Jo(t).lex(e)}static lexInline(e,t){return new Jo(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e){let t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(t=n.call({lexer:this},e,a))&&(e=e.substring(t.raw.length),a.push(t),!0)))))if(t=this.tokenizer.space(e))e=e.substring(t.raw.length),1===t.raw.length&&a.length>0?a[a.length-1].raw+="\n":a.push(t);else if(t=this.tokenizer.code(e))e=e.substring(t.raw.length),n=a[a.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?a.push(t):(n.raw+="\n"+t.raw,n.text+="\n"+t.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(t=this.tokenizer.fences(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.heading(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.hr(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.blockquote(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.list(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.html(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.def(e))e=e.substring(t.raw.length),n=a[a.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title}):(n.raw+="\n"+t.raw,n.text+="\n"+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(t=this.tokenizer.table(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.lheading(e))e=e.substring(t.raw.length),a.push(t);else{if(r=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let a;this.options.extensions.startBlock.forEach((e=>{a=e.call({lexer:this},n),"number"===typeof a&&a>=0&&(t=Math.min(t,a))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(this.state.top&&(t=this.tokenizer.paragraph(r)))n=a[a.length-1],i&&"paragraph"===n?.type?(n.raw+="\n"+t.raw,n.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(t),i=r.length!==e.length,e=e.substring(t.raw.length);else if(t=this.tokenizer.text(e))e=e.substring(t.raw.length),n=a[a.length-1],n&&"text"===n.type?(n.raw+="\n"+t.raw,n.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,a}inline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e){let t,n,r,a,i,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)e.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(i||(o=""),i=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(t=n.call({lexer:this},e,l))&&(e=e.substring(t.raw.length),l.push(t),!0)))))if(t=this.tokenizer.escape(e))e=e.substring(t.raw.length),l.push(t);else if(t=this.tokenizer.tag(e))e=e.substring(t.raw.length),n=l[l.length-1],n&&"text"===t.type&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):l.push(t);else if(t=this.tokenizer.link(e))e=e.substring(t.raw.length),l.push(t);else if(t=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(t.raw.length),n=l[l.length-1],n&&"text"===t.type&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):l.push(t);else if(t=this.tokenizer.emStrong(e,s,o))e=e.substring(t.raw.length),l.push(t);else if(t=this.tokenizer.codespan(e))e=e.substring(t.raw.length),l.push(t);else if(t=this.tokenizer.br(e))e=e.substring(t.raw.length),l.push(t);else if(t=this.tokenizer.del(e))e=e.substring(t.raw.length),l.push(t);else if(t=this.tokenizer.autolink(e))e=e.substring(t.raw.length),l.push(t);else if(this.state.inLink||!(t=this.tokenizer.url(e))){if(r=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let a;this.options.extensions.startInline.forEach((e=>{a=e.call({lexer:this},n),"number"===typeof a&&a>=0&&(t=Math.min(t,a))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(t=this.tokenizer.inlineText(r))e=e.substring(t.raw.length),"_"!==t.raw.slice(-1)&&(o=t.raw.slice(-1)),i=!0,n=l[l.length-1],n&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):l.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(t.raw.length),l.push(t);return l}}class Xo{options;parser;constructor(e){this.options=e||Ji}space(e){return""}code(e){let{text:t,lang:n,escaped:r}=e;const a=(n||"").match(/^\S*/)?.[0],i=t.replace(/\n$/,"")+"\n";return a?'<pre><code class="language-'+oo(a)+'">'+(r?i:oo(i,!0))+"</code></pre>\n":"<pre><code>"+(r?i:oo(i,!0))+"</code></pre>\n"}blockquote(e){let{tokens:t}=e;return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html(e){let{text:t}=e;return t}heading(e){let{tokens:t,depth:n}=e;return`<h${n}>${this.parser.parseInline(t)}</h${n}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let r="";for(let i=0;i<e.items.length;i++){const t=e.items[i];r+=this.listitem(t)}const a=t?"ol":"ul";return"<"+a+(t&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+a+">\n"}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox(e){let{checked:t}=e;return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){let{tokens:t}=e;return`<p>${this.parser.parseInline(t)}</p>\n`}table(e){let t="",n="";for(let a=0;a<e.header.length;a++)n+=this.tablecell(e.header[a]);t+=this.tablerow({text:n});let r="";for(let a=0;a<e.rows.length;a++){const t=e.rows[a];n="";for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow(e){let{text:t}=e;return`<tr>\n${t}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong(e){let{tokens:t}=e;return`<strong>${this.parser.parseInline(t)}</strong>`}em(e){let{tokens:t}=e;return`<em>${this.parser.parseInline(t)}</em>`}codespan(e){let{text:t}=e;return`<code>${t}</code>`}br(e){return"<br>"}del(e){let{tokens:t}=e;return`<del>${this.parser.parseInline(t)}</del>`}link(e){let{href:t,title:n,tokens:r}=e;const a=this.parser.parseInline(r),i=co(t);if(null===i)return a;t=i;let o='<a href="'+t+'"';return n&&(o+=' title="'+n+'"'),o+=">"+a+"</a>",o}image(e){let{href:t,title:n,text:r}=e;const a=co(t);if(null===a)return r;t=a;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class el{strong(e){let{text:t}=e;return t}em(e){let{text:t}=e;return t}codespan(e){let{text:t}=e;return t}del(e){let{text:t}=e;return t}html(e){let{text:t}=e;return t}text(e){let{text:t}=e;return t}link(e){let{text:t}=e;return""+t}image(e){let{text:t}=e;return""+t}br(){return""}}class tl{options;renderer;textRenderer;constructor(e){this.options=e||Ji,this.options.renderer=this.options.renderer||new Xo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new el}static parse(e,t){return new tl(t).parse(e)}static parseInline(e,t){return new tl(t).parseInline(e)}parse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="";for(let r=0;r<e.length;r++){const a=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const e=a,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}const i=a;switch(i.type){case"space":n+=this.renderer.space(i);continue;case"hr":n+=this.renderer.hr(i);continue;case"heading":n+=this.renderer.heading(i);continue;case"code":n+=this.renderer.code(i);continue;case"table":n+=this.renderer.table(i);continue;case"blockquote":n+=this.renderer.blockquote(i);continue;case"list":n+=this.renderer.list(i);continue;case"html":n+=this.renderer.html(i);continue;case"paragraph":n+=this.renderer.paragraph(i);continue;case"text":{let a=i,o=this.renderer.text(a);for(;r+1<e.length&&"text"===e[r+1].type;)a=e[++r],o+="\n"+this.renderer.text(a);n+=t?this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o}]}):o;continue}default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){const a=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const e=this.options.extensions.renderers[a.type].call({parser:this},a);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){n+=e||"";continue}}const i=a;switch(i.type){case"escape":case"text":n+=t.text(i);break;case"html":n+=t.html(i);break;case"link":n+=t.link(i);break;case"image":n+=t.image(i);break;case"strong":n+=t.strong(i);break;case"em":n+=t.em(i);break;case"codespan":n+=t.codespan(i);break;case"br":n+=t.br(i);break;case"del":n+=t.del(i);break;default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class nl{options;block;constructor(e){this.options=e||Ji}static passThroughHooks=(()=>new Set(["preprocess","postprocess","processAllTokens"]))();preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Jo.lex:Jo.lexInline}provideParser(){return this.block?tl.parse:tl.parseInline}}const rl=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=(()=>tl)();Renderer=(()=>Xo)();TextRenderer=(()=>el)();Lexer=(()=>Jo)();Tokenizer=(()=>fo)();Hooks=(()=>nl)();constructor(){this.use(...arguments)}walkTokens(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const e=r;for(const r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(const r of e.rows)for(const e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((r=>{const a=e[r].flat(1/0);n=n.concat(this.walkTokens(a,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(){const e=this.defaults.extensions||{renderers:{},childTokens:{}};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){const n=e.renderers[t.name];e.renderers[t.name]=n?function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];let i=t.renderer.apply(this,r);return!1===i&&(i=n.apply(this,r)),i}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");const n=e[t.level];n?n.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),n.extensions=e),t.renderer){const e=this.defaults.renderer||new Xo(this.defaults);for(const n in t.renderer){if(!(n in e))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const r=n,a=t.renderer[r],i=e[r];e[r]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=a.apply(e,n);return!1===o&&(o=i.apply(e,n)),o||""}}n.renderer=e}if(t.tokenizer){const e=this.defaults.tokenizer||new fo(this.defaults);for(const n in t.tokenizer){if(!(n in e))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const r=n,a=t.tokenizer[r],i=e[r];e[r]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=a.apply(e,n);return!1===o&&(o=i.apply(e,n)),o}}n.tokenizer=e}if(t.hooks){const e=this.defaults.hooks||new nl;for(const n in t.hooks){if(!(n in e))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const r=n,a=t.hooks[r],i=e[r];nl.passThroughHooks.has(n)?e[r]=t=>{if(this.defaults.async)return Promise.resolve(a.call(e,t)).then((t=>i.call(e,t)));const n=a.call(e,t);return i.call(e,n)}:e[r]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=a.apply(e,n);return!1===o&&(o=i.apply(e,n)),o}}n.hooks=e}if(t.walkTokens){const e=this.defaults.walkTokens,r=t.walkTokens;n.walkTokens=function(t){let n=[];return n.push(r.call(this,t)),e&&(n=n.concat(e.call(this,t))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Jo.lex(e,null!==t&&void 0!==t?t:this.defaults)}parser(e,t){return tl.parse(e,null!==t&&void 0!==t?t:this.defaults)}parseMarkdown(e){return(t,n)=>{const r={...n},a={...this.defaults,...r},i=this.onError(!!a.silent,!!a.async);if(!0===this.defaults.async&&!1===r.async)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if("undefined"===typeof t||null===t)return i(new Error("marked(): input parameter is undefined or null"));if("string"!==typeof t)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=e);const o=a.hooks?a.hooks.provideLexer():e?Jo.lex:Jo.lexInline,l=a.hooks?a.hooks.provideParser():e?tl.parse:tl.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(t):t).then((e=>o(e,a))).then((e=>a.hooks?a.hooks.processAllTokens(e):e)).then((e=>a.walkTokens?Promise.all(this.walkTokens(e,a.walkTokens)).then((()=>e)):e)).then((e=>l(e,a))).then((e=>a.hooks?a.hooks.postprocess(e):e)).catch(i);try{a.hooks&&(t=a.hooks.preprocess(t));let e=o(t,a);a.hooks&&(e=a.hooks.processAllTokens(e)),a.walkTokens&&this.walkTokens(e,a.walkTokens);let n=l(e,a);return a.hooks&&(n=a.hooks.postprocess(n)),n}catch(Yp){return i(Yp)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+oo(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function al(e,t){return rl.parse(e,t)}al.options=al.setOptions=function(e){return rl.setOptions(e),al.defaults=rl.defaults,Xi(al.defaults),al},al.getDefaults=Gi,al.defaults=Ji,al.use=function(){return rl.use(...arguments),al.defaults=rl.defaults,Xi(al.defaults),al},al.walkTokens=function(e,t){return rl.walkTokens(e,t)},al.parseInline=rl.parseInline,al.Parser=tl,al.parser=tl.parse,al.Renderer=Xo,al.TextRenderer=el,al.Lexer=Jo,al.lexer=Jo.lex,al.Tokenizer=fo,al.Hooks=nl,al.parse=al;al.options,al.setOptions,al.use,al.walkTokens,al.parseInline,tl.parse,Jo.lex;const il=n.p+"static/media/MetricsQL.a00044c91d9781cf8557.md",ol=e=>{let t="";return Array.from(e).map((e=>{var n;const r="h3"===e.tagName.toLowerCase();return t=r?null!==(n=e.textContent)&&void 0!==n?n:"":t,r?null:((e,t)=>{var n;const r=null!==(n=t.textContent)&&void 0!==n?n:"",a=(e=>{const t=[];let n=e.nextElementSibling;for(;n&&"p"===n.tagName.toLowerCase();)n&&t.push(n),n=n.nextElementSibling;return t})(t).map((e=>{var t;return null!==(t=e.outerHTML)&&void 0!==t?t:""})).join("\n");return{type:e,value:r,description:(i=a,i.replace(/(<a) (href=")#/gm,'$1 target="_blank" class="vm-link vm-link_colored" $2https://docs.victoriametrics.com/MetricsQL.html#')),icon:Nt(gr,{})};var i})(t,e)})).filter(Boolean)},ll=e=>{const{metricsQLFunctions:t}=Cn(),n=En();return(0,r.useEffect)((()=>{if(!e||t.length)return;(async()=>{try{const e=await fetch(il),t=(e=>{const t=document.createElement("div");t.innerHTML=al(e);const n=t.querySelectorAll("h3, h4");return ol(n)})(await e.text());n({type:"SET_METRICSQL_FUNCTIONS",payload:t})}catch(Yp){console.error("Error fetching or processing the MetricsQL.md file:",Yp)}})()}),[]),e?t:[]},sl=e=>{let{value:t,anchorEl:n,caretPosition:a,hasHelperText:o,includeFunctions:l,onSelect:s,onFoundOptions:c}=e;const[u,d]=(0,r.useState)({top:0,left:0}),h=ll(l),m=(0,r.useMemo)((()=>{if(a[0]!==a[1])return{beforeCursor:t,afterCursor:""};return{beforeCursor:t.substring(0,a[0]),afterCursor:t.substring(a[1])}}),[t,a]),p=(0,r.useMemo)((()=>{const e=m.beforeCursor.split(/\s(or|and|unless|default|ifnot|if|group_left|group_right)\s|}|\+|\|-|\*|\/|\^/i);return e[e.length-1]}),[m]),f=(0,r.useMemo)((()=>{const e=[...p.matchAll(/\w+\((?<metricName>[^)]+)\)\s+(by|without|on|ignoring)\s*\(\w*/gi)];if(e.length>0&&e[0].groups&&e[0].groups.metricName)return e[0].groups.metricName;const t=[...p.matchAll(/^\s*\b(?<metricName>[^{}(),\s]+)(?={|$)/g)];return t.length>0&&t[0].groups&&t[0].groups.metricName?t[0].groups.metricName:""}),[p]),v=(0,r.useMemo)((()=>{const e=p.match(/[a-z_:-][\w\-.:/]*\b(?=\s*(=|!=|=~|!~))/g);return e?e[e.length-1]:""}),[p]),g=(0,r.useMemo)((()=>{const e=m.beforeCursor.trim(),t=["}",")"].some((t=>e.endsWith(t))),n=!Ki(e)&&["`","'",'"'].some((t=>e.endsWith(t)));if(!m.beforeCursor||t||n||(e=>{const t=e.split(/\s+/),n=t.length,r=t[n-1],a=t[n-2],i=!r&&Ki(e),o=(!r||t.length>1)&&!/([{(),+\-*/^]|\b(?:or|and|unless|default|ifnot|if|group_left|group_right|by|without|on|ignoring)\b)/i.test(a);return i||o})(m.beforeCursor))return vt.empty;const r=/(?:by|without|on|ignoring)\s*\(\s*[^)]*$|\{[^}]*$/i,a=`(${Yi(f)})?{?.+${Yi(v)}(=|!=|=~|!~)"?([^"]*)$`;switch(!0){case new RegExp(a,"g").test(m.beforeCursor):return vt.labelValue;case r.test(m.beforeCursor):return vt.label;default:return vt.metricsql}}),[m,f,v]),y=(0,r.useMemo)((()=>{const e=m.beforeCursor.match(/([\w_.:]+(?![},]))$/);return e?e[0]:""}),[m.beforeCursor]),{metrics:_,labels:b,labelValues:w,loading:k}=(e=>{let{valueByContext:t,metric:n,label:a,context:o}=e;const{serverUrl:l}=Mt(),{period:{start:s,end:c}}=fn(),{autocompleteCache:u}=Cn(),d=En(),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(t),v=qi()(f,500);(0,r.useEffect)((()=>(v(t),v.cancel)),[t,v]);const[g,y]=(0,r.useState)([]),[_,b]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),S=(0,r.useRef)(new AbortController),x=(0,r.useCallback)((e=>{const t=i()(1e3*s).startOf("day").valueOf()/1e3,n=i()(1e3*c).endOf("day").valueOf()/1e3;return new URLSearchParams({...e||{},limit:`${_n}`,start:`${t}`,end:`${n}`})}),[s,c]),C=(e,t)=>e.map((e=>({value:e,type:`${t}`,icon:Zi[t]}))),E=async e=>{let{value:t,urlSuffix:n,setter:r,type:a,params:i}=e;if(!t&&a===Qi.metric)return;S.current.abort(),S.current=new AbortController;const{signal:o}=S.current,s={type:a,value:t,start:(null===i||void 0===i?void 0:i.get("start"))||"",end:(null===i||void 0===i?void 0:i.get("end"))||"",match:(null===i||void 0===i?void 0:i.get("match[]"))||""};m(!0);try{const e=u.get(s);if(e)return r(C(e,a)),void m(!1);const t=await fetch(`${l}/api/v1/${n}?${i}`,{signal:o});if(t.ok){const{data:e}=await t.json();r(C(e,a)),d({type:"SET_AUTOCOMPLETE_CACHE",payload:{key:s,value:e}})}m(!1)}catch(Yp){Yp instanceof Error&&"AbortError"!==Yp.name&&(d({type:"SET_AUTOCOMPLETE_CACHE",payload:{key:s,value:[]}}),m(!1),console.error(Yp))}};return(0,r.useEffect)((()=>{const e=o!==vt.metricsql&&o!==vt.empty;if(!l||!n||e)return;y([]);const t=Wi(Yi(n));return E({value:p,urlSuffix:"label/__name__/values",setter:y,type:Qi.metric,params:x({"match[]":`{__name__=~".*${t}.*"}`})}),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.abort()}}),[l,p,o,n]),(0,r.useEffect)((()=>{if(!l||o!==vt.label)return;b([]);const e=Wi(n);return E({value:p,urlSuffix:"labels",setter:b,type:Qi.label,params:x(n?{"match[]":`{__name__="${e}"}`}:void 0)}),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.abort()}}),[l,p,o,n]),(0,r.useEffect)((()=>{if(!l||!a||o!==vt.labelValue)return;k([]);const e=Wi(n),t=Wi(Yi(p)),r=[n?`__name__="${e}"`:"",`${a}=~".*${t}.*"`].filter(Boolean).join(",");return E({value:p,urlSuffix:`label/${a}/values`,setter:k,type:Qi.labelValue,params:x({"match[]":`{${r}}`})}),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.abort()}}),[l,p,o,n,a]),{metrics:g,labels:_,labelValues:w,loading:h}})({valueByContext:y,metric:f,label:v,context:g}),S=(0,r.useMemo)((()=>{switch(g){case vt.metricsql:return[..._,...h];case vt.label:return b;case vt.labelValue:return w;default:return[]}}),[g,_,b,w]),x=(0,r.useCallback)((e=>{const t=m.beforeCursor;let n=m.afterCursor;const r=t.lastIndexOf(y,a[0]),i=r+y.length,o=t.substring(0,r),l=t.substring(i);if(g===vt.labelValue){const t='"';n=n.replace(/^[^\s"|},]*/,"");e=`${/(?:=|!=|=~|!~)$/.test(o)?t:""}${e}${'"'!==n.trim()[0]?t:""}`}g===vt.label&&(n=n.replace(/^[^\s=!,{}()"|+\-/*^]*/,"")),g===vt.metricsql&&(n=n.replace(/^[^\s[\]{}()"|+\-/*^]*/,""));s(`${o}${e}${l}${n}`,o.length+e.length)}),[m]);return(0,r.useEffect)((()=>{if(!n.current)return void d({top:0,left:0});const e=n.current.querySelector("textarea")||n.current,t=window.getComputedStyle(e),r=`${t.getPropertyValue("font-size")}`,a=`${t.getPropertyValue("font-family")}`,i=parseInt(`${t.getPropertyValue("line-height")}`),l=document.createElement("div");l.style.font=`${r} ${a}`,l.style.padding=t.getPropertyValue("padding"),l.style.lineHeight=`${i}px`,l.style.width=`${e.offsetWidth}px`,l.style.maxWidth=`${e.offsetWidth}px`,l.style.whiteSpace=t.getPropertyValue("white-space"),l.style.overflowWrap=t.getPropertyValue("overflow-wrap");const s=document.createElement("span");l.appendChild(document.createTextNode(m.beforeCursor)),l.appendChild(s),l.appendChild(document.createTextNode(m.afterCursor)),document.body.appendChild(l);const c=l.getBoundingClientRect(),u=s.getBoundingClientRect(),h=u.left-c.left,p=u.bottom-c.bottom-(o?i:0);d({top:p,left:h}),l.remove(),s.remove()}),[n,a,o]),Nt(Ct.FK,{children:Nt(Vi,{loading:k,disabledFullScreen:!0,value:y,options:S,anchor:n,minLength:0,offset:u,onSelect:x,onFoundOptions:c,maxDisplayResults:{limit:yn,message:"Please, specify the query more precisely."}})})},cl="No match! \nThis query hasn't selected any time series from database.\nEither the requested metrics are missing in the database,\nor there is a typo in series selector.",ul="The shown results are marked as PARTIAL.\nThe result is marked as partial if one or more vmstorage nodes failed to respond to the query.",dl=e=>{let{value:t,onChange:n,onEnter:a,onArrowUp:i,onArrowDown:o,autocomplete:l,error:s,stats:c,label:u,disabled:d=!1,includeFunctions:h=!0}=e;const{autocompleteQuick:m}=Cn(),{isMobile:p}=ta(),[f,v]=(0,r.useState)(!1),[g,y]=(0,r.useState)([0,0]),_=(0,r.useRef)(null),[b,w]=(0,r.useState)(l),k=(0,r.useRef)(qi()(w,500)).current,S=[{show:"0"===(null===c||void 0===c?void 0:c.seriesFetched)&&!c.resultLength,text:cl},{show:null===c||void 0===c?void 0:c.isPartial,text:ul}].filter((e=>e.show)).map((e=>e.text)).join("");c&&(u=`${u} (${c.executionTimeMsec||0}ms)`);return(0,r.useEffect)((()=>{v(l)}),[m]),(0,r.useEffect)((()=>{w(!1),k(!0)}),[g]),Nt("div",{className:"vm-query-editor",ref:_,children:[Nt(Ka,{value:t,label:u,type:"textarea",autofocus:!p,error:s,warning:S,onKeyDown:e=>{const{key:t,ctrlKey:n,metaKey:r,shiftKey:l}=e,s=(e.target.value||"").split("\n").length>1,c=n||r,u="ArrowDown"===t,d="Enter"===t;"ArrowUp"===t&&c&&(e.preventDefault(),i()),u&&c&&(e.preventDefault(),o()),d&&f&&e.preventDefault(),!d||l||s&&!c||f||(e.preventDefault(),a())},onChange:n,onChangeCaret:e=>{y((t=>t[0]===e[0]&&t[1]===e[1]?t:e))},disabled:d,inputmode:"search",caretPosition:g}),b&&l&&Nt(sl,{value:t,anchorEl:_,caretPosition:g,hasHelperText:Boolean(S||s),includeFunctions:h,onSelect:(e,t)=>{n(e),y([t,t])},onFoundOptions:e=>{v(!!e.length)}})]})},hl=e=>{let{isMobile:t,hideButtons:n}=e;const{autocomplete:r}=Cn(),a=En(),{nocache:i,isTracingEnabled:o,reduceMemUsage:l}=Fr(),s=jr();return Mr("keydown",(e=>{const{code:t,ctrlKey:n,altKey:r}=e;"Space"===t&&(n||r)&&(e.preventDefault(),a({type:"SET_AUTOCOMPLETE_QUICK",payload:!0}))})),Nt("div",{className:Er()({"vm-additional-settings":!0,"vm-additional-settings_mobile":t}),children:[!(null!==n&&void 0!==n&&n.autocomplete)&&Nt(ba,{title:Nt(Ct.FK,{children:["Quick tip: ",Na]}),children:Nt(Ti,{label:"Autocomplete",value:r,onChange:()=>{a({type:"TOGGLE_AUTOCOMPLETE"})},fullWidth:t})}),!(null!==n&&void 0!==n&&n.disableCache)&&Nt(Ti,{label:"Disable cache",value:i,onChange:()=>{s({type:"TOGGLE_NO_CACHE"})},fullWidth:t}),!(null!==n&&void 0!==n&&n.reduceMemUsage)&&Nt(Ti,{label:"Disable deduplication",value:l,onChange:()=>{s({type:"TOGGLE_REDUCE_MEM_USAGE"})},fullWidth:t}),!(null!==n&&void 0!==n&&n.traceQuery)&&Nt(Ti,{label:"Trace query",value:o,onChange:()=>{s({type:"TOGGLE_QUERY_TRACING"})},fullWidth:t})]})},ml=e=>{const{isMobile:t}=ta(),n=(0,r.useRef)(null),{value:a,toggle:i,setFalse:o}=ma(!1);return t?Nt(Ct.FK,{children:[Nt("div",{ref:n,children:Nt(da,{variant:"outlined",startIcon:Nt(dr,{}),onClick:i,ariaLabel:"additional the query settings"})}),Nt(ha,{open:a,buttonRef:n,placement:"bottom-left",onClose:o,title:"Query settings",children:Nt(hl,{isMobile:t,...e})})]}):Nt(hl,{...e})},pl=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n]));const fl=()=>{const{showInfoMessage:e}=(0,r.useContext)(aa);return async(t,n)=>{var r;if(null===(r=navigator)||void 0===r||!r.clipboard)return e({text:Nt(vl,{}),type:"error",timeout:2e4}),!1;try{return await navigator.clipboard.writeText(t),n&&e({text:n,type:"success"}),!0}catch(a){return a instanceof Error&&e({text:`${a.name}: ${a.message}`,type:"error"}),console.warn("Copy failed",a),!1}}},vl=()=>Nt("div",{className:"vm-snackbar-details",children:[Nt("p",{className:"vm-snackbar-details__title",children:"Clipboard not supported"}),window.isSecureContext?Nt("p",{className:"vm-snackbar-details__msg",children:[Nt("p",{children:"Common reasons:"}),Nt("ul",{children:[Nt("li",{children:"Browser restrictions"}),Nt("li",{children:"Insecure connection (HTTP)"}),Nt("li",{children:"Permissions not granted"})]}),Nt("p",{children:["For detailed information, visit the ",Nt("a",{className:"vm-link vm-link_underlined vm-link_colored",href:"https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API#security_considerations",target:"_blank",rel:"noopener noreferrer",children:"Clipboard API documentation"})]})]}):Nt("p",{className:"vm-snackbar-details__msg",children:[Nt("p",{children:"This page is not running in a secure context (HTTPS)."}),Nt("p",{children:"Clipboard operations require a secure context."}),Nt("a",{className:"vm-link vm-link_underlined vm-link_colored",href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",target:"_blank",rel:"noopener noreferrer",children:"Learn more about secure contexts"})]})]}),gl=e=>{let{query:t,favorites:n,onRun:a,onToggleFavorite:i}=e;const o=fl(),l=(0,r.useMemo)((()=>n.includes(t)),[t,n]);return Nt("div",{className:"vm-query-history-item",children:[Nt("span",{className:"vm-query-history-item__value",children:t}),Nt("div",{className:"vm-query-history-item__buttons",children:[Nt(ba,{title:"Execute query",children:Nt(da,{size:"small",variant:"text",onClick:()=>{a(t)},startIcon:Nt(Yn,{})})}),Nt(ba,{title:"Copy query",children:Nt(da,{size:"small",variant:"text",onClick:async()=>{await o(t,"Query has been copied")},startIcon:Nt(rr,{})})}),Nt(ba,{title:l?"Remove Favorite":"Add to Favorites",children:Nt(da,{size:"small",variant:"text",color:l?"warning":"primary",onClick:()=>{i(t,l)},startIcon:Nt(l?fr:pr,{})})})]})]})},yl="saved",_l="favorite",bl=[{label:"Session history",value:"session"},{label:"Saved history",value:yl},{label:"Favorite queries",value:_l}],wl=e=>{let{handleSelectQuery:t}=e;const{queryHistory:n}=Cn(),{isMobile:a}=ta(),{value:i,setTrue:o,setFalse:l}=ma(!1),[s,c]=(0,r.useState)(bl[0].value),[u,d]=(0,r.useState)(gn("QUERY_HISTORY")),[h,m]=(0,r.useState)(gn("QUERY_FAVORITES")),p=(0,r.useMemo)((()=>n.map((e=>e.values.filter((e=>e)).reverse()))),[n]),f=(0,r.useMemo)((()=>{switch(s){case _l:return h;case yl:return u;default:return p}}),[s,h,u,p]),v=null===f||void 0===f?void 0:f.every((e=>!e.length)),g=(0,r.useMemo)((()=>s===_l?"Favorites queries are empty.\nTo see your favorites, mark a query as a favorite.":"Query history is empty.\nTo see the history, please make a query."),[s]),y=e=>n=>{t(n,e),l()},_=(e,t)=>{m((n=>{const r=n[0]||[];return t?[r.filter((t=>t!==e))]:t||r.includes(e)?n:[[...r,e]]}))};return(0,r.useEffect)((()=>{const e=h[0]||[],t=gn("QUERY_FAVORITES")[0]||[];pl(e,t)||Xe("QUERY_FAVORITES",JSON.stringify(h))}),[h]),Mr("storage",(()=>{d(gn("QUERY_HISTORY")),m(gn("QUERY_FAVORITES"))})),Nt(Ct.FK,{children:[Nt(ba,{title:"Show history",children:Nt(da,{color:"primary",variant:"text",onClick:o,startIcon:Nt(Hn,{}),ariaLabel:"Show history"})}),i&&Nt(_a,{title:"Query history",onClose:l,children:Nt("div",{className:Er()({"vm-query-history":!0,"vm-query-history_mobile":a}),children:[Nt("div",{className:Er()({"vm-query-history__tabs":!0,"vm-section-header__tabs":!0,"vm-query-history__tabs_mobile":a}),children:Nt($r,{activeItem:s,items:bl,onChange:c})}),Nt("div",{className:"vm-query-history-list",children:[v&&Nt("div",{className:"vm-query-history-list__no-data",children:g}),f.map(((e,t)=>Nt("div",{children:[f.length>1&&Nt("div",{className:Er()({"vm-query-history-list__group-title":!0,"vm-query-history-list__group-title_first":0===t}),children:["Query ",t+1]}),e.map(((e,n)=>Nt(gl,{query:e,favorites:h.flat(),onRun:y(t),onToggleFavorite:_},n)))]},t))),s===yl&&!v&&Nt("div",{className:"vm-query-history-footer",children:Nt(da,{color:"error",variant:"outlined",size:"small",startIcon:Nt(Zn,{}),onClick:()=>{Xe("QUERY_HISTORY","")},children:"clear history"})})]})]})})]})},kl=e=>{let{containerStyles:t,message:n}=e;const{isDarkTheme:r}=Mt();return Nt("div",{className:Er()({"vm-spinner":!0,"vm-spinner_dark":r}),style:t,children:[Nt("div",{className:"half-circle-spinner",children:[Nt("div",{className:"circle circle-1"}),Nt("div",{className:"circle circle-2"})]}),n&&Nt("div",{className:"vm-spinner__message",children:n})]})},Sl=()=>{const{serverUrl:e}=Mt(),{isMobile:t}=ta(),{value:n,setTrue:a,setFalse:i}=ma(!1),{query:o}=Cn(),{period:l}=fn(),[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[p,f]=(0,r.useState)("");return Nt(Ct.FK,{children:[Nt(da,{color:"secondary",variant:"outlined",onClick:()=>(a(),f(""),URL.revokeObjectURL(h),d(""),m(""),(async()=>{c(!0);try{const t=encodeURIComponent(o[0]||""),n=encodeURIComponent(l.step||Zt(l.end-l.start,!1)),r=`${e}/api/vmanomaly/config.yaml?query=${t}&step=${n}`,a=await fetch(r),i=a.headers.get("Content-Type");if(a.ok)if("application/yaml"==i){const e=await a.blob(),t=await e.text();d(t),m(URL.createObjectURL(e))}else f("Response Content-Type is not YAML, does `Server URL` point to VMAnomaly server?");else{const e=await a.text();f(` ${a.status} ${a.statusText}: ${e}`)}}catch(p){console.error(p),f(String(p))}c(!1)})()),children:"Open Config"}),n&&Nt(_a,{title:"Download config",onClose:i,children:Nt("div",{className:Er()({"vm-anomaly-config":!0,"vm-anomaly-config_mobile":t}),children:[s&&Nt(kl,{containerStyles:{position:"relative"},message:"Loading config..."}),!s&&p&&Nt("div",{className:"vm-anomaly-config-error",children:[Nt("div",{className:"vm-anomaly-config-error__icon",children:Nt(Rn,{})}),Nt("h3",{className:"vm-anomaly-config-error__title",children:"Cannot download config"}),Nt("p",{className:"vm-anomaly-config-error__text",children:p})]}),!s&&u&&Nt(Ka,{value:u,label:"config.yaml",type:"textarea",disabled:!0}),Nt("div",{className:"vm-anomaly-config-footer",children:h&&Nt("a",{href:h,download:"config.yaml",children:Nt(da,{variant:"contained",startIcon:Nt(br,{}),children:"download"})})})]})})]})},xl=e=>{let{queryErrors:t,setQueryErrors:n,setHideError:a,stats:i,label:o,isLoading:l,includeFunctions:s=!0,onHideQuery:c,onRunQuery:u,abortFetch:d,hideButtons:h}=e;const{isMobile:m}=ta(),{query:p,queryHistory:f,autocomplete:v,autocompleteQuick:g}=Cn(),y=En(),_=vn(),[b,w]=(0,r.useState)(p||[]),[k,S]=(0,r.useState)([]),[x,C]=(0,r.useState)(!1),E=Za(b),N=(()=>{const{serverUrl:e}=Mt();return async t=>{try{const n=encodeURIComponent(t),r=`${e}/prettify-query?query=${n}`,a=await fetch(r);if(200!=a.status)return{query:t,error:"Error requesting /prettify-query, status: "+a.status};const i=await a.json();return"success"!=i.status?{query:t,error:String(i.msg)}:{query:String(i.query),error:""}}catch(Yp){return console.error(Yp),Yp instanceof Error&&"AbortError"!==Yp.name?{query:t,error:`${Yp.name}: ${Yp.message}`}:{query:t,error:String(Yp)}}}})(),A=()=>{l?d&&d():(y({type:"SET_QUERY_HISTORY",payload:b.map(((e,t)=>{const n=f[t]||{values:[]},r=e===n.values[n.values.length-1],a=!r&&e?[...n.values,e]:n.values;return a.length>25&&a.shift(),{index:n.values.length-Number(r),values:a}}))}),y({type:"SET_QUERY",payload:b}),_({type:"RUN_QUERY"}),u())},M=(e,t)=>{w((n=>n.map(((n,r)=>r===t?e:n))))},T=(e,t)=>()=>{((e,t)=>{const{index:n,values:r}=f[t],a=n+e;a<0||a>=r.length||(M(r[a]||"",t),y({type:"SET_QUERY_HISTORY_BY_INDEX",payload:{value:{values:r,index:a},queryNumber:t}}))})(e,t)},$=e=>t=>{M(t,e),y({type:"SET_AUTOCOMPLETE_QUICK",payload:!1})},L=e=>()=>{var t;t=e,w((e=>e.filter(((e,n)=>n!==t)))),S((t=>t.includes(e)?t.filter((t=>t!==e)):t.map((t=>t>e?t-1:t))))},P=e=>t=>{((e,t)=>{const{ctrlKey:n,metaKey:r}=e;if(n||r){const e=b.map(((e,t)=>t)).filter((e=>e!==t));S((t=>pl(e,t)?[]:e))}else S((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]))})(t,e)};return(0,r.useEffect)((()=>{E&&b.length<E.length&&A()}),[b]),(0,r.useEffect)((()=>{c&&c(k)}),[k]),(0,r.useEffect)((()=>{x&&(A(),C(!1))}),[b,x]),(0,r.useEffect)((()=>{w(p||[])}),[p]),Nt("div",{className:Er()({"vm-query-configurator":!0,"vm-block":!0,"vm-block_mobile":m}),children:[Nt("div",{className:"vm-query-configurator-list",children:b.map(((e,r)=>Nt("div",{className:Er()({"vm-query-configurator-list-row":!0,"vm-query-configurator-list-row_disabled":k.includes(r),"vm-query-configurator-list-row_mobile":m}),children:[Nt(dl,{value:b[r],autocomplete:!(null!==h&&void 0!==h&&h.autocomplete)&&(v||g),error:t[r],stats:i[r],onArrowUp:T(-1,r),onArrowDown:T(1,r),onEnter:A,onChange:$(r),label:`${o||"Query"} ${b.length>1?r+1:""}`,disabled:k.includes(r),includeFunctions:s}),c&&Nt(ba,{title:k.includes(r)?"Enable query":"Disable query",children:Nt("div",{className:"vm-query-configurator-list-row__button",children:Nt(da,{variant:"text",color:"gray",startIcon:k.includes(r)?Nt(tr,{}):Nt(er,{}),onClick:P(r),ariaLabel:"visibility query"})})}),!(null!==h&&void 0!==h&&h.prettify)&&Nt(ba,{title:"Prettify query",children:Nt("div",{className:"vm-query-configurator-list-row__button",children:Nt(da,{variant:"text",color:"gray",startIcon:Nt(nr,{}),onClick:async()=>await(async e=>{const t=await N(b[e]);a(!1),M(t.query,e),n((n=>(n[e]=t.error,[...n])))})(r),className:"prettify",ariaLabel:"prettify the query"})})}),b.length>1&&Nt(ba,{title:"Remove Query",children:Nt("div",{className:"vm-query-configurator-list-row__button",children:Nt(da,{variant:"text",color:"error",startIcon:Nt(Zn,{}),onClick:L(r),ariaLabel:"remove query"})})})]},r)))}),Nt("div",{className:"vm-query-configurator-settings",children:[Nt(ml,{hideButtons:h}),Nt("div",{className:"vm-query-configurator-settings__buttons",children:[Nt(wl,{handleSelectQuery:(e,t)=>{M(e,t),C(!0)}}),(null===h||void 0===h?void 0:h.anomalyConfig)&&Nt(Sl,{}),!(null!==h&&void 0!==h&&h.addQuery)&&b.length<10&&Nt(da,{variant:"outlined",onClick:()=>{w((e=>[...e,""]))},startIcon:Nt(Gn,{}),children:"Add Query"}),Nt(da,{variant:"contained",onClick:A,startIcon:Nt(l?xr:qn,{}),children:`${l?"Cancel":"Execute"} ${m?"":"Query"}`})]})]})]})};let Cl=0;class El{constructor(e,t){this.tracing=void 0,this.query=void 0,this.tracingChildren=void 0,this.originalTracing=void 0,this.id=void 0,this.tracing=e,this.originalTracing=JSON.parse(JSON.stringify(e)),this.query=t,this.id=Cl++;const n=e.children||[];this.tracingChildren=n.map((e=>new El(e,t)))}get queryValue(){return this.query}get idValue(){return this.id}get children(){return this.tracingChildren}get message(){return this.tracing.message}get duration(){return this.tracing.duration_msec}get JSON(){return JSON.stringify(this.tracing,null,2)}get originalJSON(){return JSON.stringify(this.originalTracing,null,2)}setTracing(e){this.tracing=e;const t=e.children||[];this.tracingChildren=t.map((e=>new El(e,this.query)))}setQuery(e){this.query=e}resetTracing(){this.tracing=this.originalTracing}}const Nl=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{__name__:r,...a}=e.metric,i=n?`[Query ${e.group}] `:"";if(t)return t.replace(/\{\{(\w+)}}/g,((t,n)=>e.metric[n]||""));const o=`${i}${r||""}`;if(0===Object.keys(a).length)return o||"value";return`${o}{${Object.entries(a).map((e=>{let[t,n]=e;return`${t}=${JSON.stringify(n)}`})).join(", ")}}`},Al=e=>{switch(e){case"NaN":return NaN;case"Inf":case"+Inf":return 1/0;case"-Inf":return-1/0;default:return parseFloat(e)}},Ml=e=>{if(e.length<2)return!1;const t=["le","vmrange"],n=Object.keys(e[0].metric).filter((e=>!t.includes(e))),r=e.every((r=>{const a=Object.keys(r.metric).filter((e=>!t.includes(e)));return n.length===a.length&&a.every((t=>r.metric[t]===e[0].metric[t]))}));return r&&e.every((e=>t.some((t=>t in e.metric))))},Tl=He.anomaly==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1}.REACT_APP_TYPE,$l=e=>{let{predefinedQuery:t,visible:n,display:a,customStep:i,hideQuery:o,showAllSeries:l}=e;const{query:s}=Cn(),{period:c}=fn(),{displayType:u,nocache:d,isTracingEnabled:h,seriesLimits:m}=Fr(),{serverUrl:p}=Mt(),{isHistogram:f}=Br(),[v,g]=(0,r.useState)(!1),[y,_]=(0,r.useState)(),[b,w]=(0,r.useState)(),[k,S]=(0,r.useState)(),[x,C]=(0,r.useState)(),[E,N]=(0,r.useState)([]),[A,M]=(0,r.useState)([]),[T,$]=(0,r.useState)(),[L,P]=(0,r.useState)([]),[I,O]=(0,r.useState)(!1),R=(0,r.useMemo)((()=>{const{end:e,start:t}=c;return Zt(e-t,f)}),[c,f]),D=(0,r.useCallback)(qi()((async e=>{let{fetchUrl:t,fetchQueue:n,displayType:r,query:a,stateSeriesLimits:i,showAllSeries:o,hideQuery:l}=e;const s=new AbortController;P([...n,s]);try{const e=r===mt.chart,n=o?1/0:+i[r]||1/0;let c=n;const u=[],d=[];let h=1,m=0,p=!1;for await(const r of t){if(null===l||void 0===l?void 0:l.includes(h-1)){N((e=>[...e,""])),M((e=>[...e,{}])),h++;continue}const t=new URL(r),i=await fetch(`${t.origin}${t.pathname}`,{signal:s.signal,method:"POST",body:t.searchParams}),o=await i.json();if(i.ok){if(M((e=>[...e,{...null===o||void 0===o?void 0:o.stats,isPartial:null===o||void 0===o?void 0:o.isPartial,resultLength:o.data.result.length}])),N((e=>[...e,""])),o.trace){const e=new El(o.trace,a[h-1]);d.push(e)}p=!Tl&&e&&Ml(o.data.result),c=p?1/0:n;const t=c-u.length;o.data.result.slice(0,t).forEach((e=>{e.group=h,u.push(e)})),m+=o.data.result.length}else{u.push({metric:{},values:[],group:h});const e=o.errorType||pt.unknownType,t=[e,(null===o||void 0===o?void 0:o.error)||(null===o||void 0===o?void 0:o.message)||"see console for more details"].join(",\r\n");N((e=>[...e,`${t}`])),console.error(`Fetch query error: ${e}`,o)}h++}const f=`Showing ${u.length} series out of ${m} series due to performance reasons. Please narrow down the query, so it returns less series`;$(m>c?f:""),e?_(u):w(u),S(d),O((e=>m?p:e))}catch(Yp){const t=Yp;if("AbortError"===t.name)return void g(!1);const n="Please check your serverURL settings and confirm server availability.";let r=`Error executing query: ${t.message}. ${n}`;"Unexpected end of JSON input"===t.message&&(r+="\nAdditionally, this error can occur if the server response is too large to process. Apply more specific filters to reduce the data volume."),C(r)}g(!1)}),300),[]),z=(0,r.useMemo)((()=>{C(""),N([]),M([]);const e=null!==t&&void 0!==t?t:s,n=(a||u)===mt.chart;if(c)if(p)if(e.every((e=>!e.trim())))N(e.map((()=>pt.validQuery)));else{if(bt(p)){const t={...c};return t.step=i,e.map((e=>n?((e,t,n,r,a)=>`${e}/api/v1/query_range?query=${encodeURIComponent(t)}&start=${n.start}&end=${n.end}&step=${n.step}${r?"&nocache=1":""}${a?"&trace=1":""}`)(p,e,t,d,h):((e,t,n,r,a)=>`${e}/api/v1/query?query=${encodeURIComponent(t)}&time=${n.end}&step=${n.step}${r?"&nocache=1":""}${a?"&trace=1":""}`)(p,e,t,d,h)))}C(pt.validServer)}else C(pt.emptyServer)}),[p,c,u,i,o]),F=(0,r.useCallback)((()=>{L.map((e=>e.abort())),P([]),_([]),w([])}),[L]),[j,H]=(0,r.useState)([]);return(0,r.useEffect)((()=>{const e=z===j&&!!t;if(!n||null===z||void 0===z||!z.length||e)return;g(!0);D({fetchUrl:z,fetchQueue:L,displayType:a||u,query:null!==t&&void 0!==t?t:s,stateSeriesLimits:m,showAllSeries:l,hideQuery:o}),H(z)}),[z,n,m,l]),(0,r.useEffect)((()=>{const e=L.slice(0,-1);e.length&&(e.map((e=>e.abort())),P(L.filter((e=>!e.signal.aborted))))}),[L]),(0,r.useEffect)((()=>{R===i&&_([])}),[I]),{fetchUrl:z,isLoading:v,graphData:y,liveData:b,error:x,queryErrors:E,setQueryErrors:N,queryStats:A,warning:T,traces:k,isHistogram:I,abortFetch:F}},Ll=()=>Nt("div",{className:"vm-line-loader",children:[Nt("div",{className:"vm-line-loader__background"}),Nt("div",{className:"vm-line-loader__line"})]}),Pl=()=>{const{tenantId:e}=Mt(),{displayType:t}=Fr(),{query:n}=Cn(),{duration:a,relativeTime:i,period:{date:o,step:l}}=fn(),{customStep:s}=Br(),[c,u]=je(),d=Tt(),h=vn(),m=qr(),p=En(),f=jr(),[v,g]=(0,r.useState)(!1),y=(0,r.useCallback)((()=>{if(v)return void g(!1);const r=new URLSearchParams(c);n.forEach(((n,u)=>{var d;const h=`g${u}`;c.get(`${h}.expr`)!==n&&n&&r.set(`${h}.expr`,n),c.get(`${h}.range_input`)!==a&&r.set(`${h}.range_input`,a),c.get(`${h}.end_input`)!==o&&r.set(`${h}.end_input`,o),c.get(`${h}.relative_time`)!==i&&r.set(`${h}.relative_time`,i||"none");const m=c.get(`${h}.step_input`)||l;m&&m!==s&&r.set(`${h}.step_input`,s);const p=`${(null===(d=Lr.find((e=>e.value===t)))||void 0===d?void 0:d.prometheusCode)||0}`;c.get(`${h}.tab`)!==p&&r.set(`${h}.tab`,`${p}`),c.get(`${h}.tenantID`)!==e&&e&&r.set(`${h}.tenantID`,e)}));const d=n.length-1;Array.from(r.keys()).forEach((e=>{const t=e.match(/^g(\d+)\./);t&&parseInt(t[1],10)>d&&r.delete(e)})),!((e,t)=>{if(Array.from(e.entries()).length!==Array.from(t.entries()).length)return!1;for(const[n,r]of e)if(t.get(n)!==r)return!1;return!0})(r,c)&&r.size&&u(r)}),[e,t,n,a,i,o,l,s]);(0,r.useEffect)((()=>{const e=setTimeout(y,200);return()=>clearTimeout(e)}),[y]),(0,r.useEffect)((()=>{if(!v)return;const r=dn(),u=r.duration!==a,g=r.relativeTime!==i,y="none"===r.relativeTime&&r.period.date!==o;(u||g||y)&&h({type:"SET_TIME_STATE",payload:r});const _=Ir();_!==t&&f({type:"SET_DISPLAY_TYPE",payload:_});const b=c.get("g0.tenantID")||"";b!==e&&d({type:"SET_TENANT_ID",payload:b});const w=dt();pl(w,n)||(p({type:"SET_QUERY",payload:w}),h({type:"RUN_QUERY"}));const k=setTimeout((()=>{const e=c.get("g0.step_input")||l;e&&e!==s&&m({type:"SET_CUSTOM_STEP",payload:e})}),50);return()=>clearTimeout(k)}),[c,v]),Mr("popstate",(()=>{g(!0)}))},Il=e=>{let{text:t,href:n,children:r,colored:a=!0,underlined:i=!1,withIcon:o=!1}=e;return Nt("a",{href:n,className:Er()({"vm-link":!0,"vm-link_colored":a,"vm-link_underlined":i,"vm-link_with-icon":o}),target:"_blank",rel:"noreferrer",children:t||r})},Ol=Nt(Il,{text:"last_over_time",href:"https://docs.victoriametrics.com/MetricsQL.html#last_over_time",underlined:!0}),Rl=Nt(Il,{text:"instant query",href:"https://docs.victoriametrics.com/keyConcepts.html#instant-query",underlined:!0}),Dl=()=>{const{customStep:e}=Br();return Nt("div",{children:[Nt("p",{children:["This tab shows ",Rl," results for the last ",e||"5m"," (defined by the ",Nt("code",{children:"step"}),") ending at the selected time range."]}),Nt("p",{children:["Please wrap the query into ",Ol," if you need results over arbitrary lookbehind interval."]})]})},zl=e=>{let{value:t}=e;return Nt("div",{className:"vm-line-progress",children:[Nt("div",{className:"vm-line-progress-track",children:Nt("div",{className:"vm-line-progress-track__thumb",style:{width:`${t}%`}})}),Nt("span",{children:[t.toFixed(2),"%"]})]})},Fl=e=>{let{isRoot:t,trace:n,totalMsec:a,isExpandedAll:i}=e;const{isDarkTheme:o}=Mt(),{isMobile:l}=ta(),[s,c]=(0,r.useState)({}),u=(0,r.useRef)(null),[d,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),f=Yt(n.duration/1e3)||`${n.duration}ms`;(0,r.useEffect)((()=>{if(!u.current)return;const e=u.current,t=u.current.children[0],{height:n}=t.getBoundingClientRect();h(n>e.clientHeight)}),[n]);const v=n.children&&!!n.children.length,g=n.duration/a*100,y=e=>{var t;const n=[e.idValue];return null===e||void 0===e||null===(t=e.children)||void 0===t||t.forEach((e=>{n.push(...y(e))})),n};return(0,r.useEffect)((()=>{if(!i)return void c([]);const e=y(n),t={};e.forEach((e=>{t[e]=!0})),c(t)}),[i]),Nt("div",{className:Er()({"vm-nested-nav":!0,"vm-nested-nav_root":t,"vm-nested-nav_dark":o,"vm-nested-nav_mobile":l}),children:[Nt("div",{className:Er()({"vm-nested-nav-header":!0,"vm-nested-nav-header_open":s[n.idValue]}),onClick:(_=n.idValue,()=>{v&&c((e=>({...e,[_]:!e[_]})))}),children:[v&&Nt("div",{className:Er()({"vm-nested-nav-header__icon":!0,"vm-nested-nav-header__icon_open":s[n.idValue]}),children:Nt(Fn,{})}),Nt("div",{className:"vm-nested-nav-header__progress",children:Nt(zl,{value:g})}),Nt("div",{className:Er()({"vm-nested-nav-header__message":!0,"vm-nested-nav-header__message_show-full":m}),ref:u,children:[Nt("span",{className:"vm-nested-nav-header__message_duration",children:f}),":\xa0",Nt("span",{children:n.message})]}),Nt("div",{className:"vm-nested-nav-header-bottom",children:(d||m)&&Nt(da,{variant:"text",size:"small",onClick:e=>{e.stopPropagation(),p((e=>!e))},children:m?"Hide":"Show full query"})})]}),s[n.idValue]&&Nt("div",{className:"vm-nested-nav__childrens",children:v&&n.children.map((e=>Nt(Fl,{trace:e,totalMsec:a,isExpandedAll:i},e.duration)))})]});var _},jl=Fl,Hl=e=>{let{editable:t=!1,defaultTile:n="JSON",displayTitle:a=!0,defaultJson:i="",resetValue:o="",onClose:l,onUpload:s}=e;const c=fl(),{isMobile:u}=ta(),[d,h]=(0,r.useState)(i),[m,p]=(0,r.useState)(n),[f,v]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),_=(0,r.useMemo)((()=>{try{const e=JSON.parse(d),t=e.trace||e;return t.duration_msec?(new El(t,""),""):pt.traceNotFound}catch(Yp){return Yp instanceof Error?Yp.message:"Unknown error"}}),[d]),b=()=>{y(_);m.trim()||v(pt.emptyTitle),_||f||(s(d,m),l())};return Nt("div",{className:Er()({"vm-json-form":!0,"vm-json-form_one-field":!a,"vm-json-form_one-field_mobile":!a&&u,"vm-json-form_mobile":u}),children:[a&&Nt(Ka,{value:m,label:"Title",error:f,onEnter:b,onChange:e=>{p(e)}}),Nt(Ka,{value:d,label:"JSON",type:"textarea",error:g,autofocus:!0,onChange:e=>{y(""),h(e)},onEnter:b,disabled:!t}),Nt("div",{className:"vm-json-form-footer",children:[Nt("div",{className:"vm-json-form-footer__controls",children:[Nt(da,{variant:"outlined",startIcon:Nt(rr,{}),onClick:async()=>{await c(d,"Formatted JSON has been copied")},children:"Copy JSON"}),o&&Nt(da,{variant:"text",startIcon:Nt(Pn,{}),onClick:()=>{h(o)},children:"Reset JSON"})]}),Nt("div",{className:"vm-json-form-footer__controls vm-json-form-footer__controls_right",children:[Nt(da,{variant:"outlined",color:"error",onClick:l,children:"Cancel"}),Nt(da,{variant:"contained",onClick:b,children:"apply"})]})]})]})},Ul=e=>{let{traces:t,jsonEditor:n=!1,onDeleteClick:a}=e;const{isMobile:i}=ta(),[o,l]=(0,r.useState)(null),[s,c]=(0,r.useState)([]),u=()=>{l(null)};if(!t.length)return Nt(ra,{variant:"info",children:"Please re-run the query to see results of the tracing"});const d=e=>()=>{a(e)},h=e=>()=>{l(e)},m=e=>()=>{const t=new Blob([e.originalJSON],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`vmui_trace_${e.queryValue}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)};return Nt(Ct.FK,{children:[Nt("div",{className:"vm-tracings-view",children:t.map((e=>{return Nt("div",{className:"vm-tracings-view-trace vm-block vm-block_empty-padding",children:[Nt("div",{className:"vm-tracings-view-trace-header",children:[Nt("h3",{className:"vm-tracings-view-trace-header-title",children:["Trace for ",Nt("b",{className:"vm-tracings-view-trace-header-title__query",children:e.queryValue})]}),Nt(ba,{title:s.includes(e.idValue)?"Collapse All":"Expand All",children:Nt(da,{variant:"text",startIcon:s.includes(e.idValue)?Nt(kr,{}):Nt(wr,{}),onClick:(t=e,()=>{c((e=>e.includes(t.idValue)?e.filter((e=>e!==t.idValue)):[...e,t.idValue]))}),ariaLabel:s.includes(e.idValue)?"Collapse All":"Expand All"})}),Nt(ba,{title:"Save Trace to JSON",children:Nt(da,{variant:"text",startIcon:Nt(br,{}),onClick:m(e),ariaLabel:"Save trace to JSON"})}),Nt(ba,{title:"Open JSON",children:Nt(da,{variant:"text",startIcon:Nt(Qn,{}),onClick:h(e),ariaLabel:"open JSON"})}),Nt(ba,{title:"Remove trace",children:Nt(da,{variant:"text",color:"error",startIcon:Nt(Zn,{}),onClick:d(e),ariaLabel:"remove trace"})})]}),Nt("nav",{className:Er()({"vm-tracings-view-trace__nav":!0,"vm-tracings-view-trace__nav_mobile":i}),children:Nt(jl,{isRoot:!0,trace:e,totalMsec:e.duration,isExpandedAll:s.includes(e.idValue)})})]},e.idValue);var t}))}),o&&Nt(_a,{title:o.queryValue,onClose:u,children:Nt(Hl,{editable:n,displayTitle:n,defaultTile:o.queryValue,defaultJson:o.JSON,resetValue:o.originalJSON,onClose:u,onUpload:(e,t)=>{if(n&&o)try{o.setTracing(JSON.parse(e)),o.setQuery(t),l(null)}catch(Yp){console.error(Yp)}}})})]})},Vl=e=>{let{traces:t,displayType:n}=e;const{isTracingEnabled:a}=Fr(),[i,o]=(0,r.useState)([]);return(0,r.useEffect)((()=>{t&&o([...i,...t])}),[t]),(0,r.useEffect)((()=>{o([])}),[n]),Nt(Ct.FK,{children:a&&Nt("div",{className:"vm-custom-panel__trace",children:Nt(Ul,{traces:i,onDeleteClick:e=>{const t=i.filter((t=>t.idValue!==e.idValue));o([...t])}})})})},Bl=e=>{let{warning:t,query:n,onChange:a}=e;const{isMobile:i}=ta(),{value:o,setTrue:l,setFalse:s}=ma(!1);return(0,r.useEffect)(s,[n]),(0,r.useEffect)((()=>{a(o)}),[o]),Nt(ra,{variant:"warning",children:Nt("div",{className:Er()({"vm-custom-panel__warning":!0,"vm-custom-panel__warning_mobile":i}),children:[Nt("p",{children:t}),Nt(da,{color:"warning",variant:"outlined",onClick:l,children:"Show all"})]})})},ql="u-off",Yl="u-label",Wl="width",Kl="height",Ql="top",Zl="bottom",Gl="left",Jl="right",Xl="#000",es=Xl+"0",ts="mousemove",ns="mousedown",rs="mouseup",as="mouseenter",is="mouseleave",os="dblclick",ls="change",ss="dppxchange",cs="--",us="undefined"!=typeof window,ds=us?document:null,hs=us?window:null,ms=us?navigator:null;let ps,fs;function vs(e,t){if(null!=t){let n=e.classList;!n.contains(t)&&n.add(t)}}function gs(e,t){let n=e.classList;n.contains(t)&&n.remove(t)}function ys(e,t,n){e.style[t]=n+"px"}function _s(e,t,n,r){let a=ds.createElement(e);return null!=t&&vs(a,t),null!=n&&n.insertBefore(a,r),a}function bs(e,t){return _s("div",e,t)}const ws=new WeakMap;function ks(e,t,n,r,a){let i="translate("+t+"px,"+n+"px)";i!=ws.get(e)&&(e.style.transform=i,ws.set(e,i),t<0||n<0||t>r||n>a?vs(e,ql):gs(e,ql))}const Ss=new WeakMap;function xs(e,t,n){let r=t+n;r!=Ss.get(e)&&(Ss.set(e,r),e.style.background=t,e.style.borderColor=n)}const Cs=new WeakMap;function Es(e,t,n,r){let a=t+""+n;a!=Cs.get(e)&&(Cs.set(e,a),e.style.height=n+"px",e.style.width=t+"px",e.style.marginLeft=r?-t/2+"px":0,e.style.marginTop=r?-n/2+"px":0)}const Ns={passive:!0},As={...Ns,capture:!0};function Ms(e,t,n,r){t.addEventListener(e,n,r?As:Ns)}function Ts(e,t,n,r){t.removeEventListener(e,n,Ns)}function $s(e,t,n,r){let a;n=n||0;let i=(r=r||t.length-1)<=2147483647;for(;r-n>1;)a=i?n+r>>1:Ys((n+r)/2),t[a]<e?n=a:r=a;return e-t[n]<=t[r]-e?n:r}function Ls(e,t,n,r){for(let a=1==r?t:n;a>=t&&a<=n;a+=r)if(null!=e[a])return a;return-1}function Ps(e,t,n,r){let a=Js(e),i=Js(t);e==t&&(-1==a?(e*=n,t/=n):(e/=n,t*=n));let o=10==n?Xs:ec,l=1==i?Ks:Ys,s=(1==a?Ys:Ks)(o(qs(e))),c=l(o(qs(t))),u=Gs(n,s),d=Gs(n,c);return 10==n&&(s<0&&(u=vc(u,-s)),c<0&&(d=vc(d,-c))),r||2==n?(e=u*a,t=d*i):(e=fc(e,u),t=pc(t,d)),[e,t]}function Is(e,t,n,r){let a=Ps(e,t,n,r);return 0==e&&(a[0]=0),0==t&&(a[1]=0),a}us&&function e(){let t=devicePixelRatio;ps!=t&&(ps=t,fs&&Ts(ls,fs,e),fs=matchMedia(`(min-resolution: ${ps-.001}dppx) and (max-resolution: ${ps+.001}dppx)`),Ms(ls,fs,e),hs.dispatchEvent(new CustomEvent(ss)))}();const Os={mode:3,pad:.1},Rs={pad:0,soft:null,mode:0},Ds={min:Rs,max:Rs};function zs(e,t,n,r){return Ec(n)?js(e,t,n):(Rs.pad=n,Rs.soft=r?0:null,Rs.mode=r?3:0,js(e,t,Ds))}function Fs(e,t){return null==e?t:e}function js(e,t,n){let r=n.min,a=n.max,i=Fs(r.pad,0),o=Fs(a.pad,0),l=Fs(r.hard,-nc),s=Fs(a.hard,nc),c=Fs(r.soft,nc),u=Fs(a.soft,-nc),d=Fs(r.mode,0),h=Fs(a.mode,0),m=t-e,p=Xs(m),f=Zs(qs(e),qs(t)),v=Xs(f),g=qs(v-p);(m<1e-24||g>10)&&(m=0,0!=e&&0!=t||(m=1e-24,2==d&&c!=nc&&(i=0),2==h&&u!=-nc&&(o=0)));let y=m||f||1e3,_=Xs(y),b=Gs(10,Ys(_)),w=vc(fc(e-y*(0==m?0==e?.1:1:i),b/10),24),k=e>=c&&(1==d||3==d&&w<=c||2==d&&w>=c)?c:nc,S=Zs(l,w<k&&e>=k?k:Qs(k,w)),x=vc(pc(t+y*(0==m?0==t?.1:1:o),b/10),24),C=t<=u&&(1==h||3==h&&x>=u||2==h&&x<=u)?u:-nc,E=Qs(s,x>C&&t<=C?C:Zs(C,x));return S==E&&0==S&&(E=100),[S,E]}const Hs=new Intl.NumberFormat(us?ms.language:"en-US"),Us=e=>Hs.format(e),Vs=Math,Bs=Vs.PI,qs=Vs.abs,Ys=Vs.floor,Ws=Vs.round,Ks=Vs.ceil,Qs=Vs.min,Zs=Vs.max,Gs=Vs.pow,Js=Vs.sign,Xs=Vs.log10,ec=Vs.log2,tc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Vs.asinh(e/t)},nc=1/0;function rc(e){return 1+(0|Xs((e^e>>31)-(e>>31)))}function ac(e,t,n){return Qs(Zs(e,t),n)}function ic(e){return"function"==typeof e?e:()=>e}const oc=e=>e,lc=(e,t)=>t,sc=e=>null,cc=e=>!0,uc=(e,t)=>e==t,dc=/\.\d*?(?=9{6,}|0{6,})/gm,hc=e=>{if(xc(e)||gc.has(e))return e;const t=`${e}`,n=t.match(dc);if(null==n)return e;let r=n[0].length-1;if(-1!=t.indexOf("e-")){let[e,n]=t.split("e");return+`${hc(e)}e${n}`}return vc(e,r)};function mc(e,t){return hc(vc(hc(e/t))*t)}function pc(e,t){return hc(Ks(hc(e/t))*t)}function fc(e,t){return hc(Ys(hc(e/t))*t)}function vc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(xc(e))return e;let n=10**t,r=e*n*(1+Number.EPSILON);return Ws(r)/n}const gc=new Map;function yc(e){return((""+e).split(".")[1]||"").length}function _c(e,t,n,r){let a=[],i=r.map(yc);for(let o=t;o<n;o++){let t=qs(o),n=vc(Gs(e,o),t);for(let l=0;l<r.length;l++){let s=10==e?+`${r[l]}e${o}`:r[l]*n,c=(o>=0?0:t)+(o>=i[l]?0:i[l]),u=10==e?s:vc(s,c);a.push(u),gc.set(u,c)}}return a}const bc={},wc=[],kc=[null,null],Sc=Array.isArray,xc=Number.isInteger;function Cc(e){return"string"==typeof e}function Ec(e){let t=!1;if(null!=e){let n=e.constructor;t=null==n||n==Object}return t}function Nc(e){return null!=e&&"object"==typeof e}const Ac=Object.getPrototypeOf(Uint8Array),Mc="__proto__";function Tc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ec;if(Sc(e)){let r=e.find((e=>null!=e));if(Sc(r)||n(r)){t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=Tc(e[r],n)}else t=e.slice()}else if(e instanceof Ac)t=e.slice();else if(n(e)){t={};for(let r in e)r!=Mc&&(t[r]=Tc(e[r],n))}else t=e;return t}function $c(e){let t=arguments;for(let n=1;n<t.length;n++){let r=t[n];for(let t in r)t!=Mc&&(Ec(e[t])?$c(e[t],Tc(r[t])):e[t]=Tc(r[t]))}return e}function Lc(e,t,n){for(let r,a=0,i=-1;a<t.length;a++){let o=t[a];if(o>i){for(r=o-1;r>=0&&null==e[r];)e[r--]=null;for(r=o+1;r<n&&null==e[r];)e[i=r++]=null}}}const Pc="undefined"==typeof queueMicrotask?e=>Promise.resolve().then(e):queueMicrotask;const Ic=["January","February","March","April","May","June","July","August","September","October","November","December"],Oc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Rc(e){return e.slice(0,3)}const Dc=Oc.map(Rc),zc=Ic.map(Rc),Fc={MMMM:Ic,MMM:zc,WWWW:Oc,WWW:Dc};function jc(e){return(e<10?"0":"")+e}const Hc={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>jc(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>jc(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>jc(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return 0==t?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>jc(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>jc(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>{return((t=e.getMilliseconds())<10?"00":t<100?"0":"")+t;var t}};function Uc(e,t){t=t||Fc;let n,r=[],a=/\{([a-z]+)\}|[^{]+/gi;for(;n=a.exec(e);)r.push("{"==n[0][0]?Hc[n[1]]:n[0]);return e=>{let n="";for(let a=0;a<r.length;a++)n+="string"==typeof r[a]?r[a]:r[a](e,t);return n}}const Vc=(new Intl.DateTimeFormat).resolvedOptions().timeZone;const Bc=e=>e%1==0,qc=[1,2,2.5,5],Yc=_c(10,-32,0,qc),Wc=_c(10,0,32,qc),Kc=Wc.filter(Bc),Qc=Yc.concat(Wc),Zc="{YYYY}",Gc="\n"+Zc,Jc="{M}/{D}",Xc="\n"+Jc,eu=Xc+"/{YY}",tu="{aa}",nu="{h}:{mm}"+tu,ru="\n"+nu,au=":{ss}",iu=null;function ou(e){let t=1e3*e,n=60*t,r=60*n,a=24*r,i=30*a,o=365*a;return[(1==e?_c(10,0,3,qc).filter(Bc):_c(10,-3,0,qc)).concat([t,5*t,10*t,15*t,30*t,n,5*n,10*n,15*n,30*n,r,2*r,3*r,4*r,6*r,8*r,12*r,a,2*a,3*a,4*a,5*a,6*a,7*a,8*a,9*a,10*a,15*a,i,2*i,3*i,4*i,6*i,o,2*o,5*o,10*o,25*o,50*o,100*o]),[[o,Zc,iu,iu,iu,iu,iu,iu,1],[28*a,"{MMM}",Gc,iu,iu,iu,iu,iu,1],[a,Jc,Gc,iu,iu,iu,iu,iu,1],[r,"{h}"+tu,eu,iu,Xc,iu,iu,iu,1],[n,nu,eu,iu,Xc,iu,iu,iu,1],[t,au,eu+" "+nu,iu,Xc+" "+nu,iu,ru,iu,1],[e,au+".{fff}",eu+" "+nu,iu,Xc+" "+nu,iu,ru,iu,1]],function(t){return(l,s,c,u,d,h)=>{let m=[],p=d>=o,f=d>=i&&d<o,v=t(c),g=vc(v*e,3),y=fu(v.getFullYear(),p?0:v.getMonth(),f||p?1:v.getDate()),_=vc(y*e,3);if(f||p){let n=f?d/i:0,r=p?d/o:0,a=g==_?g:vc(fu(y.getFullYear()+r,y.getMonth()+n,1)*e,3),l=new Date(Ws(a/e)),s=l.getFullYear(),c=l.getMonth();for(let i=0;a<=u;i++){let o=fu(s+r*i,c+n*i,1),l=o-t(vc(o*e,3));a=vc((+o+l)*e,3),a<=u&&m.push(a)}}else{let i=d>=a?a:d,o=_+(Ys(c)-Ys(g))+pc(g-_,i);m.push(o);let p=t(o),f=p.getHours()+p.getMinutes()/n+p.getSeconds()/r,v=d/r,y=h/l.axes[s]._space;for(;o=vc(o+d,1==e?0:3),!(o>u);)if(v>1){let e=Ys(vc(f+v,6))%24,n=t(o).getHours()-e;n>1&&(n=-1),o-=n*r,f=(f+v)%24,vc((o-m[m.length-1])/d,3)*y>=.7&&m.push(o)}else m.push(o)}return m}}]}const[lu,su,cu]=ou(1),[uu,du,hu]=ou(.001);function mu(e,t){return e.map((e=>e.map(((n,r)=>0==r||8==r||null==n?n:t(1==r||0==e[8]?n:e[1]+n)))))}function pu(e,t){return(n,r,a,i,o)=>{let l,s,c,u,d,h,m=t.find((e=>o>=e[0]))||t[t.length-1];return r.map((t=>{let n=e(t),r=n.getFullYear(),a=n.getMonth(),i=n.getDate(),o=n.getHours(),p=n.getMinutes(),f=n.getSeconds(),v=r!=l&&m[2]||a!=s&&m[3]||i!=c&&m[4]||o!=u&&m[5]||p!=d&&m[6]||f!=h&&m[7]||m[1];return l=r,s=a,c=i,u=o,d=p,h=f,v(n)}))}}function fu(e,t,n){return new Date(e,t,n)}function vu(e,t){return t(e)}_c(2,-53,53,[1]);function gu(e,t){return(n,r,a,i)=>null==i?cs:t(e(r))}const yu={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function(e,t){let n=e.series[t];return n.width?n.stroke(e,t):n.points.width?n.points.stroke(e,t):null},fill:function(e,t){return e.series[t].fill(e,t)},dash:"solid"},idx:null,idxs:null,values:[]};const _u=[0,0];function bu(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e=>{0==e.button&&(!r||e.target==t)&&n(e)}}function wu(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e=>{(!r||e.target==t)&&n(e)}}const ku={show:!0,x:!0,y:!0,lock:!1,move:function(e,t,n){return _u[0]=t,_u[1]=n,_u},points:{one:!1,show:function(e,t){let n=e.cursor.points,r=bs(),a=n.size(e,t);ys(r,Wl,a),ys(r,Kl,a);let i=a/-2;ys(r,"marginLeft",i),ys(r,"marginTop",i);let o=n.width(e,t,a);return o&&ys(r,"borderWidth",o),r},size:function(e,t){return e.series[t].points.size},width:0,stroke:function(e,t){let n=e.series[t].points;return n._stroke||n._fill},fill:function(e,t){let n=e.series[t].points;return n._fill||n._stroke}},bind:{mousedown:bu,mouseup:bu,click:bu,dblclick:bu,mousemove:wu,mouseleave:wu,mouseenter:wu},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,t,n,r,a)=>r-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Su={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},xu=$c({},Su,{filter:lc}),Cu=$c({},xu,{size:10}),Eu=$c({},Su,{show:!1}),Nu='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Au="bold "+Nu,Mu={show:!0,scale:"x",stroke:Xl,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Au,side:2,grid:xu,ticks:Cu,border:Eu,font:Nu,lineGap:1.5,rotate:0},Tu={show:!0,scale:"x",auto:!1,sorted:1,min:nc,max:-nc,idxs:[]};function $u(e,t,n,r,a){return t.map((e=>null==e?"":Us(e)))}function Lu(e,t,n,r,a,i,o){let l=[],s=gc.get(a)||0;for(let c=n=o?n:vc(pc(n,a),s);c<=r;c=vc(c+a,s))l.push(Object.is(c,-0)?0:c);return l}function Pu(e,t,n,r,a,i,o){const l=[],s=e.scales[e.axes[t].scale].log,c=Ys((10==s?Xs:ec)(n));a=Gs(s,c),10==s&&(a=Qc[$s(a,Qc)]);let u=n,d=a*s;10==s&&(d=Qc[$s(d,Qc)]);do{l.push(u),u+=a,10!=s||gc.has(u)||(u=vc(u,gc.get(a))),u>=d&&(d=(a=u)*s,10==s&&(d=Qc[$s(d,Qc)]))}while(u<=r);return l}function Iu(e,t,n,r,a,i,o){let l=e.scales[e.axes[t].scale].asinh,s=r>l?Pu(e,t,Zs(l,n),r,a):[l],c=r>=0&&n<=0?[0]:[];return(n<-l?Pu(e,t,Zs(l,-r),-n,a):[l]).reverse().map((e=>-e)).concat(c,s)}const Ou=/./,Ru=/[12357]/,Du=/[125]/,zu=/1/,Fu=(e,t,n,r)=>e.map(((e,a)=>4==t&&0==e||a%r==0&&n.test(e.toExponential()[e<0?1:0])?e:null));function ju(e,t,n,r,a){let i=e.axes[n],o=i.scale,l=e.scales[o],s=e.valToPos,c=i._space,u=s(10,o),d=s(9,o)-u>=c?Ou:s(7,o)-u>=c?Ru:s(5,o)-u>=c?Du:zu;if(d==zu){let e=qs(s(1,o)-u);if(e<c)return Fu(t.slice().reverse(),l.distr,d,Ks(c/e)).reverse()}return Fu(t,l.distr,d,1)}function Hu(e,t,n,r,a){let i=e.axes[n],o=i.scale,l=i._space,s=e.valToPos,c=qs(s(1,o)-s(2,o));return c<l?Fu(t.slice().reverse(),3,Ou,Ks(l/c)).reverse():t}function Uu(e,t,n,r){return null==r?cs:null==t?"":Us(t)}const Vu={show:!0,scale:"y",stroke:Xl,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Au,side:3,grid:xu,ticks:Cu,border:Eu,font:Nu,lineGap:1.5,rotate:0};const Bu={scale:null,auto:!0,sorted:0,min:nc,max:-nc},qu=(e,t,n,r,a)=>a,Yu={show:!0,auto:!0,sorted:0,gaps:qu,alpha:1,facets:[$c({},Bu,{scale:"x"}),$c({},Bu,{scale:"y"})]},Wu={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:qu,alpha:1,points:{show:function(e,t){let{scale:n,idxs:r}=e.series[0],a=e._data[0],i=e.valToPos(a[r[0]],n,!0),o=e.valToPos(a[r[1]],n,!0),l=qs(o-i)/(e.series[t].points.space*ps);return r[1]-r[0]<=l},filter:null},values:null,min:nc,max:-nc,idxs:[],path:null,clip:null};function Ku(e,t,n,r,a){return n/10}const Qu={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Zu=$c({},Qu,{time:!1,ori:1}),Gu={};function Ju(e,t){let n=Gu[e];return n||(n={key:e,plots:[],sub(e){n.plots.push(e)},unsub(e){n.plots=n.plots.filter((t=>t!=e))},pub(e,t,r,a,i,o,l){for(let s=0;s<n.plots.length;s++)n.plots[s]!=t&&n.plots[s].pub(e,t,r,a,i,o,l)}},null!=e&&(Gu[e]=n)),n}function Xu(e,t,n){const r=e.mode,a=e.series[t],i=2==r?e._data[t]:e._data,o=e.scales,l=e.bbox;let s=i[0],c=2==r?i[1]:i[t],u=2==r?o[a.facets[0].scale]:o[e.series[0].scale],d=2==r?o[a.facets[1].scale]:o[a.scale],h=l.left,m=l.top,p=l.width,f=l.height,v=e.valToPosH,g=e.valToPosV;return 0==u.ori?n(a,s,c,u,d,v,g,h,m,p,f,ld,cd,dd,md,fd):n(a,s,c,u,d,g,v,m,h,f,p,sd,ud,hd,pd,vd)}function ed(e,t){let n=0,r=0,a=Fs(e.bands,wc);for(let i=0;i<a.length;i++){let e=a[i];e.series[0]==t?n=e.dir:e.series[1]==t&&(1==e.dir?r|=1:r|=2)}return[n,1==r?-1:2==r?1:3==r?2:0]}function td(e,t,n,r,a){let i=e.mode,o=e.series[t],l=2==i?o.facets[1].scale:o.scale,s=e.scales[l];return-1==a?s.min:1==a?s.max:3==s.distr?1==s.dir?s.min:s.max:0}function nd(e,t,n,r,a,i){return Xu(e,t,((e,t,o,l,s,c,u,d,h,m,p)=>{let f=e.pxRound;const v=l.dir*(0==l.ori?1:-1),g=0==l.ori?cd:ud;let y,_;1==v?(y=n,_=r):(y=r,_=n);let b=f(c(t[y],l,m,d)),w=f(u(o[y],s,p,h)),k=f(c(t[_],l,m,d)),S=f(u(1==i?s.max:s.min,s,p,h)),x=new Path2D(a);return g(x,k,S),g(x,b,S),g(x,b,w),x}))}function rd(e,t,n,r,a,i){let o=null;if(e.length>0){o=new Path2D;const l=0==t?dd:hd;let s=n;for(let t=0;t<e.length;t++){let n=e[t];if(n[1]>n[0]){let e=n[0]-s;e>0&&l(o,s,r,e,r+i),s=n[1]}}let c=n+a-s,u=10;c>0&&l(o,s,r-u/2,c,r+i+u)}return o}function ad(e,t,n,r,a,i,o){let l=[],s=e.length;for(let c=1==a?n:r;c>=n&&c<=r;c+=a){if(null===t[c]){let u=c,d=c;if(1==a)for(;++c<=r&&null===t[c];)d=c;else for(;--c>=n&&null===t[c];)d=c;let h=i(e[u]),m=d==u?h:i(e[d]),p=u-a;h=o<=0&&p>=0&&p<s?i(e[p]):h;let f=d+a;m=o>=0&&f>=0&&f<s?i(e[f]):m,m>=h&&l.push([h,m])}}return l}function id(e){return 0==e?oc:1==e?Ws:t=>mc(t,e)}function od(e){let t=0==e?ld:sd,n=0==e?(e,t,n,r,a,i)=>{e.arcTo(t,n,r,a,i)}:(e,t,n,r,a,i)=>{e.arcTo(n,t,a,r,i)},r=0==e?(e,t,n,r,a)=>{e.rect(t,n,r,a)}:(e,t,n,r,a)=>{e.rect(n,t,a,r)};return function(e,a,i,o,l){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;0==s&&0==c?r(e,a,i,o,l):(s=Qs(s,o/2,l/2),c=Qs(c,o/2,l/2),t(e,a+s,i),n(e,a+o,i,a+o,i+l,s),n(e,a+o,i+l,a,i+l,c),n(e,a,i+l,a,i,c),n(e,a,i,a+o,i,s),e.closePath())}}const ld=(e,t,n)=>{e.moveTo(t,n)},sd=(e,t,n)=>{e.moveTo(n,t)},cd=(e,t,n)=>{e.lineTo(t,n)},ud=(e,t,n)=>{e.lineTo(n,t)},dd=od(0),hd=od(1),md=(e,t,n,r,a,i)=>{e.arc(t,n,r,a,i)},pd=(e,t,n,r,a,i)=>{e.arc(n,t,r,a,i)},fd=(e,t,n,r,a,i,o)=>{e.bezierCurveTo(t,n,r,a,i,o)},vd=(e,t,n,r,a,i,o)=>{e.bezierCurveTo(n,t,a,r,o,i)};function gd(e){return(e,t,n,r,a)=>Xu(e,t,((t,i,o,l,s,c,u,d,h,m,p)=>{let f,v,{pxRound:g,points:y}=t;0==l.ori?(f=ld,v=md):(f=sd,v=pd);const _=vc(y.width*ps,3);let b=(y.size-y.width)/2*ps,w=vc(2*b,3),k=new Path2D,S=new Path2D,{left:x,top:C,width:E,height:N}=e.bbox;dd(S,x-w,C-w,E+2*w,N+2*w);const A=e=>{if(null!=o[e]){let t=g(c(i[e],l,m,d)),n=g(u(o[e],s,p,h));f(k,t+b,n),v(k,t,n,b,0,2*Bs)}};if(a)a.forEach(A);else for(let e=n;e<=r;e++)A(e);return{stroke:_>0?k:null,fill:k,clip:S,flags:3}}))}function yd(e){return(t,n,r,a,i,o)=>{r!=a&&(i!=r&&o!=r&&e(t,n,r),i!=a&&o!=a&&e(t,n,a),e(t,n,o))}}const _d=yd(cd),bd=yd(ud);function wd(e){const t=Fs(e?.alignGaps,0);return(e,n,r,a)=>Xu(e,n,((i,o,l,s,c,u,d,h,m,p,f)=>{let v,g,y=i.pxRound,_=e=>y(u(e,s,p,h)),b=e=>y(d(e,c,f,m));0==s.ori?(v=cd,g=_d):(v=ud,g=bd);const w=s.dir*(0==s.ori?1:-1),k={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},S=k.stroke;let x,C,E,N=nc,A=-nc,M=_(o[1==w?r:a]),T=Ls(l,r,a,1*w),$=Ls(l,r,a,-1*w),L=_(o[T]),P=_(o[$]),I=!1;for(let e=1==w?r:a;e>=r&&e<=a;e+=w){let t=_(o[e]),n=l[e];t==M?null!=n?(C=b(n),N==nc&&(v(S,t,C),x=C),N=Qs(C,N),A=Zs(C,A)):null===n&&(I=!0):(N!=nc&&(g(S,M,N,A,x,C),E=M),null!=n?(C=b(n),v(S,t,C),N=A=x=C):(N=nc,A=-nc,null===n&&(I=!0)),M=t)}N!=nc&&N!=A&&E!=M&&g(S,M,N,A,x,C);let[O,R]=ed(e,n);if(null!=i.fill||0!=O){let t=k.fill=new Path2D(S),r=b(i.fillTo(e,n,i.min,i.max,O));v(t,P,r),v(t,L,r)}if(!i.spanGaps){let c=[];I&&c.push(...ad(o,l,r,a,w,_,t)),k.gaps=c=i.gaps(e,n,r,a,c),k.clip=rd(c,s.ori,h,m,p,f)}return 0!=R&&(k.band=2==R?[nd(e,n,r,a,S,-1),nd(e,n,r,a,S,1)]:nd(e,n,r,a,S,R)),k}))}function kd(e,t,n,r,a,i){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nc;if(e.length>1){let l=null;for(let s=0,c=1/0;s<e.length;s++)if(void 0!==t[s]){if(null!=l){let t=qs(e[s]-e[l]);t<c&&(c=t,o=qs(n(e[s],r,a,i)-n(e[l],r,a,i)))}l=s}}return o}function Sd(e,t,n,r,a,i){const o=e.length;if(o<2)return null;const l=new Path2D;if(n(l,e[0],t[0]),2==o)r(l,e[1],t[1]);else{let n=Array(o),r=Array(o-1),i=Array(o-1),s=Array(o-1);for(let a=0;a<o-1;a++)i[a]=t[a+1]-t[a],s[a]=e[a+1]-e[a],r[a]=i[a]/s[a];n[0]=r[0];for(let e=1;e<o-1;e++)0===r[e]||0===r[e-1]||r[e-1]>0!==r[e]>0?n[e]=0:(n[e]=3*(s[e-1]+s[e])/((2*s[e]+s[e-1])/r[e-1]+(s[e]+2*s[e-1])/r[e]),isFinite(n[e])||(n[e]=0));n[o-1]=r[o-2];for(let c=0;c<o-1;c++)a(l,e[c]+s[c]/3,t[c]+n[c]*s[c]/3,e[c+1]-s[c]/3,t[c+1]-n[c+1]*s[c]/3,e[c+1],t[c+1])}return l}const xd=new Set;function Cd(){for(let e of xd)e.syncRect(!0)}us&&(Ms("resize",hs,Cd),Ms("scroll",hs,Cd,!0),Ms(ss,hs,(()=>{jd.pxRatio=ps})));const Ed=wd(),Nd=gd();function Ad(e,t,n,r){return(r?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map(((e,r)=>Md(e,r,t,n)))}function Md(e,t,n,r){return $c({},0==t?n:r,e)}function Td(e,t,n){return null==t?kc:[t,n]}const $d=Td;function Ld(e,t,n){return null==t?kc:zs(t,n,.1,!0)}function Pd(e,t,n,r){return null==t?kc:Ps(t,n,e.scales[r].log,!1)}const Id=Pd;function Od(e,t,n,r){return null==t?kc:Is(t,n,e.scales[r].log,!1)}const Rd=Od;function Dd(e,t,n,r,a){let i=Zs(rc(e),rc(t)),o=t-e,l=$s(a/r*o,n);do{let e=n[l],t=r*e/o;if(t>=a&&i+(e<5?gc.get(e):0)<=17)return[e,t]}while(++l<n.length);return[0,0]}function zd(e){let t,n;return[e=e.replace(/(\d+)px/,((e,r)=>(t=Ws((n=+r)*ps))+"px")),t,n]}function Fd(e){e.show&&[e.font,e.labelFont].forEach((e=>{let t=vc(e[2]*ps,1);e[0]=e[0].replace(/[0-9.]+px/,t+"px"),e[1]=t}))}function jd(e,t,n){const r={mode:Fs(e.mode,1)},a=r.mode;function i(e,t){return((3==t.distr?Xs(e>0?e:t.clamp(r,e,t.min,t.max,t.key)):4==t.distr?tc(e,t.asinh):100==t.distr?t.fwd(e):e)-t._min)/(t._max-t._min)}function o(e,t,n,r){let a=i(e,t);return r+n*(-1==t.dir?1-a:a)}function l(e,t,n,r){let a=i(e,t);return r+n*(-1==t.dir?a:1-a)}function s(e,t,n,r){return 0==t.ori?o(e,t,n,r):l(e,t,n,r)}r.valToPosH=o,r.valToPosV=l;let c=!1;r.status=0;const u=r.root=bs("uplot");if(null!=e.id&&(u.id=e.id),vs(u,e.class),e.title){bs("u-title",u).textContent=e.title}const d=_s("canvas"),h=r.ctx=d.getContext("2d"),m=bs("u-wrap",u);Ms("click",m,(e=>{if(e.target===f){(Tt!=Et||$t!=Nt)&&jt.click(r,e)}}),!0);const p=r.under=bs("u-under",m);m.appendChild(d);const f=r.over=bs("u-over",m),v=+Fs((e=Tc(e)).pxAlign,1),g=id(v);(e.plugins||[]).forEach((t=>{t.opts&&(e=t.opts(r,e)||e)}));const y=e.ms||.001,_=r.series=1==a?Ad(e.series||[],Tu,Wu,!1):(b=e.series||[null],w=Yu,b.map(((e,t)=>0==t?{}:$c({},w,e))));var b,w;const k=r.axes=Ad(e.axes||[],Mu,Vu,!0),S=r.scales={},x=r.bands=e.bands||[];x.forEach((e=>{e.fill=ic(e.fill||null),e.dir=Fs(e.dir,-1)}));const C=2==a?_[1].facets[0].scale:_[0].scale,E={axes:function(){for(let e=0;e<k.length;e++){let t=k[e];if(!t.show||!t._show)continue;let n,a,i=t.side,o=i%2,l=t.stroke(r,e),c=0==i||3==i?-1:1;if(t.label){let e=t.labelGap*c,r=Ws((t._lpos+e)*ps);lt(t.labelFont[0],l,"center",2==i?Ql:Zl),h.save(),1==o?(n=a=0,h.translate(r,Ws(pe+ve/2)),h.rotate((3==i?-Bs:Bs)/2)):(n=Ws(me+fe/2),a=r),h.fillText(t.label,n,a),h.restore()}let[u,d]=t._found;if(0==d)continue;let m=S[t.scale],p=0==o?fe:ve,f=0==o?me:pe,v=Ws(t.gap*ps),y=t._splits,_=2==m.distr?y.map((e=>nt[e])):y,b=2==m.distr?nt[y[1]]-nt[y[0]]:u,w=t.ticks,x=t.border,C=w.show?Ws(w.size*ps):0,E=t._rotate*-Bs/180,N=g(t._pos*ps),A=N+(C+v)*c;a=0==o?A:0,n=1==o?A:0,lt(t.font[0],l,1==t.align?Gl:2==t.align?Jl:E>0?Gl:E<0?Jl:0==o?"center":3==i?Jl:Gl,E||1==o?"middle":2==i?Ql:Zl);let M=t.font[1]*t.lineGap,T=y.map((e=>g(s(e,m,p,f)))),$=t._values;for(let e=0;e<$.length;e++){let t=$[e];if(null!=t){0==o?n=T[e]:a=T[e],t=""+t;let r=-1==t.indexOf("\n")?[t]:t.split(/\n/gm);for(let e=0;e<r.length;e++){let t=r[e];E?(h.save(),h.translate(n,a+e*M),h.rotate(E),h.fillText(t,0,0),h.restore()):h.fillText(t,n,a+e*M)}}}w.show&&vt(T,w.filter(r,_,e,d,b),o,i,N,C,vc(w.width*ps,3),w.stroke(r,e),w.dash,w.cap);let L=t.grid;L.show&&vt(T,L.filter(r,_,e,d,b),o,0==o?2:1,0==o?pe:me,0==o?ve:fe,vc(L.width*ps,3),L.stroke(r,e),L.dash,L.cap),x.show&&vt([N],[1],0==o?1:0,0==o?1:2,1==o?pe:me,1==o?ve:fe,vc(x.width*ps,3),x.stroke(r,e),x.dash,x.cap)}Sn("drawAxes")},series:function(){Ue>0&&(_.forEach(((e,n)=>{if(n>0&&e.show&&(ut(n,!1),ut(n,!0),null==e._paths)){tt!=e.alpha&&(h.globalAlpha=tt=e.alpha);let i=2==a?[0,t[n][0].length-1]:function(e){let t=ac(Ve-1,0,Ue-1),n=ac(Be+1,0,Ue-1);for(;null==e[t]&&t>0;)t--;for(;null==e[n]&&n<Ue-1;)n++;return[t,n]}(t[n]);e._paths=e.paths(r,n,i[0],i[1]),1!=tt&&(h.globalAlpha=tt=1)}})),_.forEach(((e,t)=>{if(t>0&&e.show){tt!=e.alpha&&(h.globalAlpha=tt=e.alpha),null!=e._paths&&dt(t,!1);{let n=null!=e._paths?e._paths.gaps:null,a=e.points.show(r,t,Ve,Be,n),i=e.points.filter(r,t,a,n);(a||i)&&(e.points._paths=e.points.paths(r,t,Ve,Be,i),dt(t,!0))}1!=tt&&(h.globalAlpha=tt=1),Sn("drawSeries",t)}})))}},N=(e.drawOrder||["axes","series"]).map((e=>E[e]));function A(t){let n=S[t];if(null==n){let r=(e.scales||bc)[t]||bc;if(null!=r.from)A(r.from),S[t]=$c({},S[r.from],r,{key:t});else{n=S[t]=$c({},t==C?Qu:Zu,r),n.key=t;let e=n.time,i=n.range,o=Sc(i);if((t!=C||2==a&&!e)&&(!o||null!=i[0]&&null!=i[1]||(i={min:null==i[0]?Os:{mode:1,hard:i[0],soft:i[0]},max:null==i[1]?Os:{mode:1,hard:i[1],soft:i[1]}},o=!1),!o&&Ec(i))){let e=i;i=(t,n,r)=>null==n?kc:zs(n,r,e)}n.range=ic(i||(e?$d:t==C?3==n.distr?Id:4==n.distr?Rd:Td:3==n.distr?Pd:4==n.distr?Od:Ld)),n.auto=ic(!o&&n.auto),n.clamp=ic(n.clamp||Ku),n._min=n._max=null}}}A("x"),A("y"),1==a&&_.forEach((e=>{A(e.scale)})),k.forEach((e=>{A(e.scale)}));for(let Tn in e.scales)A(Tn);const M=S[C],T=M.distr;let $,L;0==M.ori?(vs(u,"u-hz"),$=o,L=l):(vs(u,"u-vt"),$=l,L=o);const P={};for(let Tn in S){let e=S[Tn];null==e.min&&null==e.max||(P[Tn]={min:e.min,max:e.max},e.min=e.max=null)}const I=e.tzDate||(e=>new Date(Ws(e/y))),O=e.fmtDate||Uc,R=1==y?cu(I):hu(I),D=pu(I,mu(1==y?su:du,O)),z=gu(I,vu("{YYYY}-{MM}-{DD} {h}:{mm}{aa}",O)),F=[],j=r.legend=$c({},yu,e.legend),H=j.show,U=j.markers;let V,B,q;j.idxs=F,U.width=ic(U.width),U.dash=ic(U.dash),U.stroke=ic(U.stroke),U.fill=ic(U.fill);let Y,W=[],K=[],Q=!1,Z={};if(j.live){const e=_[1]?_[1].values:null;Q=null!=e,Y=Q?e(r,1,0):{_:0};for(let t in Y)Z[t]=cs}if(H)if(V=_s("table","u-legend",u),q=_s("tbody",null,V),j.mount(r,V),Q){B=_s("thead",null,V,q);let e=_s("tr",null,B);for(var G in _s("th",null,e),Y)_s("th",Yl,e).textContent=G}else vs(V,"u-inline"),j.live&&vs(V,"u-live");const J={show:!0},X={show:!1};const ee=new Map;function te(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=ee.get(t)||{},o=Ee.bind[e](r,t,n,a);o&&(Ms(e,t,i[e]=o),ee.set(t,i))}function ne(e,t,n){const r=ee.get(t)||{};for(let a in r)null!=e&&a!=e||(Ts(a,t,r[a]),delete r[a]);null==e&&ee.delete(t)}let re=0,ae=0,ie=0,oe=0,le=0,se=0,ce=le,ue=se,de=ie,he=oe,me=0,pe=0,fe=0,ve=0;r.bbox={};let ge=!1,ye=!1,_e=!1,be=!1,we=!1,ke=!1;function Se(e,t,n){(n||e!=r.width||t!=r.height)&&xe(e,t),_t(!1),_e=!0,ye=!0,Rt()}function xe(e,t){r.width=re=ie=e,r.height=ae=oe=t,le=se=0,function(){let e=!1,t=!1,n=!1,r=!1;k.forEach(((a,i)=>{if(a.show&&a._show){let{side:i,_size:o}=a,l=i%2,s=o+(null!=a.label?a.labelSize:0);s>0&&(l?(ie-=s,3==i?(le+=s,r=!0):n=!0):(oe-=s,0==i?(se+=s,e=!0):t=!0))}})),ze[0]=e,ze[1]=n,ze[2]=t,ze[3]=r,ie-=He[1]+He[3],le+=He[3],oe-=He[2]+He[0],se+=He[0]}(),function(){let e=le+ie,t=se+oe,n=le,r=se;function a(a,i){switch(a){case 1:return e+=i,e-i;case 2:return t+=i,t-i;case 3:return n-=i,n+i;case 0:return r-=i,r+i}}k.forEach(((e,t)=>{if(e.show&&e._show){let t=e.side;e._pos=a(t,e._size),null!=e.label&&(e._lpos=a(t,e.labelSize))}}))}();let n=r.bbox;me=n.left=mc(le*ps,.5),pe=n.top=mc(se*ps,.5),fe=n.width=mc(ie*ps,.5),ve=n.height=mc(oe*ps,.5)}const Ce=3;r.setSize=function(e){let{width:t,height:n}=e;Se(t,n)};const Ee=r.cursor=$c({},ku,{drag:{y:2==a}},e.cursor);if(null==Ee.dataIdx){var Ne;let e=Ee.hover,n=e.skip=new Set(null!==(Ne=e.skip)&&void 0!==Ne?Ne:[]);n.add(void 0);let r=e.prox=ic(e.prox),a=e.bias??=0;Ee.dataIdx=(e,i,o,l)=>{var s;if(0==i)return o;let c=o,u=null!==(s=r(e,i,o,l))&&void 0!==s?s:nc,d=u>=0&&u<nc,h=0==M.ori?ie:oe,m=Ee.left,p=t[0],f=t[i];if(n.has(f[o])){c=null;let e,t=null,r=null;if(0==a||-1==a)for(e=o;null==t&&e-- >0;)n.has(f[e])||(t=e);if(0==a||1==a)for(e=o;null==r&&e++<f.length;)n.has(f[e])||(r=e);if(null!=t||null!=r)if(d){let e=m-(null==t?-1/0:$(p[t],M,h,0)),n=(null==r?1/0:$(p[r],M,h,0))-m;e<=n?e<=u&&(c=t):n<=u&&(c=r)}else c=null==r?t:null==t?r:o-t<=r-o?t:r}else if(d){qs(m-$(p[o],M,h,0))>u&&(c=null)}return c}}const Ae=e=>{Ee.event=e};Ee.idxs=F,Ee._lock=!1;let Me=Ee.points;Me.show=ic(Me.show),Me.size=ic(Me.size),Me.stroke=ic(Me.stroke),Me.width=ic(Me.width),Me.fill=ic(Me.fill);const Te=r.focus=$c({},e.focus||{alpha:.3},Ee.focus),$e=Te.prox>=0,Le=$e&&Me.one;let Pe=[],Ie=[],Oe=[];function Re(e,t){let n=Me.show(r,t);if(n)return vs(n,"u-cursor-pt"),vs(n,e.class),ks(n,-10,-10,ie,oe),f.insertBefore(n,Pe[t]),n}function De(e,t){if(1==a||t>0){let t=1==a&&S[e.scale].time,n=e.value;e.value=t?Cc(n)?gu(I,vu(n,O)):n||z:n||Uu,e.label=e.label||(t?"Time":"Value")}if(Le||t>0){e.width=null==e.width?1:e.width,e.paths=e.paths||Ed||sc,e.fillTo=ic(e.fillTo||td),e.pxAlign=+Fs(e.pxAlign,v),e.pxRound=id(e.pxAlign),e.stroke=ic(e.stroke||null),e.fill=ic(e.fill||null),e._stroke=e._fill=e._paths=e._focus=null;let t=vc((3+2*(Zs(1,e.width)||1))*1,3),n=e.points=$c({},{size:t,width:Zs(1,.2*t),stroke:e.stroke,space:2*t,paths:Nd,_stroke:null,_fill:null},e.points);n.show=ic(n.show),n.filter=ic(n.filter),n.fill=ic(n.fill),n.stroke=ic(n.stroke),n.paths=ic(n.paths),n.pxAlign=e.pxAlign}if(H){let n=function(e,t){if(0==t&&(Q||!j.live||2==a))return kc;let n=[],i=_s("tr","u-series",q,q.childNodes[t]);vs(i,e.class),e.show||vs(i,ql);let o=_s("th",null,i);if(U.show){let e=bs("u-marker",o);if(t>0){let n=U.width(r,t);n&&(e.style.border=n+"px "+U.dash(r,t)+" "+U.stroke(r,t)),e.style.background=U.fill(r,t)}}let l=bs(Yl,o);for(var s in l.textContent=e.label,t>0&&(U.show||(l.style.color=e.width>0?U.stroke(r,t):U.fill(r,t)),te("click",o,(t=>{if(Ee._lock)return;Ae(t);let n=_.indexOf(e);if((t.ctrlKey||t.metaKey)!=j.isolate){let e=_.some(((e,t)=>t>0&&t!=n&&e.show));_.forEach(((t,r)=>{r>0&&Wt(r,e?r==n?J:X:J,!0,Cn.setSeries)}))}else Wt(n,{show:!e.show},!0,Cn.setSeries)}),!1),$e&&te(as,o,(t=>{Ee._lock||(Ae(t),Wt(_.indexOf(e),Gt,!0,Cn.setSeries))}),!1)),Y){let e=_s("td","u-value",i);e.textContent="--",n.push(e)}return[i,n]}(e,t);W.splice(t,0,n[0]),K.splice(t,0,n[1]),j.values.push(null)}if(Ee.show){F.splice(t,0,null);let n=null;Le?0==t&&(n=Re(e,t)):t>0&&(n=Re(e,t)),Pe.splice(t,0,n),Ie.splice(t,0,0),Oe.splice(t,0,0)}Sn("addSeries",t)}r.addSeries=function(e,t){t=null==t?_.length:t,e=1==a?Md(e,t,Tu,Wu):Md(e,t,{},Yu),_.splice(t,0,e),De(_[t],t)},r.delSeries=function(e){if(_.splice(e,1),H){j.values.splice(e,1),K.splice(e,1);let t=W.splice(e,1)[0];ne(null,t.firstChild),t.remove()}Ee.show&&(F.splice(e,1),Pe.splice(e,1)[0].remove(),Ie.splice(e,1),Oe.splice(e,1)),Sn("delSeries",e)};const ze=[!1,!1,!1,!1];function Fe(e,t,n,r){let[a,i,o,l]=n,s=t%2,c=0;return 0==s&&(l||i)&&(c=0==t&&!a||2==t&&!o?Ws(Mu.size/3):0),1==s&&(a||o)&&(c=1==t&&!i||3==t&&!l?Ws(Vu.size/2):0),c}const je=r.padding=(e.padding||[Fe,Fe,Fe,Fe]).map((e=>ic(Fs(e,Fe)))),He=r._padding=je.map(((e,t)=>e(r,t,ze,0)));let Ue,Ve=null,Be=null;const qe=1==a?_[0].idxs:null;let Ye,We,Ke,Qe,Ze,Ge,Je,Xe,et,tt,nt=null,rt=!1;function at(e,n){if(t=null==e?[]:e,r.data=r._data=t,2==a){Ue=0;for(let e=1;e<_.length;e++)Ue+=t[e][0].length}else{0==t.length&&(r.data=r._data=t=[[]]),nt=t[0],Ue=nt.length;let e=t;if(2==T){e=t.slice();let n=e[0]=Array(Ue);for(let e=0;e<Ue;e++)n[e]=e}r._data=t=e}if(_t(!0),Sn("setData"),2==T&&(_e=!0),!1!==n){let e=M;e.auto(r,rt)?it():Yt(C,e.min,e.max),be=be||Ee.left>=0,ke=!0,Rt()}}function it(){let e,n;rt=!0,1==a&&(Ue>0?(Ve=qe[0]=0,Be=qe[1]=Ue-1,e=t[0][Ve],n=t[0][Be],2==T?(e=Ve,n=Be):e==n&&(3==T?[e,n]=Ps(e,e,M.log,!1):4==T?[e,n]=Is(e,e,M.log,!1):M.time?n=e+Ws(86400/y):[e,n]=zs(e,n,.1,!0))):(Ve=qe[0]=e=null,Be=qe[1]=n=null)),Yt(C,e,n)}function ot(e,t,n,r,a,i){e??=es,n??=wc,r??="butt",a??=es,i??="round",e!=Ye&&(h.strokeStyle=Ye=e),a!=We&&(h.fillStyle=We=a),t!=Ke&&(h.lineWidth=Ke=t),i!=Ze&&(h.lineJoin=Ze=i),r!=Ge&&(h.lineCap=Ge=r),n!=Qe&&h.setLineDash(Qe=n)}function lt(e,t,n,r){t!=We&&(h.fillStyle=We=t),e!=Je&&(h.font=Je=e),n!=Xe&&(h.textAlign=Xe=n),r!=et&&(h.textBaseline=et=r)}function st(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(a.length>0&&e.auto(r,rt)&&(null==t||null==t.min)){let t=Fs(Ve,0),r=Fs(Be,a.length-1),o=null==n.min?3==e.distr?function(e,t,n){let r=nc,a=-nc;for(let i=t;i<=n;i++){let t=e[i];null!=t&&t>0&&(t<r&&(r=t),t>a&&(a=t))}return[r,a]}(a,t,r):function(e,t,n,r){let a=nc,i=-nc;if(1==r)a=e[t],i=e[n];else if(-1==r)a=e[n],i=e[t];else for(let o=t;o<=n;o++){let t=e[o];null!=t&&(t<a&&(a=t),t>i&&(i=t))}return[a,i]}(a,t,r,i):[n.min,n.max];e.min=Qs(e.min,n.min=o[0]),e.max=Zs(e.max,n.max=o[1])}}r.setData=at;const ct={min:null,max:null};function ut(e,t){let n=t?_[e].points:_[e];n._stroke=n.stroke(r,e),n._fill=n.fill(r,e)}function dt(e,n){let a=n?_[e].points:_[e],{stroke:i,fill:o,clip:l,flags:s,_stroke:c=a._stroke,_fill:u=a._fill,_width:d=a.width}=a._paths;d=vc(d*ps,3);let m=null,p=d%2/2;n&&null==u&&(u=d>0?"#fff":c);let f=1==a.pxAlign&&p>0;if(f&&h.translate(p,p),!n){let e=me-d/2,t=pe-d/2,n=fe+d,r=ve+d;m=new Path2D,m.rect(e,t,n,r)}n?mt(c,d,a.dash,a.cap,u,i,o,s,l):function(e,n,a,i,o,l,s,c,u,d,h){let m=!1;0!=u&&x.forEach(((p,f)=>{if(p.series[0]==e){let e,v=_[p.series[1]],g=t[p.series[1]],y=(v._paths||bc).band;Sc(y)&&(y=1==p.dir?y[0]:y[1]);let b=null;v.show&&y&&function(e,t,n){for(t=Fs(t,0),n=Fs(n,e.length-1);t<=n;){if(null!=e[t])return!0;t++}return!1}(g,Ve,Be)?(b=p.fill(r,f)||l,e=v._paths.clip):y=null,mt(n,a,i,o,b,s,c,u,d,h,e,y),m=!0}})),m||mt(n,a,i,o,l,s,c,u,d,h)}(e,c,d,a.dash,a.cap,u,i,o,s,m,l),f&&h.translate(-p,-p)}const ht=3;function mt(e,t,n,r,a,i,o,l,s,c,u,d){ot(e,t,n,r,a),(s||c||d)&&(h.save(),s&&h.clip(s),c&&h.clip(c)),d?(l&ht)==ht?(h.clip(d),u&&h.clip(u),ft(a,o),pt(e,i,t)):2&l?(ft(a,o),h.clip(d),pt(e,i,t)):1&l&&(h.save(),h.clip(d),u&&h.clip(u),ft(a,o),h.restore(),pt(e,i,t)):(ft(a,o),pt(e,i,t)),(s||c||d)&&h.restore()}function pt(e,t,n){n>0&&(t instanceof Map?t.forEach(((e,t)=>{h.strokeStyle=Ye=t,h.stroke(e)})):null!=t&&e&&h.stroke(t))}function ft(e,t){t instanceof Map?t.forEach(((e,t)=>{h.fillStyle=We=t,h.fill(e)})):null!=t&&e&&h.fill(t)}function vt(e,t,n,r,a,i,o,l,s,c){let u=o%2/2;1==v&&h.translate(u,u),ot(l,o,s,c,l),h.beginPath();let d,m,p,f,g=a+(0==r||3==r?-i:i);0==n?(m=a,f=g):(d=a,p=g);for(let v=0;v<e.length;v++)null!=t[v]&&(0==n?d=p=e[v]:m=f=e[v],h.moveTo(d,m),h.lineTo(p,f));h.stroke(),1==v&&h.translate(-u,-u)}function gt(e){let t=!0;return k.forEach(((n,a)=>{if(!n.show)return;let i=S[n.scale];if(null==i.min)return void(n._show&&(t=!1,n._show=!1,_t(!1)));n._show||(t=!1,n._show=!0,_t(!1));let o=n.side,l=o%2,{min:s,max:c}=i,[u,d]=function(e,t,n,a){let i,o=k[e];if(a<=0)i=[0,0];else{let l=o._space=o.space(r,e,t,n,a);i=Dd(t,n,o._incrs=o.incrs(r,e,t,n,a,l),a,l)}return o._found=i}(a,s,c,0==l?ie:oe);if(0==d)return;let h=2==i.distr,m=n._splits=n.splits(r,a,s,c,u,d,h),p=2==i.distr?m.map((e=>nt[e])):m,f=2==i.distr?nt[m[1]]-nt[m[0]]:u,v=n._values=n.values(r,n.filter(r,p,a,d,f),a,d,f);n._rotate=2==o?n.rotate(r,v,a,d):0;let g=n._size;n._size=Ks(n.size(r,v,a,e)),null!=g&&n._size!=g&&(t=!1)})),t}function yt(e){let t=!0;return je.forEach(((n,a)=>{let i=n(r,a,ze,e);i!=He[a]&&(t=!1),He[a]=i})),t}function _t(e){_.forEach(((t,n)=>{n>0&&(t._paths=null,e&&(1==a?(t.min=null,t.max=null):t.facets.forEach((e=>{e.min=null,e.max=null}))))}))}let bt,wt,kt,St,xt,Ct,Et,Nt,At,Mt,Tt,$t,Lt=!1,Pt=!1,It=[];function Ot(){Pt=!1;for(let e=0;e<It.length;e++)Sn(...It[e]);It.length=0}function Rt(){Lt||(Pc(Dt),Lt=!0)}function Dt(){if(ge&&(!function(){for(let t in S){let e=S[t];null==P[t]&&(null==e.min||null!=P[C]&&e.auto(r,rt))&&(P[t]=ct)}for(let t in S){let e=S[t];null==P[t]&&null!=e.from&&null!=P[e.from]&&(P[t]=ct)}null!=P[C]&&_t(!0);let e={};for(let t in P){let n=P[t];if(null!=n){let i=e[t]=Tc(S[t],Nc);if(null!=n.min)$c(i,n);else if(t!=C||2==a)if(0==Ue&&null==i.from){let e=i.range(r,null,null,t);i.min=e[0],i.max=e[1]}else i.min=nc,i.max=-nc}}if(Ue>0){_.forEach(((n,i)=>{if(1==a){let a=n.scale,o=P[a];if(null==o)return;let l=e[a];if(0==i){let e=l.range(r,l.min,l.max,a);l.min=e[0],l.max=e[1],Ve=$s(l.min,t[0]),Be=$s(l.max,t[0]),Be-Ve>1&&(t[0][Ve]<l.min&&Ve++,t[0][Be]>l.max&&Be--),n.min=nt[Ve],n.max=nt[Be]}else n.show&&n.auto&&st(l,o,n,t[i],n.sorted);n.idxs[0]=Ve,n.idxs[1]=Be}else if(i>0&&n.show&&n.auto){let[r,a]=n.facets,o=r.scale,l=a.scale,[s,c]=t[i],u=e[o],d=e[l];null!=u&&st(u,P[o],r,s,r.sorted),null!=d&&st(d,P[l],a,c,a.sorted),n.min=a.min,n.max=a.max}}));for(let t in e){let n=e[t],a=P[t];if(null==n.from&&(null==a||null==a.min)){let e=n.range(r,n.min==nc?null:n.min,n.max==-nc?null:n.max,t);n.min=e[0],n.max=e[1]}}}for(let t in e){let n=e[t];if(null!=n.from){let a=e[n.from];if(null==a.min)n.min=n.max=null;else{let e=n.range(r,a.min,a.max,t);n.min=e[0],n.max=e[1]}}}let n={},i=!1;for(let t in e){let r=e[t],a=S[t];if(a.min!=r.min||a.max!=r.max){a.min=r.min,a.max=r.max;let e=a.distr;a._min=3==e?Xs(a.min):4==e?tc(a.min,a.asinh):100==e?a.fwd(a.min):a.min,a._max=3==e?Xs(a.max):4==e?tc(a.max,a.asinh):100==e?a.fwd(a.max):a.max,n[t]=i=!0}}if(i){_.forEach(((e,t)=>{2==a?t>0&&n.y&&(e._paths=null):n[e.scale]&&(e._paths=null)}));for(let e in n)_e=!0,Sn("setScale",e);Ee.show&&Ee.left>=0&&(be=ke=!0)}for(let t in P)P[t]=null}(),ge=!1),_e&&(!function(){let e=!1,t=0;for(;!e;){t++;let n=gt(t),a=yt(t);e=t==Ce||n&&a,e||(xe(r.width,r.height),ye=!0)}}(),_e=!1),ye){if(ys(p,Gl,le),ys(p,Ql,se),ys(p,Wl,ie),ys(p,Kl,oe),ys(f,Gl,le),ys(f,Ql,se),ys(f,Wl,ie),ys(f,Kl,oe),ys(m,Wl,re),ys(m,Kl,ae),d.width=Ws(re*ps),d.height=Ws(ae*ps),k.forEach((e=>{let{_el:t,_show:n,_size:r,_pos:a,side:i}=e;if(null!=t)if(n){let e=i%2==1;ys(t,e?"left":"top",a-(3===i||0===i?r:0)),ys(t,e?"width":"height",r),ys(t,e?"top":"left",e?se:le),ys(t,e?"height":"width",e?oe:ie),gs(t,ql)}else vs(t,ql)})),Ye=We=Ke=Ze=Ge=Je=Xe=et=Qe=null,tt=1,sn(!0),le!=ce||se!=ue||ie!=de||oe!=he){_t(!1);let e=ie/de,t=oe/he;if(Ee.show&&!be&&Ee.left>=0){Ee.left*=e,Ee.top*=t,kt&&ks(kt,Ws(Ee.left),0,ie,oe),St&&ks(St,0,Ws(Ee.top),ie,oe);for(let n=0;n<Pe.length;n++){let r=Pe[n];null!=r&&(Ie[n]*=e,Oe[n]*=t,ks(r,Ks(Ie[n]),Ks(Oe[n]),ie,oe))}}if(Vt.show&&!we&&Vt.left>=0&&Vt.width>0){Vt.left*=e,Vt.width*=e,Vt.top*=t,Vt.height*=t;for(let e in dn)ys(Bt,e,Vt[e])}ce=le,ue=se,de=ie,he=oe}Sn("setSize"),ye=!1}re>0&&ae>0&&(h.clearRect(0,0,d.width,d.height),Sn("drawClear"),N.forEach((e=>e())),Sn("draw")),Vt.show&&we&&(qt(Vt),we=!1),Ee.show&&be&&(on(null,!0,!1),be=!1),j.show&&j.live&&ke&&(rn(),ke=!1),c||(c=!0,r.status=1,Sn("ready")),rt=!1,Lt=!1}function zt(e,n){let a=S[e];if(null==a.from){if(0==Ue){let t=a.range(r,n.min,n.max,e);n.min=t[0],n.max=t[1]}if(n.min>n.max){let e=n.min;n.min=n.max,n.max=e}if(Ue>1&&null!=n.min&&null!=n.max&&n.max-n.min<1e-16)return;e==C&&2==a.distr&&Ue>0&&(n.min=$s(n.min,t[0]),n.max=$s(n.max,t[0]),n.min==n.max&&n.max++),P[e]=n,ge=!0,Rt()}}r.batch=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Lt=!0,Pt=t,e(r),Dt(),t&&It.length>0&&queueMicrotask(Ot)},r.redraw=(e,t)=>{_e=t||!1,!1!==e?Yt(C,M.min,M.max):Rt()},r.setScale=zt;let Ft=!1;const jt=Ee.drag;let Ht=jt.x,Ut=jt.y;Ee.show&&(Ee.x&&(bt=bs("u-cursor-x",f)),Ee.y&&(wt=bs("u-cursor-y",f)),0==M.ori?(kt=bt,St=wt):(kt=wt,St=bt),Tt=Ee.left,$t=Ee.top);const Vt=r.select=$c({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Bt=Vt.show?bs("u-select",Vt.over?f:p):null;function qt(e,t){if(Vt.show){for(let t in e)Vt[t]=e[t],t in dn&&ys(Bt,t,e[t]);!1!==t&&Sn("setSelect")}}function Yt(e,t,n){zt(e,{min:t,max:n})}function Wt(e,t,n,i){null!=t.focus&&function(e){if(e!=Zt){let t=null==e,n=1!=Te.alpha;_.forEach(((r,i)=>{if(1==a||i>0){let a=t||0==i||i==e;r._focus=t?null:a,n&&function(e,t){_[e].alpha=t,Ee.show&&Pe[e]&&(Pe[e].style.opacity=t);H&&W[e]&&(W[e].style.opacity=t)}(i,a?1:Te.alpha)}})),Zt=e,n&&Rt()}}(e),null!=t.show&&_.forEach(((n,r)=>{r>0&&(e==r||null==e)&&(n.show=t.show,function(e){let t=_[e],n=H?W[e]:null;t.show?n&&gs(n,ql):(n&&vs(n,ql),ks(Le?Pe[0]:Pe[e],-10,-10,ie,oe))}(r,t.show),2==a?(Yt(n.facets[0].scale,null,null),Yt(n.facets[1].scale,null,null)):Yt(n.scale,null,null),Rt())})),!1!==n&&Sn("setSeries",e,t),i&&An("setSeries",r,e,t)}let Kt,Qt,Zt;r.setSelect=qt,r.setSeries=Wt,r.addBand=function(e,t){e.fill=ic(e.fill||null),e.dir=Fs(e.dir,-1),t=null==t?x.length:t,x.splice(t,0,e)},r.setBand=function(e,t){$c(x[e],t)},r.delBand=function(e){null==e?x.length=0:x.splice(e,1)};const Gt={focus:!0};function Jt(e,t,n){let r=S[t];n&&(e=e/ps-(1==r.ori?se:le));let a=ie;1==r.ori&&(a=oe,e=a-e),-1==r.dir&&(e=a-e);let i=r._min,o=i+(r._max-i)*(e/a),l=r.distr;return 3==l?Gs(10,o):4==l?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Vs.sinh(e)*t}(o,r.asinh):100==l?r.bwd(o):o}function Xt(e,t){ys(Bt,Gl,Vt.left=e),ys(Bt,Wl,Vt.width=t)}function en(e,t){ys(Bt,Ql,Vt.top=e),ys(Bt,Kl,Vt.height=t)}H&&$e&&te(is,V,(e=>{Ee._lock||(Ae(e),null!=Zt&&Wt(null,Gt,!0,Cn.setSeries))})),r.valToIdx=e=>$s(e,t[0]),r.posToIdx=function(e,n){return $s(Jt(e,C,n),t[0],Ve,Be)},r.posToVal=Jt,r.valToPos=(e,t,n)=>0==S[t].ori?o(e,S[t],n?fe:ie,n?me:0):l(e,S[t],n?ve:oe,n?pe:0),r.setCursor=(e,t,n)=>{Tt=e.left,$t=e.top,on(null,t,n)};let tn=0==M.ori?Xt:en,nn=1==M.ori?Xt:en;function rn(e,t){if(null!=e&&(e.idxs?e.idxs.forEach(((e,t)=>{F[t]=e})):void 0!==e.idx&&F.fill(e.idx),j.idx=F[0]),H&&j.live){for(let e=0;e<_.length;e++)(e>0||1==a&&!Q)&&an(e,F[e]);!function(){if(H&&j.live)for(let e=2==a?1:0;e<_.length;e++){if(0==e&&Q)continue;let t=j.values[e],n=0;for(let r in t)K[e][n++].firstChild.nodeValue=t[r]}}()}ke=!1,!1!==t&&Sn("setLegend")}function an(e,n){var a;let i,o=_[e],l=0==e&&2==T?nt:t[e];Q?i=null!==(a=o.values(r,e,n))&&void 0!==a?a:Z:(i=o.value(r,null==n?null:l[n],e,n),i=null==i?Z:{_:i}),j.values[e]=i}function on(e,n,i){let o;At=Tt,Mt=$t,[Tt,$t]=Ee.move(r,Tt,$t),Ee.left=Tt,Ee.top=$t,Ee.show&&(kt&&ks(kt,Ws(Tt),0,ie,oe),St&&ks(St,0,Ws($t),ie,oe));let l=Ve>Be;Kt=nc,Qt=null;let s=0==M.ori?ie:oe,c=1==M.ori?ie:oe;if(Tt<0||0==Ue||l){o=Ee.idx=null;for(let e=0;e<_.length;e++){let t=Pe[e];null!=t&&ks(t,-10,-10,ie,oe)}$e&&Wt(null,Gt,!0,null==e&&Cn.setSeries),j.live&&(F.fill(o),ke=!0)}else{let e,n,i;1==a&&(e=0==M.ori?Tt:$t,n=Jt(e,C),o=Ee.idx=$s(n,t[0],Ve,Be),i=$(t[0][o],M,s,0));let l=-10,u=-10,d=0,h=0,m=!0,p="",f="";for(let v=2==a?1:0;v<_.length;v++){let e=_[v],g=F[v],y=null==g?null:1==a?t[v][g]:t[v][1][g],b=Ee.dataIdx(r,v,o,n),w=null==b?null:1==a?t[v][b]:t[v][1][b];ke=ke||w!=y||b!=g,F[v]=b;let k=b==o?i:$(1==a?t[0][b]:t[v][0][b],M,s,0);if(v>0&&e.show){let t=null==w?-10:L(w,1==a?S[e.scale]:S[e.facets[1].scale],c,0);if($e&&null!=w){let n=1==M.ori?Tt:$t,a=qs(Te.dist(r,v,b,t,n));if(a<Kt){let t=Te.bias;if(0!=t){let r=Jt(n,e.scale),i=r>=0?1:-1;i==(w>=0?1:-1)&&(1==i?1==t?w>=r:w<=r:1==t?w<=r:w>=r)&&(Kt=a,Qt=v)}else Kt=a,Qt=v}}if(ke||Le){let e,n;0==M.ori?(e=k,n=t):(e=t,n=k);let a,i,o,s,c,g,y=!0,_=Me.bbox;if(null!=_){y=!1;let e=_(r,v);o=e.left,s=e.top,a=e.width,i=e.height}else o=e,s=n,a=i=Me.size(r,v);if(g=Me.fill(r,v),c=Me.stroke(r,v),Le)v==Qt&&Kt<=Te.prox&&(l=o,u=s,d=a,h=i,m=y,p=g,f=c);else{let e=Pe[v];null!=e&&(Ie[v]=o,Oe[v]=s,Es(e,a,i,y),xs(e,g,c),ks(e,Ks(o),Ks(s),ie,oe))}}}}if(Le){let e=Te.prox;if(ke||(null==Zt?Kt<=e:Kt>e||Qt!=Zt)){let e=Pe[0];Ie[0]=l,Oe[0]=u,Es(e,d,h,m),xs(e,p,f),ks(e,Ks(l),Ks(u),ie,oe)}}}if(Vt.show&&Ft)if(null!=e){let[t,n]=Cn.scales,[r,a]=Cn.match,[i,o]=e.cursor.sync.scales,l=e.cursor.drag;if(Ht=l._x,Ut=l._y,Ht||Ut){let l,u,d,h,m,{left:p,top:f,width:v,height:g}=e.select,y=e.scales[i].ori,_=e.posToVal,b=null!=t&&r(t,i),w=null!=n&&a(n,o);b&&Ht?(0==y?(l=p,u=v):(l=f,u=g),d=S[t],h=$(_(l,i),d,s,0),m=$(_(l+u,i),d,s,0),tn(Qs(h,m),qs(m-h))):tn(0,s),w&&Ut?(1==y?(l=p,u=v):(l=f,u=g),d=S[n],h=L(_(l,o),d,c,0),m=L(_(l+u,o),d,c,0),nn(Qs(h,m),qs(m-h))):nn(0,c)}else hn()}else{let e=qs(At-xt),t=qs(Mt-Ct);if(1==M.ori){let n=e;e=t,t=n}Ht=jt.x&&e>=jt.dist,Ut=jt.y&&t>=jt.dist;let n,r,a=jt.uni;null!=a?Ht&&Ut&&(Ht=e>=a,Ut=t>=a,Ht||Ut||(t>e?Ut=!0:Ht=!0)):jt.x&&jt.y&&(Ht||Ut)&&(Ht=Ut=!0),Ht&&(0==M.ori?(n=Et,r=Tt):(n=Nt,r=$t),tn(Qs(n,r),qs(r-n)),Ut||nn(0,c)),Ut&&(1==M.ori?(n=Et,r=Tt):(n=Nt,r=$t),nn(Qs(n,r),qs(r-n)),Ht||tn(0,s)),Ht||Ut||(tn(0,0),nn(0,0))}if(jt._x=Ht,jt._y=Ut,null==e){if(i){if(null!=En){let[e,t]=Cn.scales;Cn.values[0]=null!=e?Jt(0==M.ori?Tt:$t,e):null,Cn.values[1]=null!=t?Jt(1==M.ori?Tt:$t,t):null}An(ts,r,Tt,$t,ie,oe,o)}if($e){let e=i&&Cn.setSeries,t=Te.prox;null==Zt?Kt<=t&&Wt(Qt,Gt,!0,e):Kt>t?Wt(null,Gt,!0,e):Qt!=Zt&&Wt(Qt,Gt,!0,e)}}ke&&(j.idx=o,rn()),!1!==n&&Sn("setCursor")}r.setLegend=rn;let ln=null;function sn(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?ln=null:(ln=f.getBoundingClientRect(),Sn("syncRect",ln))}function cn(e,t,n,r,a,i,o){Ee._lock||Ft&&null!=e&&0==e.movementX&&0==e.movementY||(un(e,t,n,r,a,i,o,!1,null!=e),null!=e?on(null,!0,!0):on(t,!0,!1))}function un(e,t,n,a,i,o,l,c,u){if(null==ln&&sn(!1),Ae(e),null!=e)n=e.clientX-ln.left,a=e.clientY-ln.top;else{if(n<0||a<0)return Tt=-10,void($t=-10);let[e,r]=Cn.scales,l=t.cursor.sync,[c,u]=l.values,[d,h]=l.scales,[m,p]=Cn.match,f=t.axes[0].side%2==1,v=0==M.ori?ie:oe,g=1==M.ori?ie:oe,y=f?o:i,_=f?i:o,b=f?a:n,w=f?n:a;if(n=null!=d?m(e,d)?s(c,S[e],v,0):-10:v*(b/y),a=null!=h?p(r,h)?s(u,S[r],g,0):-10:g*(w/_),1==M.ori){let e=n;n=a,a=e}}u&&((n<=1||n>=ie-1)&&(n=mc(n,ie)),(a<=1||a>=oe-1)&&(a=mc(a,oe))),c?(xt=n,Ct=a,[Et,Nt]=Ee.move(r,n,a)):(Tt=n,$t=a)}Object.defineProperty(r,"rect",{get:()=>(null==ln&&sn(!1),ln)});const dn={width:0,height:0,left:0,top:0};function hn(){qt(dn,!1)}let mn,pn,fn,vn;function gn(e,t,n,a,i,o,l){Ft=!0,Ht=Ut=jt._x=jt._y=!1,un(e,t,n,a,i,o,0,!0,!1),null!=e&&(te(rs,ds,yn,!1),An(ns,r,Et,Nt,ie,oe,null));let{left:s,top:c,width:u,height:d}=Vt;mn=s,pn=c,fn=u,vn=d,hn()}function yn(e,t,n,a,i,o,l){Ft=jt._x=jt._y=!1,un(e,t,n,a,i,o,0,!1,!0);let{left:s,top:c,width:u,height:d}=Vt,h=u>0||d>0,m=mn!=s||pn!=c||fn!=u||vn!=d;if(h&&m&&qt(Vt),jt.setScale&&h&&m){let e=s,t=u,n=c,r=d;if(1==M.ori&&(e=c,t=d,n=s,r=u),Ht&&Yt(C,Jt(e,C),Jt(e+t,C)),Ut)for(let a in S){let e=S[a];a!=C&&null==e.from&&e.min!=nc&&Yt(a,Jt(n+r,a),Jt(n,a))}hn()}else Ee.lock&&(Ee._lock=!Ee._lock,on(null,!0,!1));null!=e&&(ne(rs,ds),An(rs,r,Tt,$t,ie,oe,null))}function _n(e,t,n,a,i,o,l){Ee._lock||(Ae(e),it(),hn(),null!=e&&An(os,r,Tt,$t,ie,oe,null))}function bn(){k.forEach(Fd),Se(r.width,r.height,!0)}Ms(ss,hs,bn);const wn={};wn.mousedown=gn,wn.mousemove=cn,wn.mouseup=yn,wn.dblclick=_n,wn.setSeries=(e,t,n,a)=>{-1!=(n=(0,Cn.match[2])(r,t,n))&&Wt(n,a,!0,!1)},Ee.show&&(te(ns,f,gn),te(ts,f,cn),te(as,f,(e=>{Ae(e),sn(!1)})),te(is,f,(function(e,t,n,r,a,i,o){if(Ee._lock)return;Ae(e);let l=Ft;if(Ft){let e,t,n=!0,r=!0,a=10;0==M.ori?(e=Ht,t=Ut):(e=Ut,t=Ht),e&&t&&(n=Tt<=a||Tt>=ie-a,r=$t<=a||$t>=oe-a),e&&n&&(Tt=Tt<Et?0:ie),t&&r&&($t=$t<Nt?0:oe),on(null,!0,!0),Ft=!1}Tt=-10,$t=-10,on(null,!0,!0),l&&(Ft=l)})),te(os,f,_n),xd.add(r),r.syncRect=sn);const kn=r.hooks=e.hooks||{};function Sn(e,t,n){Pt?It.push([e,t,n]):e in kn&&kn[e].forEach((e=>{e.call(null,r,t,n)}))}(e.plugins||[]).forEach((e=>{for(let t in e.hooks)kn[t]=(kn[t]||[]).concat(e.hooks[t])}));const xn=(e,t,n)=>n,Cn=$c({key:null,setSeries:!1,filters:{pub:cc,sub:cc},scales:[C,_[1]?_[1].scale:null],match:[uc,uc,xn],values:[null,null]},Ee.sync);2==Cn.match.length&&Cn.match.push(xn),Ee.sync=Cn;const En=Cn.key,Nn=Ju(En);function An(e,t,n,r,a,i,o){Cn.filters.pub(e,t,n,r,a,i,o)&&Nn.pub(e,t,n,r,a,i,o)}function Mn(){Sn("init",e,t),at(t||e.data,!1),P[C]?zt(C,P[C]):it(),we=Vt.show&&(Vt.width>0||Vt.height>0),be=ke=!0,Se(e.width,e.height)}return Nn.sub(r),r.pub=function(e,t,n,r,a,i,o){Cn.filters.sub(e,t,n,r,a,i,o)&&wn[e](null,t,n,r,a,i,o)},r.destroy=function(){Nn.unsub(r),xd.delete(r),ee.clear(),Ts(ss,hs,bn),u.remove(),V?.remove(),Sn("destroy")},_.forEach(De),k.forEach((function(e,t){if(e._show=e.show,e.show){let n=e.side%2,a=S[e.scale];null==a&&(e.scale=n?_[1].scale:C,a=S[e.scale]);let i=a.time;e.size=ic(e.size),e.space=ic(e.space),e.rotate=ic(e.rotate),Sc(e.incrs)&&e.incrs.forEach((e=>{!gc.has(e)&&gc.set(e,yc(e))})),e.incrs=ic(e.incrs||(2==a.distr?Kc:i?1==y?lu:uu:Qc)),e.splits=ic(e.splits||(i&&1==a.distr?R:3==a.distr?Pu:4==a.distr?Iu:Lu)),e.stroke=ic(e.stroke),e.grid.stroke=ic(e.grid.stroke),e.ticks.stroke=ic(e.ticks.stroke),e.border.stroke=ic(e.border.stroke);let o=e.values;e.values=Sc(o)&&!Sc(o[0])?ic(o):i?Sc(o)?pu(I,mu(o,O)):Cc(o)?function(e,t){let n=Uc(t);return(t,r,a,i,o)=>r.map((t=>n(e(t))))}(I,o):o||D:o||$u,e.filter=ic(e.filter||(a.distr>=3&&10==a.log?ju:3==a.distr&&2==a.log?Hu:lc)),e.font=zd(e.font),e.labelFont=zd(e.labelFont),e._size=e.size(r,null,t,0),e._space=e._rotate=e._incrs=e._found=e._splits=e._values=null,e._size>0&&(ze[t]=!0,e._el=bs("u-axis",m))}})),n?n instanceof HTMLElement?(n.appendChild(u),Mn()):n(r,Mn):Mn(),r}jd.assign=$c,jd.fmtNum=Us,jd.rangeNum=zs,jd.rangeLog=Ps,jd.rangeAsinh=Is,jd.orient=Xu,jd.pxRatio=ps,jd.join=function(e,t){if(function(e){let t=e[0][0],n=t.length;for(let r=1;r<e.length;r++){let a=e[r][0];if(a.length!=n)return!1;if(a!=t)for(let e=0;e<n;e++)if(a[e]!=t[e])return!1}return!0}(e)){let t=e[0].slice();for(let n=1;n<e.length;n++)t.push(...e[n].slice(1));return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=e.length;if(n<=1)return!0;let r=0,a=n-1;for(;r<=a&&null==e[r];)r++;for(;a>=r&&null==e[a];)a--;if(a<=r)return!0;const i=Zs(1,Ys((a-r+1)/t));for(let o=e[r],l=r+i;l<=a;l+=i){const t=e[l];if(null!=t){if(t<=o)return!1;o=t}}return!0}(t[0])||(t=function(e){let t=e[0],n=t.length,r=Array(n);for(let i=0;i<r.length;i++)r[i]=i;r.sort(((e,n)=>t[e]-t[n]));let a=[];for(let i=0;i<e.length;i++){let t=e[i],o=Array(n);for(let e=0;e<n;e++)o[e]=t[r[e]];a.push(o)}return a}(t)),t}let n=new Set;for(let o=0;o<e.length;o++){let t=e[o][0],r=t.length;for(let e=0;e<r;e++)n.add(t[e])}let r=[Array.from(n).sort(((e,t)=>e-t))],a=r[0].length,i=new Map;for(let o=0;o<a;o++)i.set(r[0][o],o);for(let o=0;o<e.length;o++){let n=e[o],l=n[0];for(let e=1;e<n.length;e++){let s=n[e],c=Array(a).fill(void 0),u=t?t[o][e]:1,d=[];for(let e=0;e<s.length;e++){let t=s[e],n=i.get(l[e]);null===t?0!=u&&(c[n]=t,2==u&&d.push(n)):c[n]=t}Lc(c,d,a),r.push(c)}}return r},jd.fmtDate=Uc,jd.tzDate=function(e,t){let n;return"UTC"==t||"Etc/UTC"==t?n=new Date(+e+6e4*e.getTimezoneOffset()):t==Vc?n=e:(n=new Date(e.toLocaleString("en-US",{timeZone:t})),n.setMilliseconds(e.getMilliseconds())),n},jd.sync=Ju;{jd.addGap=function(e,t,n){let r=e[e.length-1];r&&r[0]==t?r[1]=n:e.push([t,n])},jd.clipGaps=rd;let e=jd.paths={points:gd};e.linear=wd,e.stepped=function(e){const t=Fs(e.align,1),n=Fs(e.ascDesc,!1),r=Fs(e.alignGaps,0),a=Fs(e.extend,!1);return(e,i,o,l)=>Xu(e,i,((s,c,u,d,h,m,p,f,v,g,y)=>{let _=s.pxRound,{left:b,width:w}=e.bbox,k=e=>_(m(e,d,g,f)),S=e=>_(p(e,h,y,v)),x=0==d.ori?cd:ud;const C={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},E=C.stroke,N=d.dir*(0==d.ori?1:-1);o=Ls(u,o,l,1),l=Ls(u,o,l,-1);let A=S(u[1==N?o:l]),M=k(c[1==N?o:l]),T=M,$=M;a&&-1==t&&($=b,x(E,$,A)),x(E,M,A);for(let e=1==N?o:l;e>=o&&e<=l;e+=N){let n=u[e];if(null==n)continue;let r=k(c[e]),a=S(n);1==t?x(E,r,A):x(E,T,a),x(E,r,a),A=a,T=r}let L=T;a&&1==t&&(L=b+w,x(E,L,A));let[P,I]=ed(e,i);if(null!=s.fill||0!=P){let t=C.fill=new Path2D(E),n=S(s.fillTo(e,i,s.min,s.max,P));x(t,L,n),x(t,$,n)}if(!s.spanGaps){let a=[];a.push(...ad(c,u,o,l,N,k,r));let h=s.width*ps/2,m=n||1==t?h:-h,p=n||-1==t?-h:h;a.forEach((e=>{e[0]+=m,e[1]+=p})),C.gaps=a=s.gaps(e,i,o,l,a),C.clip=rd(a,d.ori,f,v,g,y)}return 0!=I&&(C.band=2==I?[nd(e,i,o,l,E,-1),nd(e,i,o,l,E,1)]:nd(e,i,o,l,E,I)),C}))},e.bars=function(e){const t=Fs((e=e||bc).size,[.6,nc,1]),n=e.align||0,r=e.gap||0;let a=e.radius;a=null==a?[0,0]:"number"==typeof a?[a,0]:a;const i=ic(a),o=1-t[0],l=Fs(t[1],nc),s=Fs(t[2],1),c=Fs(e.disp,bc),u=Fs(e.each,(e=>{})),{fill:d,stroke:h}=c;return(e,t,a,m)=>Xu(e,t,((p,f,v,g,y,_,b,w,k,S,x)=>{let C,E,N=p.pxRound,A=n,M=r*ps,T=l*ps,$=s*ps;0==g.ori?[C,E]=i(e,t):[E,C]=i(e,t);const L=g.dir*(0==g.ori?1:-1);let P,I,O,R=0==g.ori?dd:hd,D=0==g.ori?u:(e,t,n,r,a,i,o)=>{u(e,t,n,a,r,o,i)},z=Fs(e.bands,wc).find((e=>e.series[0]==t)),F=null!=z?z.dir:0,j=p.fillTo(e,t,p.min,p.max,F),H=N(b(j,y,x,k)),U=S,V=N(p.width*ps),B=!1,q=null,Y=null,W=null,K=null;null==d||0!=V&&null==h||(B=!0,q=d.values(e,t,a,m),Y=new Map,new Set(q).forEach((e=>{null!=e&&Y.set(e,new Path2D)})),V>0&&(W=h.values(e,t,a,m),K=new Map,new Set(W).forEach((e=>{null!=e&&K.set(e,new Path2D)}))));let{x0:Q,size:Z}=c;if(null!=Q&&null!=Z){A=1,f=Q.values(e,t,a,m),2==Q.unit&&(f=f.map((t=>e.posToVal(w+t*S,g.key,!0))));let n=Z.values(e,t,a,m);I=2==Z.unit?n[0]*S:_(n[0],g,S,w)-_(0,g,S,w),U=kd(f,v,_,g,S,w,U),O=U-I+M}else U=kd(f,v,_,g,S,w,U),O=U*o+M,I=U-O;O<1&&(O=0),V>=I/2&&(V=0),O<5&&(N=oc);let G=O>0;I=N(ac(U-O-(G?V:0),$,T)),P=(0==A?I/2:A==L?0:I)-A*L*((0==A?M/2:0)+(G?V/2:0));const J={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},X=B?null:new Path2D;let ee=null;if(null!=z)ee=e.data[z.series[1]];else{let{y0:n,y1:r}=c;null!=n&&null!=r&&(v=r.values(e,t,a,m),ee=n.values(e,t,a,m))}let te=C*I,ne=E*I;for(let n=1==L?a:m;n>=a&&n<=m;n+=L){let r=v[n];if(null==r)continue;if(null!=ee){var re;let e=null!==(re=ee[n])&&void 0!==re?re:0;if(r-e==0)continue;H=b(e,y,x,k)}let a=_(2!=g.distr||null!=c?f[n]:n,g,S,w),i=b(Fs(r,j),y,x,k),o=N(a-P),l=N(Zs(i,H)),s=N(Qs(i,H)),u=l-s;if(null!=r){let a=r<0?ne:te,i=r<0?te:ne;B?(V>0&&null!=W[n]&&R(K.get(W[n]),o,s+Ys(V/2),I,Zs(0,u-V),a,i),null!=q[n]&&R(Y.get(q[n]),o,s+Ys(V/2),I,Zs(0,u-V),a,i)):R(X,o,s+Ys(V/2),I,Zs(0,u-V),a,i),D(e,t,n,o-V/2,s,I+V,u)}}if(V>0)J.stroke=B?K:X;else if(!B){var ae;J._fill=0==p.width?p._fill:null!==(ae=p._stroke)&&void 0!==ae?ae:p._fill,J.width=0}return J.fill=B?Y:X,J}))},e.spline=function(e){return function(e,t){const n=Fs(t?.alignGaps,0);return(t,r,a,i)=>Xu(t,r,((o,l,s,c,u,d,h,m,p,f,v)=>{let g,y,_,b=o.pxRound,w=e=>b(d(e,c,f,m)),k=e=>b(h(e,u,v,p));0==c.ori?(g=ld,_=cd,y=fd):(g=sd,_=ud,y=vd);const S=c.dir*(0==c.ori?1:-1);a=Ls(s,a,i,1),i=Ls(s,a,i,-1);let x=w(l[1==S?a:i]),C=x,E=[],N=[];for(let e=1==S?a:i;e>=a&&e<=i;e+=S)if(null!=s[e]){let t=w(l[e]);E.push(C=t),N.push(k(s[e]))}const A={stroke:e(E,N,g,_,y,b),fill:null,clip:null,band:null,gaps:null,flags:1},M=A.stroke;let[T,$]=ed(t,r);if(null!=o.fill||0!=T){let e=A.fill=new Path2D(M),n=k(o.fillTo(t,r,o.min,o.max,T));_(e,C,n),_(e,x,n)}if(!o.spanGaps){let e=[];e.push(...ad(l,s,a,i,S,w,n)),A.gaps=e=o.gaps(t,r,a,i,e),A.clip=rd(e,c.ori,m,p,f,v)}return 0!=$&&(A.band=2==$?[nd(t,r,a,i,M,-1),nd(t,r,a,i,M,1)]:nd(t,r,a,i,M,$)),A}))}(Sd,e)}}const Hd=e=>{let t=e.length,n=-1/0;for(;t--;){const r=e[t];Number.isFinite(r)&&r>n&&(n=r)}return Number.isFinite(n)?n:null},Ud=e=>{let t=e.length,n=1/0;for(;t--;){const r=e[t];Number.isFinite(r)&&r<n&&(n=r)}return Number.isFinite(n)?n:null},Vd=e=>{let t=e.length;const n=[];for(;t--;){const r=e[t];Number.isFinite(r)&&n.push(r)}return n.sort(),n[n.length>>1]},Bd=e=>{let t=e.length;for(;t--;){const n=e[t];if(Number.isFinite(n))return n}},qd=(e,t,n)=>{if(void 0===e||null===e)return"";n=n||0,t=t||0;const r=Math.abs(n-t);if(isNaN(r)||0==r)return Math.abs(e)>=1e3?e.toLocaleString("en-US"):e.toString();let a=3+Math.floor(1+Math.log10(Math.max(Math.abs(t),Math.abs(n)))-Math.log10(r));return(isNaN(a)||a>20)&&(a=20),e.toLocaleString("en-US",{minimumSignificantDigits:1,maximumSignificantDigits:a})},Yd=(e,t)=>{if(null!==t&&void 0!==t&&t.hasAlias&&null!==t&&void 0!==t&&t.label)return t.label;const n=(null===e||void 0===e?void 0:e.metric)||{},r=Object.keys(n).filter((e=>"__name__"!=e)).map((e=>`${e}=${JSON.stringify(n[e])}`));let a=n.__name__||"";return r.length>0&&(a+="{"+r.join(",")+"}"),a},Wd=[[31536e3,"{YYYY}",null,null,null,null,null,null,1],[2419200,"{MMM}","\n{YYYY}",null,null,null,null,null,1],[86400,"{MM}-{DD}","\n{YYYY}",null,null,null,null,null,1],[3600,"{HH}:{mm}","\n{YYYY}-{MM}-{DD}",null,"\n{MM}-{DD}",null,null,null,1],[60,"{HH}:{mm}","\n{YYYY}-{MM}-{DD}",null,"\n{MM}-{DD}",null,null,null,1],[1,"{HH}:{mm}:{ss}","\n{YYYY}-{MM}-{DD}",null,"\n{MM}-{DD} {HH}:{mm}",null,null,null,1],[.001,":{ss}.{fff}","\n{YYYY}-{MM}-{DD} {HH}:{mm}",null,"\n{MM}-{DD} {HH}:{mm}",null,"\n{HH}:{mm}",null,1]],Kd=(e,t)=>Array.from(new Set(e.map((e=>e.scale)))).map((e=>{const n="10px Arial",r=gt("color-text"),a={scale:e,show:!0,size:Zd,stroke:r,font:n,values:(e,n)=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=t[0],a=t[t.length-1];return n?t.map((e=>`${qd(e,r,a)} ${n}`)):t.map((e=>qd(e,r,a)))}(e,n,t)};return e?Number(e)%2||"y"===e?a:{...a,side:1}:{space:80,values:Wd,stroke:r,font:n}})),Qd=(e,t)=>{if(null==e||null==t)return[-1,1];const n=.02*(Math.abs(t-e)||Math.abs(e)||1);return[e-n,t+n]},Zd=(e,t,n,r)=>{var a;const i=e.axes[n];if(r>1)return i._size||60;let o=6+((null===i||void 0===i||null===(a=i.ticks)||void 0===a?void 0:a.size)||0)+(i.gap||0);const l=(null!==t&&void 0!==t?t:[]).reduce(((e,t)=>(null===t||void 0===t?void 0:t.length)>e.length?t:e),"");return""!=l&&(o+=((e,t)=>{const n=document.createElement("span");n.innerText=e,n.style.cssText=`position: absolute; z-index: -1; pointer-events: none; opacity: 0; font: ${t}`,document.body.appendChild(n);const r=n.offsetWidth;return n.remove(),r})(l,"10px Arial")),Math.ceil(o)},Gd=["#e54040","#32a9dc","#2ee329","#7126a1","#e38f0f","#3d811a","#ffea00","#2d2d2d","#da42a6","#a44e0c"],Jd=e=>{if(7!=e.length)return"0, 0, 0";return`${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}`},Xd={[ht.yhatUpper]:"#7126a1",[ht.yhatLower]:"#7126a1",[ht.yhat]:"#da42a6",[ht.anomaly]:"#da4242",[ht.anomalyScore]:"#7126a1",[ht.actual]:"#203ea9",[ht.training]:`rgba(${Jd("#203ea9")}, 0.2)`},eh=e=>{const t=16777215;let n=1,r=0,a=1;if(e.length>0)for(let o=0;o<e.length;o++)e[o].charCodeAt(0)>r&&(r=e[o].charCodeAt(0)),a=parseInt(String(t/r)),n=(n+e[o].charCodeAt(0)*a*49979693)%t;let i=(n*e.length%t).toString(16);return i=i.padEnd(6,i),`#${i}`},th=((e,t,n)=>{const r=[];for(let a=0;a<n;a++){const i=a/(n-1),o=e[0]+(t[0]-e[0])*i,l=e[1]+(t[1]-e[1])*i,s=e[2]+(t[2]-e[2])*i;r.push([o,l,s].map((e=>Math.round(e))).join(", "))}return r.map((e=>`rgb(${e})`))})([246,226,219],[127,39,4],16),nh=()=>(e,t)=>{const n=Math.round(devicePixelRatio);jd.orient(e,t,((r,a,i,o,l,s,c,u,d,h,m,p,f,v)=>{const[g,y,_]=e.data[t],b=g.length,w=((e,t)=>{const n=e.data[t][2],r=th;let a=1/0,i=-1/0;for(let c=0;c<n.length;c++)n[c]>0&&(a=Math.min(a,n[c]),i=Math.max(i,n[c]));const o=i-a,l=r.length,s=Array(n.length);for(let c=0;c<n.length;c++)s[c]=0===n[c]?-1:Math.min(l-1,Math.floor(l*(n[c]-a)/o));return s})(e,t),k=null!==th&&void 0!==th?th:[...Array.from(new Set(w))],S=k.map((()=>new Path2D)),x=b-y.lastIndexOf(y[0]),C=b/x,E=y[1]-y[0],N=g[x]-g[0],A=s(N,o,h,u)-s(0,o,h,u)-n,M=c(E,l,m,d)-c(0,l,m,d)+n,T=y.slice(0,x).map((e=>Math.round(c(e,l,m,d)-M/2))),$=Array.from({length:C},((e,t)=>Math.round(s(g[t*x],o,h,u)-A)));for(let e=0;e<b;e++)if(_[e]>0&&g[e]>=(o.min||-1/0)&&g[e]<=(o.max||1/0)&&y[e]>=(l.min||-1/0)&&y[e]<=(l.max||1/0)){const t=$[~~(e/x)],n=T[e%x];v(S[w[e]],t,n,A,M)}e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),S.forEach(((t,n)=>{e.ctx.fillStyle=k[n],e.ctx.fill(t)})),e.ctx.restore()}))},rh=e=>{const t=(e.metric.vmrange||e.metric.le||"").split("...");return Al(t[t.length-1])},ah=(e,t)=>rh(e)-rh(t),ih=(e,t)=>{if(!t)return e;const n=(e=>{var t;if(!e.every((e=>e.metric.le)))return e;const n=e.sort(((e,t)=>parseFloat(e.metric.le)-parseFloat(t.metric.le))),r=(null===(t=e[0])||void 0===t?void 0:t.group)||1;let a={metric:{le:""},values:[],group:r};const i=[];for(const l of n){const e=[a.metric.le,l.metric.le].filter((e=>e)).join("..."),t=[];for(const[n,r]of l.values){var o;const e=+r-+((null===(o=a.values.find((e=>e[0]===n)))||void 0===o?void 0:o[1])||0);t.push([n,`${e}`])}i.push({metric:{vmrange:e},values:t,group:r}),a=l}return i})(e.sort(ah)),r={};n.forEach((e=>e.values.forEach((e=>{let[t,n]=e;r[t]=(r[t]||0)+ +n}))));return n.map((e=>{const t=e.values.map((e=>{let[t,n]=e;const a=r[t];return[t,`${Math.round(+n/a*100)}`]}));return{...e,values:t}})).filter((e=>!e.values.every((e=>"0"===e[1]))))},oh=e=>{const t=["__name__","for"];return Object.entries(e).filter((e=>{let[n]=e;return!t.includes(n)})).map((e=>{let[t,n]=e;return`${t}: ${n}`})).join(",")},lh=(e,t,n,r)=>{const a={},i=r?0:Math.min(e.length,Gd.length);for(let o=0;o<i;o++){const t=Nl(e[o],n[e[o].group-1]);a[t]=Gd[o]}return(i,o)=>{const l=r?(e=>{const t=(null===e||void 0===e?void 0:e.__name__)||"",n=new RegExp(`(${Object.values(ht).join("|")})$`),r=t.match(n),a=r&&r[0];return{value:/(?:^|[^a-zA-Z0-9_])y(?:$|[^a-zA-Z0-9_])/.test(t)?ht.actual:a,group:oh(e)}})(e[o].metric):null,s=n[i.group-1],c=r?(null===l||void 0===l?void 0:l.group)||"":Nl(i,s);return{label:c,hasAlias:Boolean(s),dash:hh(l),width:mh(l),stroke:vh({metricInfo:l,label:c,isAnomalyUI:r,colorState:a}),points:ph(l),spanGaps:!1,forecast:null===l||void 0===l?void 0:l.value,forecastGroup:null===l||void 0===l?void 0:l.group,freeFormFields:i.metric,show:!uh(c,t),scale:"1",...sh(i)}}},sh=e=>{const t=e.values.map((e=>Al(e[1]))),{min:n,max:r,median:a,last:i}={min:Ud(t),max:Hd(t),median:Vd(t),last:Bd(t)};return{median:a,statsFormatted:{min:qd(n,n,r),max:qd(r,n,r),median:qd(a,n,r),last:qd(i,n,r)}}},ch=(e,t)=>({group:t,label:e.label||"",color:e.stroke,checked:e.show||!1,freeFormFields:e.freeFormFields,statsFormatted:e.statsFormatted,median:e.median,hasAlias:e.hasAlias||!1}),uh=(e,t)=>t.includes(`${e}`),dh=e=>{for(let t=e.series.length-1;t>=0;t--)t&&e.delSeries(t)},hh=e=>{const t=(null===e||void 0===e?void 0:e.value)===ht.yhatLower,n=(null===e||void 0===e?void 0:e.value)===ht.yhatUpper,r=(null===e||void 0===e?void 0:e.value)===ht.yhat;return t||n?[10,5]:r?[10,2]:[]},mh=e=>{const t=(null===e||void 0===e?void 0:e.value)===ht.yhatLower,n=(null===e||void 0===e?void 0:e.value)===ht.yhatUpper,r=(null===e||void 0===e?void 0:e.value)===ht.yhat,a=(null===e||void 0===e?void 0:e.value)===ht.anomaly;return n||t?.7:r?1:a?0:1.4},ph=e=>(null===e||void 0===e?void 0:e.value)===ht.anomaly?{size:8,width:4,space:0}:{size:4,width:0,show:!0,filter:fh},fh=(e,t)=>{const n=e.data[t],r=[];for(let a=0;a<n.length;a++){const e=n[a-1],t=n[a+1];null===e&&null===t&&r.push(a)}return r},vh=e=>{let{metricInfo:t,label:n,isAnomalyUI:r,colorState:a}=e;const i=a[n]||eh(n),o=(null===t||void 0===t?void 0:t.value)===ht.anomaly;return r&&o?Xd[ht.anomaly]:!r||o||null!==t&&void 0!==t&&t.value?null!==t&&void 0!==t&&t.value?null!==t&&void 0!==t&&t.value?Xd[null===t||void 0===t?void 0:t.value]:i:a[n]||eh(n):Xd[ht.actual]},gh=e=>{let{width:t=400,height:n=500}=e;return{width:t,height:n,series:[],tzDate:e=>i()(Xt(tn(e))).local().toDate(),legend:{show:!1},cursor:{drag:{x:!0,y:!1},focus:{prox:30},points:{size:5.6,width:1.4},bind:{click:()=>null,dblclick:()=>null}}}},yh=e=>{dh(e),(e=>{Object.keys(e.hooks).forEach((t=>{e.hooks[t]=[]}))})(e),e.setData([])},_h=e=>{let{min:t,max:n}=e;return[t,n]},bh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return a.limits.enable?a.limits.range[r]:Qd(t,n)},wh=(e,t)=>{const n={x:{range:()=>_h(t)}},r=Object.keys(e.limits.range);return(r.length?r:["1"]).forEach((t=>{n[t]={range:function(n){return bh(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,t,e)}}})),n},kh=e=>t=>{const n=t.posToVal(t.select.left,"x"),r=t.posToVal(t.select.left+t.select.width,"x");e({min:n,max:r})};function Sh(e){return`rgba(${Jd(Xd[e])}, 0.05)`}const xh=e=>(e=>e instanceof MouseEvent)(e)?e.clientX:e.touches[0].clientX,Ch=e=>{let{dragSpeed:t=.85,setPanning:n,setPlotScale:a}=e;const i=(0,r.useRef)({leftStart:0,xUnitsPerPx:0,scXMin:0,scXMax:0}),o=e=>{e.preventDefault();const n=xh(e),{leftStart:r,xUnitsPerPx:o,scXMin:l,scXMax:s}=i.current,c=o*((n-r)*t);a({min:l-c,max:s-c})},l=()=>{n(!1),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",l)};return e=>{let{e:t,u:r}=e;t.preventDefault(),n(!0),i.current={leftStart:xh(t),xUnitsPerPx:r.posToVal(1,"x")-r.posToVal(0,"x"),scXMin:r.scales.x.min||0,scXMax:r.scales.x.max||0},document.addEventListener("mousemove",o),document.addEventListener("mouseup",l),document.addEventListener("touchmove",o),document.addEventListener("touchend",l)}},Eh=e=>{const[t,n]=(0,r.useState)(!1),a=Ch({dragSpeed:.9,setPanning:n,setPlotScale:e});return{onReadyChart:t=>{const n=e=>{const n=e instanceof MouseEvent&&(e=>{const{ctrlKey:t,metaKey:n,button:r}=e;return 0===r&&(t||n)})(e),r=window.TouchEvent&&e instanceof TouchEvent&&e.touches.length>1;(n||r)&&a({u:t,e:e})};t.over.addEventListener("mousedown",n),t.over.addEventListener("touchstart",n),t.over.addEventListener("wheel",(n=>{if(!n.ctrlKey&&!n.metaKey)return;n.preventDefault();const{width:r}=t.over.getBoundingClientRect(),a=t.cursor.left&&t.cursor.left>0?t.cursor.left:0,i=t.posToVal(a,"x"),o=(t.scales.x.max||0)-(t.scales.x.min||0),l=n.deltaY<0?.9*o:o/.9,s=i-a/r*l,c=s+l;t.batch((()=>e({min:s,max:c})))}))},isPanning:t}},Nh=e=>{const t=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+n*n)},Ah=e=>{let{uPlotInst:t,xRange:n,setPlotScale:a}=e;const[i,o]=(0,r.useState)(0),l=(0,r.useCallback)((e=>{const{target:r,ctrlKey:i,metaKey:o,key:l}=e,s=r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement;if(!t||s)return;const c="+"===l||"="===l;if(("-"===l||c)&&!(i||o)){e.preventDefault();const t=(n.max-n.min)/10*(c?1:-1);a({min:n.min+t,max:n.max-t})}}),[t,n]),s=(0,r.useCallback)((e=>{if(!t||2!==e.touches.length)return;e.preventDefault();const r=Nh(e.touches),o=i-r,l=t.scales.x.max||n.max,s=t.scales.x.min||n.min,c=(l-s)/50*(o>0?-1:1);t.batch((()=>a({min:s+c,max:l-c})))}),[t,i,n]);return Mr("keydown",l),Mr("touchmove",s),Mr("touchstart",(e=>{2===e.touches.length&&(e.preventDefault(),o(Nh(e.touches)))})),null},Mh=e=>{let{period:t,setPeriod:n}=e;const[a,o]=(0,r.useState)({min:t.start,max:t.end});return(0,r.useEffect)((()=>{o({min:t.start,max:t.end})}),[t]),{xRange:a,setPlotScale:e=>{let{min:t,max:r}=e;const a=1e3*(r-t);a<Ft||a>jt||n({from:i()(1e3*t).toDate(),to:i()(1e3*r).toDate()})}}},Th=e=>{let{u:t,metrics:n,series:a,unit:o,isAnomalyView:l}=e;const[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)({seriesIdx:-1,dataIdx:-1}),[h,m]=(0,r.useState)([]),p=(0,r.useCallback)((()=>{const{seriesIdx:e,dataIdx:r}=u,s=n[e-1],c=a[e],d=new Set(n.map((e=>e.group))),h=(null===s||void 0===s?void 0:s.group)||0,m=ot()(t,["data",e,r],0),p=ot()(t,["scales","1","min"],0),f=ot()(t,["scales","1","max"],1),v=ot()(t,["data",0,r],0),g={top:t?t.valToPos(m||0,(null===c||void 0===c?void 0:c.scale)||"1"):0,left:t?t.valToPos(v,"x"):0};return{unit:o,point:g,u:t,id:`${e}_${r}`,title:d.size>1&&!l?`Query ${h}`:"",dates:[v?i()(1e3*v).tz().format(It):"-"],value:qd(m,p,f),info:Yd(s,c),statsFormatted:null===c||void 0===c?void 0:c.statsFormatted,marker:`${null===c||void 0===c?void 0:c.stroke}`}}),[t,u,n,a,o,l]),f=(0,r.useCallback)((()=>{if(!s)return;const e=p();h.find((t=>t.id===e.id))||m((t=>[...t,e]))}),[p,h,s]);return(0,r.useEffect)((()=>{c(-1!==u.dataIdx&&-1!==u.seriesIdx)}),[u]),Mr("click",f),{showTooltip:s,stickyTooltips:h,handleUnStick:e=>{m((t=>t.filter((t=>t.id!==e))))},getTooltipProps:p,seriesFocus:(e,t)=>{const n=null!==t&&void 0!==t?t:-1;d((e=>({...e,seriesIdx:n})))},setCursor:e=>{var t;const n=null!==(t=e.cursor.idx)&&void 0!==t?t:-1;d((e=>({...e,dataIdx:n})))},resetTooltips:()=>{m([]),d({seriesIdx:-1,dataIdx:-1})}}},$h=e=>{let{u:t,id:n,title:a,dates:i,value:o,point:l,unit:s="",info:c,statsFormatted:u,isSticky:d,marker:h,onClose:m}=e;const p=(0,r.useRef)(null),[f,v]=(0,r.useState)({top:-999,left:-999}),[g,y]=(0,r.useState)(!1),[_,b]=(0,r.useState)(!1),w=(0,r.useCallback)((e=>{if(!g)return;const{clientX:t,clientY:n}=e;v({top:n,left:t})}),[g]);return(0,r.useEffect)((()=>{if(!p.current||!t)return;const{top:e,left:n}=l,r=parseFloat(t.over.style.left),a=parseFloat(t.over.style.top),{width:i,height:o}=t.over.getBoundingClientRect(),{width:s,height:c}=p.current.getBoundingClientRect(),u={top:e+a+10-(e+c>=o?c+20:0),left:n+r+10-(n+s>=i?s+20:0)};u.left<0&&(u.left=20),u.top<0&&(u.top=20),v(u)}),[t,o,l,p]),Mr("mousemove",w),Mr("mouseup",(()=>{y(!1)})),t?r.default.createPortal(Nt("div",{className:Er()({"vm-chart-tooltip":!0,"vm-chart-tooltip_sticky":d,"vm-chart-tooltip_moved":_}),ref:p,style:f,children:[Nt("div",{className:"vm-chart-tooltip-header",children:[a&&Nt("div",{className:"vm-chart-tooltip-header__title",children:a}),Nt("div",{className:"vm-chart-tooltip-header__date",children:i.map(((e,t)=>Nt("span",{children:e},t)))}),d&&Nt(Ct.FK,{children:[Nt(da,{className:"vm-chart-tooltip-header__drag",variant:"text",size:"small",startIcon:Nt(ar,{}),onMouseDown:e=>{b(!0),y(!0);const{clientX:t,clientY:n}=e;v({top:n,left:t})},ariaLabel:"drag the tooltip"}),Nt(da,{className:"vm-chart-tooltip-header__close",variant:"text",size:"small",startIcon:Nt(Ln,{}),onClick:()=>{m&&m(n)},ariaLabel:"close the tooltip"})]})]}),Nt("div",{className:"vm-chart-tooltip-data",children:[h&&Nt("span",{className:"vm-chart-tooltip-data__marker",style:{background:h}}),Nt("p",{className:"vm-chart-tooltip-data__value",children:[Nt("b",{children:o}),s]})]}),u&&Nt("table",{className:"vm-chart-tooltip-stats",children:ct.map(((e,t)=>Nt("div",{className:"vm-chart-tooltip-stats-row",children:[Nt("span",{className:"vm-chart-tooltip-stats-row__key",children:[e,":"]}),Nt("span",{className:"vm-chart-tooltip-stats-row__value",children:u[e]})]},t)))}),c&&Nt("p",{className:"vm-chart-tooltip__info",children:c})]}),t.root):null},Lh=e=>{let{showTooltip:t,tooltipProps:n,stickyTooltips:a,handleUnStick:i}=e;return Nt(Ct.FK,{children:[t&&n&&Nt($h,{...n}),a.map((e=>(0,r.createElement)($h,{...e,isSticky:!0,key:e.id,onClose:i})))]})},Ph=e=>{let{data:t,series:n,metrics:a=[],period:i,yaxis:o,unit:l,setPeriod:s,layoutSize:c,height:u,isAnomalyView:d,spanGaps:h=!1}=e;const{isDarkTheme:m}=Mt(),p=(0,r.useRef)(null),[f,v]=(0,r.useState)(),{xRange:g,setPlotScale:y}=Mh({period:i,setPeriod:s}),{onReadyChart:_,isPanning:b}=Eh(y);Ah({uPlotInst:f,xRange:g,setPlotScale:y});const{showTooltip:w,stickyTooltips:k,handleUnStick:S,getTooltipProps:x,seriesFocus:C,setCursor:E,resetTooltips:N}=Th({u:f,metrics:a,series:n,unit:l,isAnomalyView:d}),A={...gh({width:c.width,height:u}),series:n,axes:Kd([{},{scale:"1"}],l),scales:wh(o,g),hooks:{ready:[_],setSeries:[C],setCursor:[E],setSelect:[kh(y)],destroy:[yh]},bands:[]};return(0,r.useEffect)((()=>{if(N(),!p.current)return;f&&f.destroy();const e=new jd(A,t,p.current);return v(e),e.destroy}),[p,m]),(0,r.useEffect)((()=>{f&&(f.setData(t),f.redraw())}),[t]),(0,r.useEffect)((()=>{f&&(dh(f),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(((t,r)=>{t.label&&(t.spanGaps=n),r&&e.addSeries(t)}))}(f,n,h),((e,t)=>{if(e.delBand(),t.length<2)return;const n=t.map(((e,t)=>({...e,index:t}))),r=n.filter((e=>e.forecast===ht.yhatUpper)),a=n.filter((e=>e.forecast===ht.yhatLower)),i=r.map((e=>{const t=a.find((t=>t.forecastGroup===e.forecastGroup));return t?{series:[e.index,t.index],fill:Sh(ht.yhatUpper)}:null})).filter((e=>null!==e));i.length&&i.forEach((t=>{e.addBand(t)}))})(f,n),f.redraw())}),[n,h]),(0,r.useEffect)((()=>{f&&(Object.keys(o.limits.range).forEach((e=>{f.scales[e]&&(f.scales[e].range=function(t){return bh(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,e,o)})})),f.redraw())}),[o]),(0,r.useEffect)((()=>{f&&(f.scales.x.range=()=>_h(g),f.redraw())}),[g]),(0,r.useEffect)((()=>{f&&(f.setSize({width:c.width||400,height:u||500}),f.redraw())}),[u,c]),Nt("div",{className:Er()({"vm-line-chart":!0,"vm-line-chart_panning":b}),style:{minWidth:`${c.width||400}px`,minHeight:`${u||500}px`},children:[Nt("div",{className:"vm-line-chart__u-plot",ref:p}),Nt(Lh,{showTooltip:w,tooltipProps:x(),stickyTooltips:k,handleUnStick:S})]})},Ih=e=>{let{legend:t,onChange:n,isHeatmap:a,isAnomalyView:i}=e;const o=fl(),l=(0,r.useMemo)((()=>{const e=(e=>{const t=Object.keys(e.freeFormFields).filter((e=>"__name__"!==e));return t.map((t=>{const n=`${t}=${JSON.stringify(e.freeFormFields[t])}`;return{id:`${e.label}.${n}`,freeField:n,key:t}}))})(t);return a?e.filter((e=>"vmrange"!==e.key)):e}),[t,a]),s=t.statsFormatted,c=Object.values(s).some((e=>e)),u=e=>t=>{t.stopPropagation(),(async e=>{await o(e,`${e} has been copied`)})(e)};return Nt("div",{className:Er()({"vm-legend-item":!0,"vm-legend-row":!0,"vm-legend-item_hide":!t.checked&&!a,"vm-legend-item_static":a}),onClick:(e=>t=>{n&&n(e,t.ctrlKey||t.metaKey)})(t),children:[!i&&!a&&Nt("div",{className:"vm-legend-item__marker",style:{backgroundColor:t.color}}),Nt("div",{className:"vm-legend-item-info",children:Nt("span",{className:"vm-legend-item-info__label",children:t.hasAlias?t.label:Nt(Ct.FK,{children:[t.freeFormFields.__name__,!!l.length&&Nt(Ct.FK,{children:"{"}),l.map(((e,t)=>Nt("span",{className:"vm-legend-item-info__free-fields",onClick:u(e.freeField),title:"copy to clipboard",children:[e.freeField,t+1<l.length&&","]},e.key))),!!l.length&&Nt(Ct.FK,{children:"}"})]})})}),!a&&c&&Nt("div",{className:"vm-legend-item-stats",children:ct.map(((e,t)=>Nt("div",{className:"vm-legend-item-stats-row",children:[Nt("span",{className:"vm-legend-item-stats-row__key",children:[e,":"]}),Nt("span",{className:"vm-legend-item-stats-row__value",children:s[e]})]},t)))})]})},Oh=e=>{let{labels:t,query:n,isAnomalyView:a,onChange:i}=e;const o=(0,r.useMemo)((()=>Array.from(new Set(t.map((e=>e.group))))),[t]),l=o.length>1;return Nt(Ct.FK,{children:Nt("div",{className:"vm-legend",children:o.map((e=>Nt("div",{className:"vm-legend-group",children:Nt(ki,{defaultExpanded:!0,title:Nt("div",{className:"vm-legend-group-title",children:[l&&Nt("span",{className:"vm-legend-group-title__count",children:["Query ",e,": "]}),Nt("span",{className:"vm-legend-group-title__query",children:n[e-1]})]}),children:Nt("div",{children:t.filter((t=>t.group===e)).sort(((e,t)=>(t.median||0)-(e.median||0))).map((e=>Nt(Ih,{legend:e,isAnomalyView:a,onChange:i},e.label)))})})},e)))})})},Rh=e=>{var t;let{min:n,max:a,legendValue:i,series:o}=e;const[l,s]=(0,r.useState)(0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),f=(0,r.useMemo)((()=>parseFloat(String((null===i||void 0===i?void 0:i.value)||0).replace("%",""))),[i]);return(0,r.useEffect)((()=>{s(f?(f-n)/(a-n)*100:0),u(f?`${f}%`:""),h(`${n}%`),p(`${a}%`)}),[f,n,a]),Nt("div",{className:"vm-legend-heatmap__wrapper",children:[Nt("div",{className:"vm-legend-heatmap",children:[Nt("div",{className:"vm-legend-heatmap-gradient",style:{background:`linear-gradient(to right, ${th.join(", ")})`},children:!!f&&Nt("div",{className:"vm-legend-heatmap-gradient__value",style:{left:`${l}%`},children:Nt("span",{children:c})})}),Nt("div",{className:"vm-legend-heatmap__value",children:d}),Nt("div",{className:"vm-legend-heatmap__value",children:m})]}),o[1]&&Nt(Ih,{legend:o[1],isHeatmap:!0},null===(t=o[1])||void 0===t?void 0:t.label)]})},Dh=e=>{let{u:t,metrics:n,unit:a}=e;const[o,l]=(0,r.useState)({left:0,top:0}),[s,c]=(0,r.useState)([]),u=(0,r.useCallback)((()=>{var e;const{left:r,top:l}=o,s=ot()(t,["data",1,0],[])||[],c=t?t.posToVal(r,"x"):0,u=t?t.posToVal(l,"y"):0,d=s.findIndex(((e,t)=>c>=e&&c<s[t+1]))||-1,h=s[d+1],m=n[Math.round(u)]||{values:[]},[p=0,f=""]=m.values.find((e=>e[0]===h))||[],v=s[d],g=i()(1e3*v).tz().format(It),y=i()(1e3*p).tz().format(It),_=(null===m||void 0===m||null===(e=m.metric)||void 0===e?void 0:e.vmrange)||"";return{unit:a,point:o,u:t,id:`${_}_${g}`,dates:[g,y],value:`${f}%`,info:_,show:+f>0}}),[t,o,n,a]),d=(0,r.useCallback)((()=>{const e=u();e.show&&(s.find((t=>t.id===e.id))||c((t=>[...t,e])))}),[u,s]);return Mr("click",d),{stickyTooltips:s,handleUnStick:e=>{c((t=>t.filter((t=>t.id!==e))))},getTooltipProps:u,setCursor:e=>{const t=e.cursor.left||0,n=e.cursor.top||0;l({left:t,top:n})},resetTooltips:()=>{c([]),l({left:0,top:0})}}},zh=e=>{let{data:t,metrics:n=[],period:a,unit:i,setPeriod:o,layoutSize:l,height:s,onChangeLegend:c}=e;const{isDarkTheme:u}=Mt(),d=(0,r.useRef)(null),[h,m]=(0,r.useState)(),{xRange:p,setPlotScale:f}=Mh({period:a,setPeriod:o}),{onReadyChart:v,isPanning:g}=Eh(f);Ah({uPlotInst:h,xRange:p,setPlotScale:f});const{stickyTooltips:y,handleUnStick:_,getTooltipProps:b,setCursor:w,resetTooltips:k}=Dh({u:h,metrics:n,unit:i}),S=(0,r.useMemo)((()=>b()),[b]),x={...gh({width:l.width,height:s}),mode:2,series:[{},{paths:nh(),facets:[{scale:"x",auto:!0,sorted:1},{scale:"y",auto:!0}]}],axes:(()=>{const e=Kd([{}],i);return[...e,{scale:"y",stroke:e[0].stroke,font:e[0].font,size:Zd,splits:n.map(((e,t)=>t)),values:n.map((e=>e.metric.vmrange))}]})(),scales:{x:{time:!0},y:{log:2,time:!1,range:(e,t,n)=>[t-1,n+1]}},hooks:{ready:[v],setCursor:[w],setSelect:[kh(f)],destroy:[yh]}};return(0,r.useEffect)((()=>{k();const e=null===t[0]&&Array.isArray(t[1]);if(!d.current||!e)return;const n=new jd(x,t,d.current);return m(n),n.destroy}),[d,t,u]),(0,r.useEffect)((()=>{h&&(h.setSize({width:l.width||400,height:s||500}),h.redraw())}),[s,l]),(0,r.useEffect)((()=>{c(S)}),[S]),Nt("div",{className:Er()({"vm-line-chart":!0,"vm-line-chart_panning":g}),style:{minWidth:`${l.width||400}px`,minHeight:`${s||500}px`},children:[Nt("div",{className:"vm-line-chart__u-plot",ref:d}),Nt(Lh,{showTooltip:!!S.show,tooltipProps:S,stickyTooltips:y,handleUnStick:_})]})},Fh=()=>{const[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)({width:0,height:0}),i=(0,r.useCallback)((()=>{a({width:(null===e||void 0===e?void 0:e.offsetWidth)||0,height:(null===e||void 0===e?void 0:e.offsetHeight)||0})}),[null===e||void 0===e?void 0:e.offsetHeight,null===e||void 0===e?void 0:e.offsetWidth]);return Mr("resize",i),(0,r.useEffect)(i,[null===e||void 0===e?void 0:e.offsetHeight,null===e||void 0===e?void 0:e.offsetWidth]),[t,n]},jh={[ht.yhat]:"yhat",[ht.yhatLower]:"yhat_upper - yhat_lower",[ht.yhatUpper]:"yhat_upper - yhat_lower",[ht.anomaly]:"anomalies",[ht.training]:"training data",[ht.actual]:"y"},Hh=e=>{let{series:t}=e;const n=(0,r.useMemo)((()=>{const e=t.reduce(((e,t)=>{const n=Object.prototype.hasOwnProperty.call(t,"forecast"),r=t.forecast!==ht.yhatUpper,a=!e.find((e=>e.forecast===t.forecast));return n&&a&&r&&e.push(t),e}),[]),n={...e[0],forecast:ht.training,color:Xd[ht.training]};return e.splice(1,0,n),e.map((e=>({...e,color:"string"===typeof e.stroke?e.stroke:Xd[e.forecast||ht.actual]})))}),[t]);return Nt(Ct.FK,{children:Nt("div",{className:"vm-legend-anomaly",children:n.filter((e=>e.forecast!==ht.training)).map(((e,t)=>{var n;return Nt("div",{className:"vm-legend-anomaly-item",children:[Nt("svg",{children:e.forecast===ht.anomaly?Nt("circle",{cx:"15",cy:"7",r:"4",fill:e.color,stroke:e.color,strokeWidth:"1.4"}):Nt("line",{x1:"0",y1:"7",x2:"30",y2:"7",stroke:e.color,strokeWidth:e.width||1,strokeDasharray:null===(n=e.dash)||void 0===n?void 0:n.join(",")})}),Nt("div",{className:"vm-legend-anomaly-item__title",children:jh[e.forecast||ht.actual]})]},`${t}_${e.forecast}`)}))})})},Uh=e=>{let{data:t=[],period:n,customStep:a,query:i,yaxis:o,unit:l,showLegend:s=!0,setYaxisLimits:c,setPeriod:u,alias:d=[],fullWidth:h=!0,height:m,isHistogram:p,isAnomalyView:f,spanGaps:v}=e;const{isMobile:g}=ta(),{timezone:y}=fn(),_=(0,r.useMemo)((()=>a||n.step||"1s"),[n.step,a]),b=(0,r.useMemo)((()=>ih(t,p)),[p,t]),[w,k]=(0,r.useState)([[]]),[S,x]=(0,r.useState)([]),[C,E]=(0,r.useState)([]),[N,A]=(0,r.useState)([]),[M,T]=(0,r.useState)(null),$=(0,r.useMemo)((()=>lh(b,N,d,f)),[b,N,d,f]),L=e=>{const t=((e,t)=>{const n={},r=Object.values(e).flat(),a=Ud(r)||0,i=Hd(r)||1;return n[1]=t?Qd(a,i):[a,i],n})(e,!p);c(t)},P=e=>{if(!f)return e;const t=function(e,t){const n=e.reduce(((e,n)=>{const r=t.map((e=>`${e}: ${n[e]||"-"}`)).join("|");return(e[r]=e[r]||[]).push(n),e}),{});return Object.entries(n).map((e=>{let[t,n]=e;return{keys:t.split("|"),values:n}}))}(e,["group","label"]);return t.map((e=>{const t=e.values[0];return{...t,freeFormFields:{...t.freeFormFields,__name__:""}}}))};(0,r.useEffect)((()=>{const e=[],t={},r=[],a=[{}];null===b||void 0===b||b.forEach(((n,i)=>{const o=$(n,i);a.push(o),r.push(ch(o,n.group));const l=t[n.group]||[];for(const t of n.values)e.push(t[0]),l.push(Al(t[1]));t[n.group]=l}));const i=((e,t,n)=>{const r=Qt(t)||1,a=Array.from(new Set(e)).sort(((e,t)=>e-t));let i=n.start;const o=qt(n.end+r);let l=0;const s=[];for(;i<=o;){for(;l<a.length&&a[l]<=i;)i=a[l],l++,s.push(i);i=qt(i+r),(l>=a.length||a[l]>i)&&s.push(i)}for(;s.length<2;)s.push(i),i=qt(i+r);return s})(e,_,n),o=b.map((e=>{const t=[],n=e.values,r=n.length;let a=0;for(const u of i){for(;a<r&&n[a][0]<u;)a++;let e=null;a<r&&n[a][0]==u&&(e=Al(n[a][1]),Number.isFinite(e)||(e=null)),t.push(e)}const o=t.filter((e=>null!==e)),l=Math.abs((e=>{let t=e[0],n=1;for(let r=1;r<e.length;r++){const a=e[r];Number.isFinite(a)&&(t=t*(n-1)/n+a/n,n++)}return t})(o)),s=Qd(Ud(o),Hd(o)),c=Math.abs(s[1]-s[0]);return l>1e10*c&&!f?t.map((()=>l)):t}));o.unshift(i),L(t);const l=p?(e=>{const t=e.slice(1,e.length),n=[],r=[];t.forEach(((e,n)=>{e.forEach(((e,a)=>{const i=a*t.length+n;r[i]=e}))})),e[0].forEach((e=>{const r=new Array(t.length).fill(e);n.push(...r)}));const a=new Array(n.length).fill(0).map(((e,n)=>n%t.length));return[null,[n,a,r]]})(o):o;k(l),x(a);const s=P(r);E(s),f&&A(s.map((e=>e.label||"")).slice(1))}),[b,y,p,_]),(0,r.useEffect)((()=>{const e=[],t=[{}];null===b||void 0===b||b.forEach(((n,r)=>{const a=$(n,r);t.push(a),e.push(ch(a,n.group))})),x(t),E(P(e))}),[N]);const[I,O]=Fh();return Nt("div",{className:Er()({"vm-graph-view":!0,"vm-graph-view_full-width":h,"vm-graph-view_full-width_mobile":h&&g}),ref:I,children:[!p&&Nt(Ph,{data:w,series:S,metrics:b,period:n,yaxis:o,unit:l,setPeriod:u,layoutSize:O,height:m,isAnomalyView:f,spanGaps:v}),p&&Nt(zh,{data:w,metrics:b,period:n,unit:l,setPeriod:u,layoutSize:O,height:m,onChangeLegend:T}),f&&s&&Nt(Hh,{series:S}),!p&&s&&Nt(Oh,{labels:C,query:i,isAnomalyView:f,onChange:(e,t)=>{A((e=>{let{hideSeries:t,legend:n,metaKey:r,series:a,isAnomalyView:i}=e;const{label:o}=n,l=uh(o,t),s=a.map((e=>e.label||""));return i?s.filter((e=>e!==o)):r?l?t.filter((e=>e!==o)):[...t,o]:t.length?l?[...s.filter((e=>e!==o))]:[]:[...s.filter((e=>e!==o))]})({hideSeries:N,legend:e,metaKey:t,series:S,isAnomalyView:f}))}}),p&&s&&Nt(Rh,{series:S,min:o.limits.range[1][0]||0,max:o.limits.range[1][1]||0,legendValue:M})]})},Vh=e=>{let{yaxis:t,setYaxisLimits:n,toggleEnableLimits:a}=e;const{isMobile:i}=ta(),o=(0,r.useMemo)((()=>Object.keys(t.limits.range)),[t.limits.range]),l=(0,r.useCallback)(qi()(((e,r,a)=>{const i=t.limits.range;i[r][a]=+e,i[r][0]===i[r][1]||i[r][0]>i[r][1]||n(i)}),500),[t.limits.range]),s=(e,t)=>n=>{l(n,e,t)};return Nt("div",{className:Er()({"vm-axes-limits":!0,"vm-axes-limits_mobile":i}),children:[Nt(Ti,{value:t.limits.enable,onChange:a,label:"Fix the limits for y-axis",fullWidth:i}),Nt("div",{className:"vm-axes-limits-list",children:o.map((e=>Nt("div",{className:"vm-axes-limits-list__inputs",children:[Nt(Ka,{label:`Min ${e}`,type:"number",disabled:!t.limits.enable,value:t.limits.range[e][0],onChange:s(e,0)}),Nt(Ka,{label:`Max ${e}`,type:"number",disabled:!t.limits.enable,value:t.limits.range[e][1],onChange:s(e,1)})]},e)))})]})},Bh=e=>{let{spanGaps:t,onChange:n}=e;const{isMobile:r}=ta();return Nt("div",{children:Nt(Ti,{value:t,onChange:n,label:"Connect null values",fullWidth:r})})},qh="Graph settings",Yh=e=>{let{yaxis:t,setYaxisLimits:n,toggleEnableLimits:a,spanGaps:i}=e;const o=(0,r.useRef)(null),l=(0,r.useRef)(null),{value:s,toggle:c,setFalse:u}=ma(!1);return Nt("div",{className:"vm-graph-settings",children:[Nt(ba,{title:qh,children:Nt("div",{ref:l,children:Nt(da,{variant:"text",startIcon:Nt($n,{}),onClick:c,ariaLabel:"settings"})})}),Nt(ha,{open:s,buttonRef:l,placement:"bottom-right",onClose:u,title:qh,children:Nt("div",{className:"vm-graph-settings-popper",ref:o,children:Nt("div",{className:"vm-graph-settings-popper__body",children:[Nt(Vh,{yaxis:t,setYaxisLimits:n,toggleEnableLimits:a}),Nt(Bh,{spanGaps:i.value,onChange:i.onChange})]})})})]})},Wh=e=>{let{isHistogram:t,graphData:n,controlsRef:a,isAnomalyView:i}=e;const{isMobile:o}=ta(),{customStep:l,yaxis:s,spanGaps:c}=Br(),{period:u}=fn(),{query:d}=Cn(),h=vn(),m=qr(),p=e=>{m({type:"SET_YAXIS_LIMITS",payload:e})},f=Nt("div",{className:"vm-custom-panel-body-header__graph-controls",children:[Nt(Ca,{}),Nt(Yh,{yaxis:s,setYaxisLimits:p,toggleEnableLimits:()=>{m({type:"TOGGLE_ENABLE_YAXIS_LIMITS"})},spanGaps:{value:c,onChange:e=>{m({type:"SET_SPAN_GAPS",payload:e})}}})]});return Nt(Ct.FK,{children:[a.current&&(0,r.createPortal)(f,a.current),Nt(Uh,{data:n,period:u,customStep:l,query:d,yaxis:s,setYaxisLimits:p,setPeriod:e=>{let{from:t,to:n}=e;h({type:"SET_PERIOD",payload:{from:t,to:n}})},height:o?.5*window.innerHeight:500,isHistogram:t,isAnomalyView:i,spanGaps:c})]})},Kh=e=>{let{data:t}=e;const n=fl(),a=(0,r.useMemo)((()=>JSON.stringify(t,null,2)),[t]);return Nt("div",{className:"vm-json-view",children:[Nt("div",{className:"vm-json-view__copy",children:Nt(da,{variant:"outlined",onClick:async()=>{await n(a,"Formatted JSON has been copied")},children:"Copy JSON"})}),Nt("pre",{className:"vm-json-view__code",children:Nt("code",{children:a})})]})},Qh=e=>{const t={};return e.forEach((e=>Object.entries(e.metric).forEach((e=>t[e[0]]?t[e[0]].options.add(e[1]):t[e[0]]={options:new Set([e[1]])})))),Object.entries(t).map((e=>({key:e[0],variations:e[1].options.size}))).sort(((e,t)=>e.variations-t.variations))},Zh=(e,t)=>(0,r.useMemo)((()=>{if(!t)return[];return Qh(e).filter((e=>t.includes(e.key)))}),[e,t]),Gh=e=>{let{data:t,displayColumns:n}=e;const a=fl(),{isMobile:i}=ta(),{tableCompact:o}=Fr(),l=(0,r.useRef)(null),[s,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("asc"),h=o?Zh([{group:0,metric:{Data:"Data"}}],["Data"]):Zh(t,n),m=e=>{const{__name__:t,...n}=e;return t||Object.keys(n).length?t?`${t} ${JSON.stringify(n)}`:`${JSON.stringify(n)}`:""},p=new Set(null===t||void 0===t?void 0:t.map((e=>e.group))).size>1,f=(0,r.useMemo)((()=>{const e=null===t||void 0===t?void 0:t.map((e=>({metadata:h.map((t=>o?Nl(e,"",p):e.metric[t.key]||"-")),value:e.value?e.value[1]:"-",values:e.values?e.values.map((e=>{let[t,n]=e;return`${n} @${t}`})):[],copyValue:m(e.metric)}))),n="Value"===s,r=h.findIndex((e=>e.key===s));return n||-1!==r?e.sort(((e,t)=>{const a=n?Number(e.value):e.metadata[r],i=n?Number(t.value):t.metadata[r];return("asc"===u?a<i:a>i)?-1:1})):e}),[h,t,s,u,o]),v=(0,r.useMemo)((()=>f.some((e=>e.copyValue))),[f]),g=e=>()=>{(e=>{d((t=>"asc"===t&&s===e?"desc":"asc")),c(e)})(e)};return f.length?Nt("div",{className:Er()({"vm-table-view":!0,"vm-table-view_mobile":i}),children:Nt("table",{className:"vm-table",ref:l,children:[Nt("thead",{className:"vm-table-header",children:Nt("tr",{className:"vm-table__row vm-table__row_header",children:[h.map(((e,t)=>Nt("td",{className:"vm-table-cell vm-table-cell_header vm-table-cell_sort",onClick:g(e.key),children:Nt("div",{className:"vm-table-cell__content",children:[e.key,Nt("div",{className:Er()({"vm-table__sort-icon":!0,"vm-table__sort-icon_active":s===e.key,"vm-table__sort-icon_desc":"desc"===u&&s===e.key}),children:Nt(jn,{})})]})},t))),Nt("td",{className:"vm-table-cell vm-table-cell_header vm-table-cell_right vm-table-cell_sort",onClick:g("Value"),children:Nt("div",{className:"vm-table-cell__content",children:[Nt("div",{className:Er()({"vm-table__sort-icon":!0,"vm-table__sort-icon_active":"Value"===s,"vm-table__sort-icon_desc":"desc"===u}),children:Nt(jn,{})}),"Value"]})}),v&&Nt("td",{className:"vm-table-cell vm-table-cell_header"})]})}),Nt("tbody",{className:"vm-table-body",children:f.map(((e,t)=>{return Nt("tr",{className:"vm-table__row",children:[e.metadata.map(((e,n)=>Nt("td",{className:Er()({"vm-table-cell vm-table-cell_no-wrap":!0,"vm-table-cell_gray":f[t-1]&&f[t-1].metadata[n]===e}),children:e},n))),Nt("td",{className:"vm-table-cell vm-table-cell_right vm-table-cell_no-wrap",children:e.values.length?e.values.map((e=>Nt("p",{children:e},e))):e.value}),v&&Nt("td",{className:"vm-table-cell vm-table-cell_right",children:e.copyValue&&Nt("div",{className:"vm-table-cell__content",children:Nt(ba,{title:"Copy row",children:Nt(da,{variant:"text",color:"gray",size:"small",startIcon:Nt(rr,{}),onClick:(n=e.copyValue,async()=>{await a(n,"Row has been copied")}),ariaLabel:"copy row"})})})})]},t);var n}))})]})}):Nt(ra,{variant:"warning",children:"No data to show"})},Jh=e=>{let{checked:t=!1,disabled:n=!1,label:r,color:a="secondary",onChange:i}=e;return Nt("div",{className:Er()({"vm-checkbox":!0,"vm-checkbox_disabled":n,"vm-checkbox_active":t,[`vm-checkbox_${a}_active`]:t,[`vm-checkbox_${a}`]:a}),onClick:()=>{n||i(!t)},children:[Nt("div",{className:"vm-checkbox-track",children:Nt("div",{className:"vm-checkbox-track__thumb",children:Nt(Xn,{})})}),r&&Nt("span",{className:"vm-checkbox__label",children:r})]})},Xh="Table settings",em=e=>{let{columns:t,selectedColumns:n=[],tableCompact:a,onChangeColumns:i,toggleTableCompact:o}=e;const l=(0,r.useRef)(null),{value:s,toggle:c,setFalse:u}=ma(!1),{value:d,toggle:h}=ma(Boolean(et("TABLE_COLUMNS"))),[m,p]=(0,r.useState)(""),[f,v]=(0,r.useState)(-1),g=(0,r.useMemo)((()=>n.filter((e=>!t.includes(e)))),[t,n]),y=(0,r.useMemo)((()=>{const e=g.concat(t);return m?e.filter((e=>e.includes(m))):e}),[t,g,m]),_=(0,r.useMemo)((()=>y.every((e=>n.includes(e)))),[n,y]),b=e=>{i(n.includes(e)?n.filter((t=>t!==e)):[...n,e])};return(0,r.useEffect)((()=>{pl(t,n)||d||i(t)}),[t]),(0,r.useEffect)((()=>{d?n.length&&Xe("TABLE_COLUMNS",n.join(",")):tt(["TABLE_COLUMNS"])}),[d,n]),(0,r.useEffect)((()=>{const e=et("TABLE_COLUMNS");e&&i(e.split(","))}),[]),Nt("div",{className:"vm-table-settings",children:[Nt(ba,{title:Xh,children:Nt("div",{ref:l,children:Nt(da,{variant:"text",startIcon:Nt($n,{}),onClick:c,ariaLabel:Xh})})}),s&&Nt(_a,{title:Xh,className:"vm-table-settings-modal",onClose:u,children:[Nt("div",{className:"vm-table-settings-modal-section",children:[Nt("div",{className:"vm-table-settings-modal-section__title",children:"Customize columns"}),Nt("div",{className:"vm-table-settings-modal-columns",children:[Nt("div",{className:"vm-table-settings-modal-columns__search",children:Nt(Ka,{placeholder:"Search columns",startIcon:Nt(Sr,{}),value:m,onChange:p,onBlur:()=>{v(-1)},onKeyDown:e=>{const t="ArrowUp"===e.key,n="ArrowDown"===e.key,r="Enter"===e.key;(n||t||r)&&e.preventDefault(),n?v((e=>e+1>y.length-1?e:e+1)):t?v((e=>e-1<0?e:e-1)):r&&b(y[f])},type:"search"})}),Nt("div",{className:"vm-table-settings-modal-columns-list",children:[!!y.length&&Nt("div",{className:"vm-table-settings-modal-columns-list__item vm-table-settings-modal-columns-list__item_all",children:Nt(Jh,{checked:_,onChange:()=>{i(_?n.filter((e=>!y.includes(e))):y)},label:_?"Uncheck all":"Check all",disabled:a})}),!y.length&&Nt("div",{className:"vm-table-settings-modal-columns-no-found",children:Nt("p",{className:"vm-table-settings-modal-columns-no-found__info",children:"No columns found."})}),y.map(((e,t)=>{return Nt("div",{className:Er()({"vm-table-settings-modal-columns-list__item":!0,"vm-table-settings-modal-columns-list__item_focus":t===f,"vm-table-settings-modal-columns-list__item_custom":g.includes(e)}),children:Nt(Jh,{checked:n.includes(e),onChange:(r=e,()=>{b(r)}),label:e,disabled:a})},e);var r}))]}),Nt("div",{className:"vm-table-settings-modal-preserve",children:[Nt(Jh,{checked:d,onChange:h,label:"Preserve column settings",disabled:a,color:"primary"}),Nt("p",{className:"vm-table-settings-modal-preserve__info",children:"This label indicates that when the checkbox is activated, the current column configurations will not be reset."})]})]})]}),Nt("div",{className:"vm-table-settings-modal-section",children:[Nt("div",{className:"vm-table-settings-modal-section__title",children:"Table view"}),Nt("div",{className:"vm-table-settings-modal-columns-list__item",children:Nt(Ti,{label:"Compact view",value:a,onChange:o})})]})]})]})},tm=e=>{let{liveData:t,controlsRef:n}=e;const{tableCompact:a}=Fr(),i=jr(),[o,l]=(0,r.useState)(),s=(0,r.useMemo)((()=>Qh(t||[]).map((e=>e.key))),[t]),c=Nt(em,{columns:s,selectedColumns:o,onChangeColumns:l,tableCompact:a,toggleTableCompact:()=>{i({type:"TOGGLE_TABLE_COMPACT"})}});return Nt(Ct.FK,{children:[n.current&&(0,r.createPortal)(c,n.current),Nt(Gh,{data:t,displayColumns:o})]})},nm=e=>{let{graphData:t,liveData:n,isHistogram:r,displayType:a,controlsRef:i}=e;return a===mt.code&&n?Nt(Kh,{data:n}):a===mt.table&&n?Nt(tm,{liveData:n,controlsRef:i}):a===mt.chart&&t?Nt(Wh,{graphData:t,isHistogram:r,controlsRef:i}):null},rm=[Nt(Ct.FK,{children:[Nt("p",{children:"Filename - specify the name for your report file."}),Nt("p",{children:["Default format: ",Nt("code",{children:["vmui_report_$",Rt,".json"]}),"."]}),Nt("p",{children:"This name will be used when saving your report on your device."})]}),Nt(Ct.FK,{children:[Nt("p",{children:"Comment (optional) - add a comment to your report."}),Nt("p",{children:"This can be any additional information that will be useful when reviewing the report later."})]}),Nt(Ct.FK,{children:[Nt("p",{children:"Query trace - enable this option to include a query trace in your report."}),Nt("p",{children:"This will assist in analyzing and diagnosing the query processing."})]}),Nt(Ct.FK,{children:[Nt("p",{children:"Generate Report - click this button to generate and save your report. "}),Nt("p",{children:["After creation, the report can be downloaded and examined on the ",Nt(Oe,{to:We.queryAnalyzer,target:"_blank",rel:"noreferrer",className:"vm-link vm-link_underlined",children:Ye[We.queryAnalyzer].title})," page."]})]})],am=()=>`vmui_report_${i()().utc().format(Rt)}`,im=e=>{let{fetchUrl:t}=e;const{query:n}=Cn(),[a,i]=(0,r.useState)(am()),[o,l]=(0,r.useState)(""),[s,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(),[h,m]=(0,r.useState)(!1),p=(0,r.useRef)(null),f=(0,r.useRef)(null),v=(0,r.useRef)(null),g=(0,r.useRef)(null),y=[p,f,v,g],[_,b]=(0,r.useState)(0),{value:w,toggle:k,setFalse:S}=ma(!1),{value:x,toggle:C,setFalse:E}=ma(!1),N=(0,r.useMemo)((()=>{if(t)return t.map(((e,t)=>{const n=new URL(e);return s?n.searchParams.set("trace","1"):n.searchParams.delete("trace"),{id:t,url:n}}))}),[t,s]),A=(0,r.useCallback)((e=>{const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${a||am()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),S()}),[a]),M=(0,r.useCallback)((async()=>{if(N){d(""),m(!0);try{const e=[];for await(const{url:t,id:n}of N){const r=await fetch(t),a=await r.json();if(r.ok)a.vmui={id:n,comment:o,params:at().parse(new URL(t).search.replace(/^\?/,""))},e.push(a);else{const e=a.errorType?`${a.errorType}\r\n`:"";d(`${e}${(null===a||void 0===a?void 0:a.error)||(null===a||void 0===a?void 0:a.message)||"unknown error"}`)}}e.length&&A(e)}catch(Yp){Yp instanceof Error&&"AbortError"!==Yp.name&&d(`${Yp.name}: ${Yp.message}`)}finally{m(!1)}}else d(pt.validQuery)}),[N,o,A,n]),T=e=>()=>{b((t=>t+e))};(0,r.useEffect)((()=>{d(""),i(am()),l("")}),[w]),(0,r.useEffect)((()=>{b(0)}),[x]);const $=()=>Nt(Oe,{className:"vm-link vm-link_underlined vm-link_colored",to:We.rawQuery,children:"Raw Query"});return Nt(Ct.FK,{children:[Nt(ba,{title:"Export query",children:Nt(da,{variant:"text",startIcon:Nt(br,{}),onClick:k,ariaLabel:"export query"})}),w&&Nt(_a,{title:"Export query",onClose:S,isOpen:w,children:Nt("div",{className:"vm-download-report",children:[Nt("div",{className:"vm-download-report-settings",children:[Nt("div",{ref:p,children:Nt(Ka,{label:"Filename",value:a,onChange:i})}),Nt("div",{ref:f,children:Nt(Ka,{type:"textarea",label:"Comment",value:o,onChange:l})}),Nt("div",{ref:v,children:Nt(Jh,{checked:s,onChange:c,label:"Include query trace"})}),Nt(ra,{variant:"info",children:["If confused with the query results, try viewing the raw samples for selected series in ",Nt($,{})," tab."]})]}),u&&Nt(ra,{variant:"error",children:u}),Nt("div",{className:"vm-download-report__buttons",children:[Nt(da,{variant:"text",onClick:C,children:"Help"}),Nt("div",{ref:g,children:Nt(da,{onClick:M,disabled:h,children:h?"Loading data...":"Generate Report"})})]}),Nt(ha,{open:x,buttonRef:y[_],placement:"top-left",variant:"dark",onClose:E,children:Nt("div",{className:"vm-download-report-helper",children:[Nt("div",{className:"vm-download-report-helper__description",children:rm[_]}),Nt("div",{className:"vm-download-report-helper__buttons",children:[0!==_&&Nt(da,{onClick:T(-1),size:"small",color:"white",children:"Prev"}),Nt(da,{onClick:_===y.length-1?E:T(1),size:"small",color:"white",variant:"text",children:_===y.length-1?"Close":"Next"})]})]})})]})})]})},om=()=>{Pl();const{isMobile:e}=ta(),{displayType:t}=Fr(),{query:n}=Cn(),{customStep:a}=Br(),i=qr(),[o,l]=(0,r.useState)([]),[s,c]=(0,r.useState)(!n[0]),[u,d]=(0,r.useState)(!1),h=(0,r.useRef)(null),{fetchUrl:m,isLoading:p,liveData:f,graphData:v,error:g,queryErrors:y,setQueryErrors:_,queryStats:b,warning:w,traces:k,isHistogram:S,abortFetch:x}=$l({visible:!0,customStep:a,hideQuery:o,showAllSeries:u}),C=!(null!==f&&void 0!==f&&f.length)&&t!==mt.chart,E=!s&&g;return(0,r.useEffect)((()=>{i({type:"SET_IS_HISTOGRAM",payload:S})}),[v]),Nt("div",{className:Er()({"vm-custom-panel":!0,"vm-custom-panel_mobile":e}),children:[Nt(xl,{queryErrors:s?[]:y,setQueryErrors:_,setHideError:c,stats:b,isLoading:p,onHideQuery:e=>{l(e)},onRunQuery:()=>{c(!1)},abortFetch:x,hideButtons:{reduceMemUsage:!0}}),Nt(Vl,{traces:k,displayType:t}),E&&Nt(ra,{variant:"error",children:g}),C&&Nt(ra,{variant:"info",children:Nt(Dl,{})}),w&&Nt(Bl,{warning:w,query:n,onChange:d}),Nt("div",{className:Er()({"vm-custom-panel-body":!0,"vm-custom-panel-body_mobile":e,"vm-block":!0,"vm-block_mobile":e}),children:[p&&Nt(Ll,{}),Nt("div",{className:"vm-custom-panel-body-header",ref:h,children:[Nt("div",{className:"vm-custom-panel-body-header__tabs",children:Nt(Pr,{})}),(v||f)&&Nt(im,{fetchUrl:m})]}),Nt(nm,{graphData:v,liveData:f,isHistogram:S,displayType:t,controlsRef:h})]})]})},lm=e=>{let{title:t,description:n,unit:a,expr:i,showLegend:o,filename:l,alias:s}=e;const{isMobile:c}=ta(),{period:u}=fn(),{customStep:d}=Br(),h=vn(),m=(0,r.useRef)(null),[p,f]=(0,r.useState)(!1),[v,g]=(0,r.useState)(!1),[y,_]=(0,r.useState)({limits:{enable:!1,range:{1:[0,0]}}}),b=(0,r.useMemo)((()=>Array.isArray(i)&&i.every((e=>e))),[i]),{isLoading:w,graphData:k,error:S,warning:x}=$l({predefinedQuery:b?i:[],display:mt.chart,visible:p,customStep:d}),C=e=>{const t={...y};t.limits.range=e,_(t)};if((0,r.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>f(e.isIntersecting)))}),{threshold:.1});return m.current&&e.observe(m.current),()=>{m.current&&e.unobserve(m.current)}}),[m]),!b)return Nt(ra,{variant:"error",children:[Nt("code",{children:'"expr"'})," not found. Check the configuration file ",Nt("b",{children:l}),"."]});const E=()=>Nt("div",{className:"vm-predefined-panel-header__description vm-default-styles",children:[n&&Nt(Ct.FK,{children:[Nt("div",{children:[Nt("span",{children:"Description:"}),Nt("div",{dangerouslySetInnerHTML:{__html:al(n)}})]}),Nt("hr",{})]}),Nt("div",{children:[Nt("span",{children:"Queries:"}),Nt("div",{children:i.map(((e,t)=>Nt("div",{children:e},`${t}_${e}`)))})]})]});return Nt("div",{className:"vm-predefined-panel",ref:m,children:[Nt("div",{className:"vm-predefined-panel-header",children:[Nt(ba,{title:Nt(E,{}),children:Nt("div",{className:"vm-predefined-panel-header__info",children:Nt(In,{})})}),Nt("h3",{className:"vm-predefined-panel-header__title",children:t||""}),Nt(Yh,{yaxis:y,setYaxisLimits:C,toggleEnableLimits:()=>{const e={...y};e.limits.enable=!e.limits.enable,_(e)},spanGaps:{value:v,onChange:g}})]}),Nt("div",{className:"vm-predefined-panel-body",children:[w&&Nt(kl,{}),S&&Nt(ra,{variant:"error",children:S}),x&&Nt(ra,{variant:"warning",children:x}),k&&Nt(Uh,{data:k,period:u,customStep:d,query:i,yaxis:y,unit:a,alias:s,showLegend:o,setYaxisLimits:C,setPeriod:e=>{let{from:t,to:n}=e;h({type:"SET_PERIOD",payload:{from:t,to:n}})},fullWidth:!1,height:c?.5*window.innerHeight:500,spanGaps:v})]})]})},sm=e=>{let{index:t,title:n,panels:a,filename:i}=e;const o=Tr(),l=(0,r.useMemo)((()=>o.width/12),[o]),[s,c]=(0,r.useState)(!t),[u,d]=(0,r.useState)([]);(0,r.useEffect)((()=>{d(a&&a.map((e=>e.width||12)))}),[a]);const[h,m]=(0,r.useState)({start:0,target:0,enable:!1}),p=(0,r.useCallback)((e=>{if(!h.enable)return;const{start:t}=h,n=Math.ceil((t-e.clientX)/l);if(Math.abs(n)>=12)return;const r=u.map(((e,t)=>e-(t===h.target?n:0)));d(r)}),[h,l]),f=(0,r.useCallback)((()=>{m({...h,enable:!1})}),[h]),v=e=>t=>{((e,t)=>{m({start:e.clientX,target:t,enable:!0})})(t,e)};Mr("mousemove",p),Mr("mouseup",f);return Nt("div",{className:"vm-predefined-dashboard",children:Nt(ki,{defaultExpanded:s,onChange:e=>c(e),title:Nt((()=>Nt("div",{className:Er()({"vm-predefined-dashboard-header":!0,"vm-predefined-dashboard-header_open":s}),children:[(n||i)&&Nt("span",{className:"vm-predefined-dashboard-header__title",children:n||`${t+1}. ${i}`}),a&&Nt("span",{className:"vm-predefined-dashboard-header__count",children:["(",a.length," panels)"]})]})),{}),children:Nt("div",{className:"vm-predefined-dashboard-panels",children:Array.isArray(a)&&a.length?a.map(((e,t)=>Nt("div",{className:"vm-predefined-dashboard-panels-panel vm-block vm-block_empty-padding",style:{gridColumn:`span ${u[t]}`},children:[Nt(lm,{title:e.title,description:e.description,unit:e.unit,expr:e.expr,alias:e.alias,filename:i,showLegend:e.showLegend}),Nt("button",{className:"vm-predefined-dashboard-panels-panel__resizer",onMouseDown:v(t),"aria-label":"resize the panel"})]},t))):Nt("div",{className:"vm-predefined-dashboard-panels-panel__alert",children:Nt(ra,{variant:"error",children:[Nt("code",{children:'"panels"'})," not found. Check the configuration file ",Nt("b",{children:i}),"."]})})})})})};function cm(e){return function(e,t){return Object.fromEntries(Object.entries(e).filter(t))}(e,(e=>!!e[1]||"number"===typeof e[1]))}const um=()=>{(()=>{const{duration:e,relativeTime:t,period:{date:n}}=fn(),{customStep:a}=Br(),{setSearchParamsFromKeys:i}=hi(),o=()=>{const r=cm({"g0.range_input":e,"g0.end_input":n,"g0.step_input":a,"g0.relative_time":t});i(r)};(0,r.useEffect)(o,[e,t,n,a]),(0,r.useEffect)(o,[])})();const{isMobile:e}=ta(),{dashboardsSettings:t,dashboardsLoading:n,dashboardsError:a}=Qr(),[i,o]=(0,r.useState)(0),l=(0,r.useMemo)((()=>t.map(((e,t)=>({label:e.title||"",value:t})))),[t]),s=(0,r.useMemo)((()=>t[i]||{}),[t,i]),c=(0,r.useMemo)((()=>null===s||void 0===s?void 0:s.rows),[s]),u=(0,r.useMemo)((()=>s.title||s.filename||""),[s]),d=(0,r.useMemo)((()=>Array.isArray(c)&&!!c.length),[c]),h=e=>()=>{(e=>{o(e)})(e)};return Nt("div",{className:"vm-predefined-panels",children:[n&&Nt(kl,{}),!t.length&&a&&Nt(ra,{variant:"error",children:a}),!t.length&&Nt(ra,{variant:"info",children:"Dashboards not found"}),l.length>1&&Nt("div",{className:Er()({"vm-predefined-panels-tabs":!0,"vm-predefined-panels-tabs_mobile":e}),children:l.map((e=>Nt("div",{className:Er()({"vm-predefined-panels-tabs__tab":!0,"vm-predefined-panels-tabs__tab_active":e.value==i}),onClick:h(e.value),children:e.label},e.value)))}),Nt("div",{className:"vm-predefined-panels__dashboards",children:[d&&c.map(((e,t)=>Nt(sm,{index:t,filename:u,title:e.title,panels:e.panels},`${i}_${t}`))),!!t.length&&!d&&Nt(ra,{variant:"error",children:[Nt("code",{children:'"rows"'})," not found. Check the configuration file ",Nt("b",{children:u}),"."]})]})]})},dm=(e,t)=>{const n=t.match?"&match[]="+encodeURIComponent(t.match):"",r=t.focusLabel?"&focusLabel="+encodeURIComponent(t.focusLabel):"";return`${e}/api/v1/status/tsdb?topN=${t.topN}&date=${t.date}${n}${r}`};class hm{constructor(){this.tsdbStatus=void 0,this.tabsNames=void 0,this.isPrometheus=void 0,this.tsdbStatus=this.defaultTSDBStatus,this.tabsNames=["table","graph"],this.isPrometheus=!1,this.getDefaultState=this.getDefaultState.bind(this)}set tsdbStatusData(e){this.isPrometheus=!(null===e||void 0===e||!e.headStats),this.tsdbStatus=e}get tsdbStatusData(){return this.tsdbStatus}get defaultTSDBStatus(){return{totalSeries:0,totalSeriesPrev:0,totalSeriesByAll:0,totalLabelValuePairs:0,seriesCountByMetricName:[],seriesCountByLabelName:[],seriesCountByFocusLabelValue:[],seriesCountByLabelValuePair:[],labelValueCountByLabelName:[]}}get isPrometheusData(){return this.isPrometheus}keys(e,t){const n=e&&/__name__=".+"/.test(e),r=e&&/{.+=".+"}/g.test(e),a=e&&/__name__=".+", .+!=""/g.test(e);let i=[];return i=t||a?i.concat("seriesCountByFocusLabelValue"):n?i.concat("labelValueCountByLabelName"):r?i.concat("seriesCountByMetricName","seriesCountByLabelName"):i.concat("seriesCountByMetricName","seriesCountByLabelName","seriesCountByLabelValuePair","labelValueCountByLabelName"),i}getDefaultState(e,t){return this.keys(e,t).reduce(((e,t)=>({...e,tabs:{...e.tabs,[t]:this.tabsNames},containerRefs:{...e.containerRefs,[t]:(0,r.useRef)(null)}})),{tabs:{},containerRefs:{}})}sectionsTitles(e){return{seriesCountByMetricName:"Metric names with the highest number of series",seriesCountByLabelName:"Labels with the highest number of series",seriesCountByFocusLabelValue:`Values for "${e}" label with the highest number of series`,seriesCountByLabelValuePair:"Label=value pairs with the highest number of series",labelValueCountByLabelName:"Labels with the highest number of unique values"}}get sectionsTips(){return{seriesCountByMetricName:"\n        <p>\n          This table returns a list of metrics with the highest cardinality.\n          The cardinality of a metric is the number of time series associated with that metric,\n          where each time series is defined as a unique combination of key-value label pairs.\n        </p>\n        <p>\n          When looking to reduce the number of active series in your data source,\n          you can start by inspecting individual metrics with high cardinality\n          (i.e. that have lots of active time series associated with them),\n          since that single metric contributes a large fraction of the series that make up your total series count.\n        </p>",seriesCountByLabelName:"\n        <p>\n          This table returns a list of the labels with the highest number of series.\n        </p>\n        <p>\n          Use this table to identify labels that are storing dimensions with high cardinality\n          (many different label values).\n        </p>\n        <p>\n          It is recommended to choose labels such that they have a finite set of values,\n          since every unique combination of key-value label pairs creates a new time series\n          and therefore can dramatically increase the number of time series in your system.\n        </p>",seriesCountByFocusLabelValue:"\n       <p>\n          This table returns a list of unique label values per selected label.\n       </p>\n       <p>\n          Use this table to identify label values that are storing per each selected series.\n       </p>",labelValueCountByLabelName:"\n       <p>\n          This table returns a list of labels with the highest number of the unique values.\n       </p>\n      ",seriesCountByLabelValuePair:"\n        <p>\n          This table returns a list of the label values pairs with the highest number of series.\n        </p>\n        <p>\n          Use this table to identify unique label values pairs. This helps to identify same labels \n          is applied to count timeseries in your system, since every unique combination of key-value label pairs \n          creates a new time series and therefore can dramatically increase the number of time series in your system\n        </p>"}}get tablesHeaders(){return{seriesCountByMetricName:mm,seriesCountByLabelName:pm,seriesCountByFocusLabelValue:fm,seriesCountByLabelValuePair:vm,labelValueCountByLabelName:gm}}totalSeries(e){return"labelValueCountByLabelName"===e?-1:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.tsdbStatus.totalSeriesPrev:this.tsdbStatus.totalSeries}}const mm=[{id:"name",label:"Metric name"},{id:"value",label:"Number of series"},{id:"percentage",label:"Share in total",info:"Shows the share of a metric to the total number of series"},{id:"action",label:""}],pm=[{id:"name",label:"Label name"},{id:"value",label:"Number of series"},{id:"percentage",label:"Share in total",info:"Shows the share of the label to the total number of series"},{id:"action",label:""}],fm=[{id:"name",label:"Label value"},{id:"value",label:"Number of series"},{id:"percentage",label:"Share in total"},{disablePadding:!1,id:"action",label:"",numeric:!1}],vm=[{id:"name",label:"Label=value pair"},{id:"value",label:"Number of series"},{id:"percentage",label:"Share in total",info:"Shows the share of the label value pair to the total number of series"},{id:"action",label:""}],gm=[{id:"name",label:"Label name"},{id:"value",label:"Number of unique values"},{id:"action",label:""}],ym=()=>{const e=new hm,[t]=je(),n=t.get("match"),a=t.get("focusLabel"),o=+(t.get("topN")||10),l=t.get("date")||i()().tz().format(Lt),s=Za(l),c=(0,r.useRef)(),{serverUrl:u}=Mt(),[d,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(),[f,v]=(0,r.useState)(e.defaultTSDBStatus),[g,y]=(0,r.useState)(!1),_=async e=>{const t=await fetch(e);if(t.ok)return await t.json();throw new Error(`Request failed with status ${t.status}`)},b=async t=>{if(!u)return;p(""),h(!0),v(e.defaultTSDBStatus);const r={...t,date:t.date,topN:0,match:"",focusLabel:""},a={...t,date:i()(t.date).subtract(1,"day").format(Lt)},o=[dm(u,t),dm(u,a)];s!==l&&(t.match||t.focusLabel)&&o.push(dm(u,r));try{var d,m,g,y,b,w,k,S,x,C;const[e,t,r]=await Promise.all(o.map(_)),a={...t.data},{data:i}=r||c.current||e;c.current={data:i};const l={...e.data,totalSeries:(null===(d=e.data)||void 0===d?void 0:d.totalSeries)||(null===(m=e.data)||void 0===m||null===(g=m.headStats)||void 0===g?void 0:g.numSeries)||0,totalLabelValuePairs:(null===(y=e.data)||void 0===y?void 0:y.totalLabelValuePairs)||(null===(b=e.data)||void 0===b||null===(w=b.headStats)||void 0===w?void 0:w.numLabelValuePairs)||0,seriesCountByLabelName:(null===(k=e.data)||void 0===k?void 0:k.seriesCountByLabelName)||[],seriesCountByFocusLabelValue:(null===(S=e.data)||void 0===S?void 0:S.seriesCountByFocusLabelValue)||[],totalSeriesByAll:(null===i||void 0===i?void 0:i.totalSeries)||(null===i||void 0===i||null===(x=i.headStats)||void 0===x?void 0:x.numSeries)||f.totalSeriesByAll||0,totalSeriesPrev:(null===a||void 0===a?void 0:a.totalSeries)||(null===a||void 0===a||null===(C=a.headStats)||void 0===C?void 0:C.numSeries)||0},s=null===n||void 0===n?void 0:n.replace(/[{}"]/g,"");l.seriesCountByLabelValuePair=l.seriesCountByLabelValuePair.filter((e=>e.name!==s)),((e,t)=>{Object.keys(e).forEach((n=>{const r=n,a=e[r],i=t[r];Array.isArray(a)&&Array.isArray(i)&&a.forEach((e=>{var t;const n=null===(t=i.find((t=>t.name===e.name)))||void 0===t?void 0:t.value;e.diff=n?e.value-n:0,e.valuePrev=n||0}))}))})(l,a),v(l),h(!1)}catch(Yp){h(!1),Yp instanceof Error&&p(`${Yp.name}: ${Yp.message}`)}};return(0,r.useEffect)((()=>{b({topN:o,match:n,date:l,focusLabel:a})}),[u,n,a,o,l]),(0,r.useEffect)((()=>{m&&(v(e.defaultTSDBStatus),h(!1))}),[m]),(0,r.useEffect)((()=>{const e=Je(u);y(!!e)}),[u]),e.tsdbStatusData=f,{isLoading:d,appConfigurator:e,error:m,isCluster:g}},_m={seriesCountByMetricName:e=>{let{query:t}=e;return bm("__name__",t)},seriesCountByLabelName:e=>{let{query:t}=e;return`{${t}!=""}`},seriesCountByFocusLabelValue:e=>{let{query:t,focusLabel:n}=e;return bm(n,t)},seriesCountByLabelValuePair:e=>{let{query:t}=e;const n=t.split("="),r=n[0],a=n.slice(1).join("=");return bm(r,a)},labelValueCountByLabelName:e=>{let{query:t,match:n}=e;return""===n?`{${t}!=""}`:`${n.replace("}","")}, ${t}!=""}`}},bm=(e,t)=>e?"{"+e+"="+JSON.stringify(t)+"}":"",wm=e=>{var t;let{totalSeries:n=0,totalSeriesPrev:r=0,totalSeriesAll:a=0,seriesCountByMetricName:i=[],isPrometheus:o}=e;const{isMobile:l}=ta(),[s]=je(),c=s.get("match"),u=s.get("focusLabel"),d=/__name__/.test(c||""),h=(null===(t=i[0])||void 0===t?void 0:t.value)/a*100,m=n-r,p=Math.abs(m)/r*100,f=[{title:"Total series",value:n.toLocaleString("en-US"),dynamic:n&&r&&!o?`${p.toFixed(2)}%`:"",display:!u,info:'The total number of unique time series for a selected day.\n             A time series is uniquely identified by its name plus a set of its labels. \n             For example, temperature{city="NY",country="US"} and temperature{city="SF",country="US"} \n             are two distinct series, since they differ by the "city" label.'},{title:"Percentage from total",value:isNaN(h)?"-":`${h.toFixed(2)}%`,display:d,info:"The share of these series in the total number of time series."}].filter((e=>e.display));return f.length?Nt("div",{className:Er()({"vm-cardinality-totals":!0,"vm-cardinality-totals_mobile":l}),children:f.map((e=>{let{title:t,value:n,info:a,dynamic:i}=e;return Nt("div",{className:"vm-cardinality-totals-card",children:[Nt("h4",{className:"vm-cardinality-totals-card__title",children:[t,a&&Nt(ba,{title:Nt("p",{className:"vm-cardinality-totals-card__tooltip",children:a}),children:Nt("div",{className:"vm-cardinality-totals-card__info-icon",children:Nt(In,{})})})]}),Nt("span",{className:"vm-cardinality-totals-card__value",children:n}),!!i&&Nt(ba,{title:`in relation to the previous day: ${r.toLocaleString("en-US")}`,children:Nt("span",{className:Er()({"vm-dynamic-number":!0,"vm-dynamic-number_positive vm-dynamic-number_down":m<0,"vm-dynamic-number_negative vm-dynamic-number_up":m>0}),children:i})})]},t)}))}):null},km=(e,t)=>{const[n]=je(),a=n.get(t)?n.get(t):e,[i,o]=(0,r.useState)(a);return(0,r.useEffect)((()=>{a!==i&&o(a)}),[a]),[i,o]},Sm=e=>{let{isPrometheus:t,isCluster:n,...a}=e;const{isMobile:i}=ta(),[o]=je(),{setSearchParamsFromKeys:l}=hi(),s=o.get("tips")||"",[c,u]=km("","match"),[d,h]=km("","focusLabel"),[m,p]=km(10,"topN"),f=(0,r.useMemo)((()=>m<0?"Number must be bigger than zero":""),[m]),v=()=>{l({match:c,topN:m,focusLabel:d})};return(0,r.useEffect)((()=>{const e=o.get("match"),t=+(o.get("topN")||10),n=o.get("focusLabel");e!==c&&u(e||""),t!==m&&p(t),n!==d&&h(n||"")}),[o]),Nt("div",{className:Er()({"vm-cardinality-configurator":!0,"vm-cardinality-configurator_mobile":i,"vm-block":!0,"vm-block_mobile":i}),children:[Nt("div",{className:"vm-cardinality-configurator-controls",children:[Nt("div",{className:"vm-cardinality-configurator-controls__query",children:Nt(Ka,{label:"Time series selector",type:"string",value:c,onChange:u,onEnter:v})}),Nt("div",{className:"vm-cardinality-configurator-controls__item",children:Nt(Ka,{label:"Focus label",type:"text",value:d||"",onChange:h,onEnter:v,endIcon:Nt(ba,{title:Nt("div",{children:Nt("p",{children:"To identify values with the highest number of series for the selected label."})}),children:Nt(sr,{})})})}),Nt("div",{className:"vm-cardinality-configurator-controls__item vm-cardinality-configurator-controls__item_limit",children:Nt(Ka,{label:"Limit entries",type:"number",value:t?10:m,error:f,disabled:t,helperText:t?"not available for Prometheus":"",onChange:e=>{const t=+e;p(isNaN(t)?0:t)},onEnter:v})})]}),Nt("div",{className:"vm-cardinality-configurator-bottom",children:[Nt(wm,{isPrometheus:t,isCluster:n,...a}),n&&Nt("div",{className:"vm-cardinality-configurator-bottom-helpful",children:Nt(Il,{href:"https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#cardinality-explorer-statistic-inaccuracy",withIcon:!0,children:[Nt(or,{}),"Statistic inaccuracy explanation"]})}),Nt("div",{className:"vm-cardinality-configurator-bottom-helpful",children:Nt(Il,{href:"https://docs.victoriametrics.com/#cardinality-explorer",withIcon:!0,children:[Nt(or,{}),"Documentation"]})}),Nt("div",{className:"vm-cardinality-configurator-bottom__execute",children:[Nt(ba,{title:s?"Hide tips":"Show tips",children:Nt(da,{variant:"text",color:s?"warning":"gray",startIcon:Nt(hr,{}),onClick:()=>{const e=o.get("tips")||"";l({tips:e?"":"true"})},ariaLabel:"visibility tips"})}),Nt(da,{variant:"text",startIcon:Nt(Pn,{}),onClick:()=>{l({match:"",focusLabel:""})},children:"Reset"}),Nt(da,{startIcon:Nt(qn,{}),onClick:v,children:"Execute Query"})]})]})]})};function xm(e){const{order:t,orderBy:n,onRequestSort:r,headerCells:a}=e;return Nt("thead",{className:"vm-table-header vm-cardinality-panel-table__header",children:Nt("tr",{className:"vm-table__row vm-table__row_header",children:a.map((e=>{return Nt("th",{className:Er()({"vm-table-cell vm-table-cell_header":!0,"vm-table-cell_sort":"action"!==e.id&&"percentage"!==e.id,"vm-table-cell_right":"action"===e.id}),onClick:(a=e.id,e=>{r(e,a)}),children:Nt("div",{className:"vm-table-cell__content",children:[e.info?Nt(ba,{title:e.info,children:[Nt("div",{className:"vm-metrics-content-header__tip-icon",children:Nt(In,{})}),e.label]}):Nt(Ct.FK,{children:e.label}),"action"!==e.id&&"percentage"!==e.id&&Nt("div",{className:Er()({"vm-table__sort-icon":!0,"vm-table__sort-icon_active":n===e.id,"vm-table__sort-icon_desc":"desc"===t&&n===e.id}),children:Nt(jn,{})})]})},e.id);var a}))})})}const Cm=["date","timestamp","time"];function Em(e,t,n){const r=e[n],a=t[n],o=Cm.includes(`${n}`)?i()(`${r}`).unix():r,l=Cm.includes(`${n}`)?i()(`${a}`).unix():a;return l<o?-1:l>o?1:0}function Nm(e,t){return"desc"===e?(e,n)=>Em(e,n,t):(e,n)=>-Em(e,n,t)}function Am(e,t){const n=e.map(((e,t)=>[e,t]));return n.sort(((e,n)=>{const r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((e=>e[0]))}const Mm=e=>{let{rows:t,headerCells:n,defaultSortColumn:a,tableCells:i}=e;const[o,l]=(0,r.useState)("desc"),[s,c]=(0,r.useState)(a),u=Am(t,Nm(o,s));return Nt("table",{className:"vm-table vm-cardinality-panel-table",children:[Nt(xm,{order:o,orderBy:s,onRequestSort:(e,t)=>{l(s===t&&"asc"===o?"desc":"asc"),c(t)},rowCount:t.length,headerCells:n}),Nt("tbody",{className:"vm-table-header",children:u.map((e=>Nt("tr",{className:"vm-table__row",children:i(e)},e.name)))})]})},Tm=e=>{let{row:t,totalSeries:n,totalSeriesPrev:r,onActionClick:a}=e;const i=n>0?t.value/n*100:-1,o=r>0?t.valuePrev/r*100:-1,l=[i,o].some((e=>-1===e)),s=i-o,c=l?"":`${s.toFixed(2)}%`,u=()=>{a(t.name)};return Nt(Ct.FK,{children:[Nt("td",{className:"vm-table-cell",children:Nt("span",{className:"vm-link vm-link_colored",onClick:u,children:t.name})},t.name),Nt("td",{className:"vm-table-cell",children:[t.value,!!t.diff&&Nt(ba,{title:`in relation to the previous day: ${t.valuePrev}`,children:Nt("span",{className:Er()({"vm-dynamic-number":!0,"vm-dynamic-number_positive":t.diff<0,"vm-dynamic-number_negative":t.diff>0}),children:["\xa0",t.diff>0?"+":"",t.diff]})})]},t.value),i>0&&Nt("td",{className:"vm-table-cell",children:Nt("div",{className:"vm-cardinality-panel-table__progress",children:[Nt(zl,{value:i}),c&&Nt(ba,{title:"in relation to the previous day",children:Nt("span",{className:Er()({"vm-dynamic-number":!0,"vm-dynamic-number_positive vm-dynamic-number_down":s<0,"vm-dynamic-number_negative vm-dynamic-number_up":s>0}),children:c})})]})},t.progressValue),Nt("td",{className:"vm-table-cell vm-table-cell_right",children:Nt("div",{className:"vm-table-cell__content",children:Nt(ba,{title:`Filter by ${t.name}`,children:Nt(da,{variant:"text",size:"small",onClick:u,children:Nt(Yn,{})})})})},"action")]})},$m=e=>{let{data:t}=e;const[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([0,0]);return(0,r.useEffect)((()=>{const e=t.sort(((e,t)=>t.value-e.value)),n=(e=>{const t=e.map((e=>e.value)),n=Math.ceil(t[0]||1),r=n/9;return new Array(11).fill(n+r).map(((e,t)=>Math.round(e-r*t)))})(e);o(n),a(e.map((e=>({...e,percentage:e.value/n[0]*100}))))}),[t]),Nt("div",{className:"vm-simple-bar-chart",children:[Nt("div",{className:"vm-simple-bar-chart-y-axis",children:i.map((e=>Nt("div",{className:"vm-simple-bar-chart-y-axis__tick",children:e},e)))}),Nt("div",{className:"vm-simple-bar-chart-data",children:n.map((e=>{let{name:t,value:n,percentage:r}=e;return Nt(ba,{title:`${t}: ${n}`,placement:"top-center",children:Nt("div",{className:"vm-simple-bar-chart-data-item",style:{maxHeight:`${r||0}%`}})},`${t}_${n}`)}))})]})},Lm=e=>{let{rows:t,tabs:n=[],chartContainer:a,totalSeries:i,totalSeriesPrev:o,onActionClick:l,sectionTitle:s,tip:c,tableHeaderCells:u,isPrometheus:d}=e;const{isMobile:h}=ta(),[m,p]=(0,r.useState)("table"),f=d&&!t.length,v=(0,r.useMemo)((()=>n.map(((e,t)=>({value:e,label:e,icon:Nt(0===t?Kn:Wn,{})})))),[n]);return Nt("div",{className:Er()({"vm-metrics-content":!0,"vm-metrics-content_mobile":h,"vm-block":!0,"vm-block_mobile":h}),children:[Nt("div",{className:"vm-metrics-content-header vm-section-header",children:[Nt("h5",{className:Er()({"vm-metrics-content-header__title":!0,"vm-section-header__title":!0,"vm-section-header__title_mobile":h}),children:[!h&&c&&Nt(ba,{title:Nt("p",{dangerouslySetInnerHTML:{__html:c},className:"vm-metrics-content-header__tip"}),children:Nt("div",{className:"vm-metrics-content-header__tip-icon",children:Nt(In,{})})}),s]}),Nt("div",{className:"vm-section-header__tabs",children:Nt($r,{activeItem:m,items:v,onChange:p})})]}),f&&Nt("div",{className:"vm-metrics-content-prom-data",children:[Nt("div",{className:"vm-metrics-content-prom-data__icon",children:Nt(In,{})}),Nt("h3",{className:"vm-metrics-content-prom-data__title",children:"Prometheus Data Limitation"}),Nt("p",{className:"vm-metrics-content-prom-data__text",children:["Due to missing data from your Prometheus source, some tables may appear empty.",Nt("br",{}),"This does not indicate an issue with your system or our tool."]})]}),!f&&"table"===m&&Nt("div",{ref:a,className:Er()({"vm-metrics-content__table":!0,"vm-metrics-content__table_mobile":h}),children:Nt(Mm,{rows:t,headerCells:u,defaultSortColumn:"value",tableCells:e=>Nt(Tm,{row:e,totalSeries:i,totalSeriesPrev:o,onActionClick:l})})}),!f&&"graph"===m&&Nt("div",{className:"vm-metrics-content__chart",children:Nt($m,{data:t.map((e=>{let{name:t,value:n}=e;return{name:t,value:n}}))})})]})},Pm=e=>{let{title:t,children:n}=e;return Nt("div",{className:"vm-cardinality-tip",children:[Nt("div",{className:"vm-cardinality-tip-header",children:[Nt("div",{className:"vm-cardinality-tip-header__tip-icon",children:Nt(hr,{})}),Nt("h4",{className:"vm-cardinality-tip-header__title",children:t||"Tips"})]}),Nt("p",{className:"vm-cardinality-tip__description",children:n})]})},Im=()=>Nt(Pm,{title:"Metrics with a high number of series",children:Nt("ul",{children:[Nt("li",{children:["Identify and eliminate labels with frequently changed values to reduce their\xa0",Nt(Il,{href:"https://docs.victoriametrics.com/FAQ.html#what-is-high-cardinality",children:"cardinality"}),"\xa0and\xa0",Nt(Il,{href:"https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate",children:"high churn rate"})]}),Nt("li",{children:["Find unused time series and\xa0",Nt(Il,{href:"https://docs.victoriametrics.com/relabeling.html",children:"drop entire metrics"})]}),Nt("li",{children:["Aggregate time series before they got ingested into the database via\xa0",Nt(Il,{href:"https://docs.victoriametrics.com/stream-aggregation.html",children:"streaming aggregation"})]})]})}),Om=()=>Nt(Pm,{title:"Labels with a high number of unique values",children:Nt("ul",{children:[Nt("li",{children:"Decrease the number of unique label values to reduce cardinality"}),Nt("li",{children:["Drop the label entirely via\xa0",Nt(Il,{href:"https://docs.victoriametrics.com/relabeling.html",children:"relabeling"})]}),Nt("li",{children:"For volatile label values (such as URL path, user session, etc.) consider printing them to the log file instead of adding to time series"})]})}),Rm=()=>Nt(Pm,{title:"Dashboard of a single metric",children:[Nt("p",{children:"This dashboard helps to understand the cardinality of a single metric."}),Nt("p",{children:"Each time series is a unique combination of key-value label pairs. Therefore a label key with many values can create a lot of time series for a particular metric. If you\u2019re trying to decrease the cardinality of a metric, start by looking at the labels with the highest number of values."}),Nt("p",{children:"Use the series selector at the top of the page to apply additional filters."})]}),Dm=()=>Nt(Pm,{title:"Dashboard of a label",children:[Nt("p",{children:"This dashboard helps you understand the count of time series per label."}),Nt("p",{children:"Use the selector at the top of the page to pick a label name you\u2019d like to inspect. For the selected label name, you\u2019ll see the label values that have the highest number of series associated with them. So if you\u2019ve chosen `instance` as your label name, you may see that `657` time series have value \u201chost-1\u201d attached to them and `580` time series have value `host-2` attached to them."}),Nt("p",{children:"This can be helpful in allowing you to determine where the bulk of your time series are coming from. If the label \u201cinstance=host-1\u201d was applied to 657 series and the label \u201cinstance=host-2\u201d was only applied to 580 series, you\u2019d know, for example, that host-01 was responsible for sending the majority of the time series."})]}),zm=()=>{const{isMobile:e}=ta(),[t]=je(),{setSearchParamsFromKeys:n}=hi(),r=t.get("tips")||"",a=t.get("match")||"",i=t.get("focusLabel")||"",{isLoading:o,appConfigurator:l,error:s,isCluster:c}=ym(),{tsdbStatusData:u,getDefaultState:d,tablesHeaders:h,sectionsTips:m}=l,p=d(a,i);return Nt("div",{className:Er()({"vm-cardinality-panel":!0,"vm-cardinality-panel_mobile":e}),children:[o&&Nt(kl,{message:"Please wait while cardinality stats is calculated. \n                        This may take some time if the db contains big number of time series."}),Nt(Sm,{isPrometheus:l.isPrometheusData,totalSeries:u.totalSeries,totalSeriesPrev:u.totalSeriesPrev,totalSeriesAll:u.totalSeriesByAll,totalLabelValuePairs:u.totalLabelValuePairs,seriesCountByMetricName:u.seriesCountByMetricName,isCluster:c}),r&&Nt("div",{className:"vm-cardinality-panel-tips",children:[!a&&!i&&Nt(Im,{}),a&&!i&&Nt(Rm,{}),!a&&!i&&Nt(Om,{}),i&&Nt(Dm,{})]}),s&&Nt(ra,{variant:"error",children:s}),l.keys(a,i).map((e=>{return Nt(Lm,{sectionTitle:l.sectionsTitles(i)[e],tip:m[e],rows:u[e],onActionClick:(t=e,e=>{const r={match:_m[t]({query:e,focusLabel:i,match:a})};"labelValueCountByLabelName"!==t&&"seriesCountByLabelName"!=t||(r.focusLabel=e),"seriesCountByFocusLabelValue"==t&&(r.focusLabel=""),n(r)}),tabs:p.tabs[e],chartContainer:p.containerRefs[e],totalSeriesPrev:l.totalSeries(e,!0),totalSeries:l.totalSeries(e),tableHeaderCells:h[e],isPrometheus:l.isPrometheusData},e);var t}))]})},Fm=e=>(["topByAvgDuration","topByCount","topBySumDuration"].forEach((t=>{const n=e[t];Array.isArray(n)&&n.forEach((e=>{const t=en(1e3*e.timeRangeSeconds);e.url=((e,t)=>{var n;const{query:r,timeRangeSeconds:a}=e,i=[`g0.expr=${encodeURIComponent(r)}`],o=null===(n=rn.find((e=>e.duration===t)))||void 0===n?void 0:n.id;return o&&i.push(`g0.relative_time=${o}`),a&&i.push(`g0.range_input=${t}`),`${We.home}?${i.join("&")}`})(e,t),e.timeRange=t}))})),e),jm=e=>{let{topN:t,maxLifetime:n}=e;const{serverUrl:a}=Mt(),{setSearchParamsFromKeys:i}=hi(),[o,l]=(0,r.useState)(null),[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(),h=(0,r.useMemo)((()=>((e,t,n)=>`${e}/api/v1/status/top_queries?topN=${t||""}&maxLifetime=${n||""}`)(a,t,n)),[a,t,n]);return{data:o,error:u,loading:s,fetch:async()=>{c(!0),i({topN:t,maxLifetime:n});try{const e=await fetch(h),t=await e.json();l(e.ok?Fm(t):null),d(String(t.error||""))}catch(Yp){Yp instanceof Error&&"AbortError"!==Yp.name&&d(`${Yp.name}: ${Yp.message}`)}c(!1)}}},Hm=e=>{let{rows:t,columns:n,defaultOrderBy:a}=e;const i=fl(),[o,l]=(0,r.useState)(a||"count"),[s,c]=(0,r.useState)("desc"),u=(0,r.useMemo)((()=>Am(t,Nm(s,o))),[t,o,s]),d=e=>()=>{var t;t=e,c((e=>"asc"===e&&o===t?"desc":"asc")),l(t)},h=e=>{let{query:t}=e;return async()=>{await i(t,"Query has been copied")}};return Nt("table",{className:"vm-table",children:[Nt("thead",{className:"vm-table-header",children:Nt("tr",{className:"vm-table__row vm-table__row_header",children:[n.map((e=>Nt("th",{className:"vm-table-cell vm-table-cell_header vm-table-cell_sort",onClick:d(e.sortBy||e.key),children:Nt("div",{className:"vm-table-cell__content",children:[e.title||e.key,Nt("div",{className:Er()({"vm-table__sort-icon":!0,"vm-table__sort-icon_active":o===e.key,"vm-table__sort-icon_desc":"desc"===s&&o===e.key}),children:Nt(jn,{})})]})},e.key))),Nt("th",{className:"vm-table-cell vm-table-cell_header"})," "]})}),Nt("tbody",{className:"vm-table-body",children:u.map(((e,t)=>Nt("tr",{className:"vm-table__row",children:[n.map((t=>Nt("td",{className:"vm-table-cell",children:e[t.key]||"-"},t.key))),Nt("td",{className:"vm-table-cell vm-table-cell_no-padding",children:Nt("div",{className:"vm-top-queries-panels__table-actions",children:[e.url&&Nt(ba,{title:"Execute query",children:Nt(Oe,{to:e.url,target:"_blank",rel:"noreferrer","aria-disabled":!0,children:Nt(da,{variant:"text",size:"small",startIcon:Nt(Yn,{}),ariaLabel:"execute query"})})}),Nt(ba,{title:"Copy query",children:Nt(da,{variant:"text",size:"small",startIcon:Nt(rr,{}),onClick:h(e),ariaLabel:"copy query"})})]})})]},t)))})]})},Um=["table","JSON"].map(((e,t)=>({value:String(t),label:e,icon:Nt(0===t?Kn:Qn,{})}))),Vm=e=>{let{rows:t,title:n,columns:a,defaultOrderBy:i}=e;const{isMobile:o}=ta(),[l,s]=(0,r.useState)(0);return Nt("div",{className:Er()({"vm-top-queries-panel":!0,"vm-block":!0,"vm-block_mobile":o}),children:[Nt("div",{className:Er()({"vm-top-queries-panel-header":!0,"vm-section-header":!0,"vm-top-queries-panel-header_mobile":o}),children:[Nt("h5",{className:Er()({"vm-section-header__title":!0,"vm-section-header__title_mobile":o}),children:n}),Nt("div",{className:"vm-section-header__tabs",children:Nt($r,{activeItem:String(l),items:Um,onChange:e=>{s(+e)}})})]}),Nt("div",{className:Er()({"vm-top-queries-panel__table":!0,"vm-top-queries-panel__table_mobile":o}),children:[0===l&&Nt(Hm,{rows:t,columns:a,defaultOrderBy:i}),1===l&&Nt(Kh,{data:t})]})]})},Bm=()=>{const{isMobile:e}=ta(),[t,n]=km(10,"topN"),[a,o]=km("10m","maxLifetime"),{data:l,error:s,loading:c,fetch:u}=jm({topN:t,maxLifetime:a}),d=(0,r.useMemo)((()=>{const e=a.trim().split(" ").reduce(((e,t)=>{const n=Kt(t);return n?{...e,...n}:{...e}}),{});return!!i().duration(e).asMilliseconds()}),[a]),h=(0,r.useMemo)((()=>!!t&&t<1),[t]),m=(0,r.useMemo)((()=>h?"Number must be bigger than zero":""),[h]),p=(0,r.useMemo)((()=>d?"":"Invalid duration value"),[d]),f=e=>{if(!l)return e;const t=l[e];return"number"===typeof t?qd(t,t,t):t||e},v=e=>{"Enter"===e.key&&u()};return(0,r.useEffect)((()=>{l&&(t||n(+l.topN),a||o(l.maxLifetime))}),[l]),(0,r.useEffect)((()=>(u(),window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u)})),[]),Nt("div",{className:Er()({"vm-top-queries":!0,"vm-top-queries_mobile":e}),children:[c&&Nt(kl,{containerStyles:{height:"500px"}}),Nt("div",{className:Er()({"vm-top-queries-controls":!0,"vm-block":!0,"vm-block_mobile":e}),children:[Nt("div",{className:"vm-top-queries-controls-fields",children:[Nt("div",{className:"vm-top-queries-controls-fields__item",children:Nt(Ka,{label:"Max lifetime",value:a,error:p,helperText:"For example 30ms, 15s, 3d4h, 1y2w",onChange:e=>{o(e)},onKeyDown:v})}),Nt("div",{className:"vm-top-queries-controls-fields__item",children:Nt(Ka,{label:"Number of returned queries",type:"number",value:t||"",error:m,onChange:e=>{n(+e)},onKeyDown:v})})]}),Nt("div",{className:Er()({"vm-top-queries-controls-bottom":!0,"vm-top-queries-controls-bottom_mobile":e}),children:[Nt("div",{className:"vm-top-queries-controls-bottom__info",children:["VictoriaMetrics tracks the last\xa0",Nt(ba,{title:"search.queryStats.lastQueriesCount",children:Nt("b",{children:f("search.queryStats.lastQueriesCount")})}),"\xa0queries with durations at least\xa0",Nt(ba,{title:"search.queryStats.minQueryDuration",children:Nt("b",{children:f("search.queryStats.minQueryDuration")})})]}),Nt("div",{className:"vm-top-queries-controls-bottom__button",children:Nt(da,{startIcon:Nt(qn,{}),onClick:u,children:"Execute"})})]})]}),s&&Nt(ra,{variant:"error",children:s}),l&&Nt(Ct.FK,{children:Nt("div",{className:"vm-top-queries-panels",children:[Nt(Vm,{rows:l.topBySumDuration,title:"Queries with most summary time to execute",columns:[{key:"query"},{key:"sumDurationSeconds",title:"sum duration, sec"},{key:"timeRange",sortBy:"timeRangeSeconds",title:"query time interval"},{key:"count"}],defaultOrderBy:"sumDurationSeconds"}),Nt(Vm,{rows:l.topByAvgDuration,title:"Most heavy queries",columns:[{key:"query"},{key:"avgDurationSeconds",title:"avg duration, sec"},{key:"timeRange",sortBy:"timeRangeSeconds",title:"query time interval"},{key:"count"}],defaultOrderBy:"avgDurationSeconds"}),Nt(Vm,{rows:l.topByCount,title:"Most frequently executed queries",columns:[{key:"query"},{key:"timeRange",sortBy:"timeRangeSeconds",title:"query time interval"},{key:"count"}]})]})})]})},qm={"color-primary":"#589DF6","color-secondary":"#316eca","color-error":"#e5534b","color-warning":"#c69026","color-info":"#539bf5","color-success":"#57ab5a","color-background-body":"#22272e","color-background-block":"#2d333b","color-background-tooltip":"rgba(22, 22, 22, 0.8)","color-text":"#cdd9e5","color-text-secondary":"#768390","color-text-disabled":"#636e7b","box-shadow":"rgba(0, 0, 0, 0.16) 1px 2px 6px","box-shadow-popper":"rgba(0, 0, 0, 0.2) 0px 2px 8px 0px","border-divider":"1px solid rgba(99, 110, 123, 0.5)","color-hover-black":"rgba(0, 0, 0, 0.12)","color-log-hits-bar-0":"rgba(255, 255, 255, 0.18)","color-log-hits-bar-1":"#FFB74D","color-log-hits-bar-2":"#81C784","color-log-hits-bar-3":"#64B5F6","color-log-hits-bar-4":"#E57373","color-log-hits-bar-5":"#8a62f0"},Ym={"color-primary":"#3F51B5","color-secondary":"#E91E63","color-error":"#FD080E","color-warning":"#FF8308","color-info":"#03A9F4","color-success":"#4CAF50","color-background-body":"#FEFEFF","color-background-block":"#FFFFFF","color-background-tooltip":"rgba(80,80,80,0.9)","color-text":"#110f0f","color-text-secondary":"#706F6F","color-text-disabled":"#A09F9F","box-shadow":"rgba(0, 0, 0, 0.08) 1px 2px 6px","box-shadow-popper":"rgba(0, 0, 0, 0.1) 0px 2px 8px 0px","border-divider":"1px solid rgba(0, 0, 0, 0.15)","color-hover-black":"rgba(0, 0, 0, 0.06)","color-log-hits-bar-0":"rgba(0, 0, 0, 0.18)","color-log-hits-bar-1":"#FFB74D","color-log-hits-bar-2":"#81C784","color-log-hits-bar-3":"#64B5F6","color-log-hits-bar-4":"#E57373","color-log-hits-bar-5":"#8a62f0"},Wm=()=>{const[e,t]=(0,r.useState)(_t()),n=e=>{t(e.matches)};return(0,r.useEffect)((()=>{const e=window.matchMedia("(prefers-color-scheme: dark)");return e.addEventListener("change",n),()=>e.removeEventListener("change",n)}),[]),e},Km=["primary","secondary","error","warning","info","success"],Qm=e=>{let{onLoaded:t}=e;const n=Qe(),{palette:a={}}=Ke(),{theme:i}=Mt(),o=Wm(),l=Tt(),s=Tr(),[c,u]=(0,r.useState)({[ft.dark]:qm,[ft.light]:Ym,[ft.system]:_t()?qm:Ym}),d=()=>{const{innerWidth:e,innerHeight:t}=window,{clientWidth:n,clientHeight:r}=document.documentElement;yt("scrollbar-width",e-n+"px"),yt("scrollbar-height",t-r+"px"),yt("vh",.01*t+"px")},h=()=>{Km.forEach(((e,n)=>{const r=(e=>{let t=e.replace("#","").trim();if(3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),6!==t.length)throw new Error("Invalid HEX color.");return(299*parseInt(t.slice(0,2),16)+587*parseInt(t.slice(2,4),16)+114*parseInt(t.slice(4,6),16))/1e3>=128?"#000000":"#FFFFFF"})(gt(`color-${e}`));yt(`${e}-text`,r),n===Km.length-1&&(l({type:"SET_DARK_THEME"}),t(!0))}))},m=()=>{const e=et("THEME")||ft.system,t=c[e];Object.entries(t).forEach((e=>{let[t,n]=e;yt(t,n)})),h(),n&&(Km.forEach((e=>{const t=a[e];t&&yt(`color-${e}`,t)})),h())};return(0,r.useEffect)((()=>{d(),m()}),[c]),(0,r.useEffect)(d,[s]),(0,r.useEffect)((()=>{const e=_t()?qm:Ym;c[ft.system]!==e?u((t=>({...t,[ft.system]:e}))):m()}),[i,o]),(0,r.useEffect)((()=>{n&&l({type:"SET_THEME",payload:ft.light})}),[]),null},Zm=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!1),i=(0,r.useRef)(document.body),o=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?a(!0):"dragleave"===e.type&&a(!1)};return Mr("dragenter",o,i),Mr("dragleave",o,i),Mr("dragover",o,i),Mr("drop",(e=>{var n;e.preventDefault(),e.stopPropagation(),a(!1),null!==e&&void 0!==e&&null!==(n=e.dataTransfer)&&void 0!==n&&n.files&&e.dataTransfer.files[0]&&(e=>{const n=Array.from(e||[]);t(n)})(e.dataTransfer.files)}),i),Mr("paste",(e=>{var n;const r=null===(n=e.clipboardData)||void 0===n?void 0:n.items;if(!r)return;const a=Array.from(r).filter((e=>"application/json"===e.type)).map((e=>e.getAsFile())).filter((e=>null!==e));t(a)}),i),{files:e,dragging:n}},Gm=e=>{let{onOpenModal:t,onChange:n}=e;return Nt("div",{className:"vm-upload-json-buttons",children:[Nt(da,{variant:"outlined",onClick:t,children:"Paste JSON"}),Nt(da,{children:["Upload Files",Nt("input",{id:"json",type:"file",accept:"application/json",multiple:!0,title:" ",onChange:n})]})]})},Jm=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),i=(0,r.useMemo)((()=>!!e.length),[e]),{value:o,setTrue:l,setFalse:s}=ma(!1),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a((n=>[{filename:t,text:`: ${e.message}`},...n]))},u=(e,n)=>{try{const r=JSON.parse(e),a=r.trace||r;if(!a.duration_msec)return void c(new Error(pt.traceNotFound),n);const i=new El(a,n);t((e=>[i,...e]))}catch(Yp){Yp instanceof Error&&c(Yp,n)}},d=e=>{e.map((e=>{const t=new FileReader,n=(null===e||void 0===e?void 0:e.name)||"";t.onload=e=>{var t;const r=String(null===(t=e.target)||void 0===t?void 0:t.result);u(r,n)},t.readAsText(e)}))},h=e=>{a([]);const t=Array.from(e.target.files||[]);d(t),e.target.value=""},m=e=>()=>{(e=>{a((t=>t.filter(((t,n)=>n!==e))))})(e)},{files:p,dragging:f}=Zm();return(0,r.useEffect)((()=>{d(p)}),[p]),Nt("div",{className:"vm-trace-page",children:[Nt("div",{className:"vm-trace-page-header",children:[Nt("div",{className:"vm-trace-page-header-errors",children:n.map(((e,t)=>Nt("div",{className:"vm-trace-page-header-errors-item",children:[Nt(ra,{variant:"error",children:[Nt("b",{className:"vm-trace-page-header-errors-item__filename",children:e.filename}),Nt("span",{children:e.text})]}),Nt(da,{className:"vm-trace-page-header-errors-item__close",startIcon:Nt(Ln,{}),variant:"text",color:"error",onClick:m(t)})]},`${e}_${t}`)))}),Nt("div",{children:i&&Nt(Gm,{onOpenModal:l,onChange:h})})]}),i&&Nt("div",{children:Nt(Ul,{jsonEditor:!0,traces:e,onDeleteClick:n=>{const r=e.filter((e=>e.idValue!==n.idValue));t([...r])}})}),!i&&Nt("div",{className:"vm-trace-page-preview",children:[Nt("p",{className:"vm-trace-page-preview__text",children:["Please, upload file with JSON response content.","\n","The file must contain tracing information in JSON format.","\n","In order to use tracing please refer to the doc:\xa0",Nt("a",{className:"vm-link vm-link_colored",href:"https://docs.victoriametrics.com/#query-tracing",target:"_blank",rel:"help noreferrer",children:"https://docs.victoriametrics.com/#query-tracing"}),"\n","Tracing graph will be displayed after file upload.","\n","Attach files by dragging & dropping, selecting or pasting them."]}),Nt(Gm,{onOpenModal:l,onChange:h})]}),o&&Nt(_a,{title:"Paste JSON",onClose:s,children:Nt(Hl,{editable:!0,displayTitle:!0,defaultTile:`JSON ${e.length+1}`,onClose:s,onUpload:u})}),f&&Nt("div",{className:"vm-trace-page__dropzone"})]})},Xm=e=>{const{serverUrl:t}=Mt(),{period:n}=fn(),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(),u=(0,r.useMemo)((()=>((e,t,n)=>{const r=`{job=${JSON.stringify(n)}}`;return`${e}/api/v1/label/instance/values?match[]=${encodeURIComponent(r)}&start=${t.start}&end=${t.end}`})(t,n,e)),[t,n,e]);return(0,r.useEffect)((()=>{if(!e)return;(async()=>{l(!0);try{const e=await fetch(u),t=await e.json(),n=t.data||[];i(n.sort(((e,t)=>e.localeCompare(t)))),e.ok?c(void 0):c(`${t.errorType}\r\n${null===t||void 0===t?void 0:t.error}`)}catch(Yp){Yp instanceof Error&&c(`${Yp.name}: ${Yp.message}`)}l(!1)})().catch(console.error)}),[u]),{instances:a,isLoading:o,error:s}},ep=(e,t)=>{const{serverUrl:n}=Mt(),{period:a}=fn(),[i,o]=(0,r.useState)([]),[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(),d=(0,r.useMemo)((()=>((e,t,n,r)=>{const a=Object.entries({job:n,instance:r}).filter((e=>e[1])).map((e=>{let[t,n]=e;return`${t}=${JSON.stringify(n)}`})).join(",");return`${e}/api/v1/label/__name__/values?match[]=${encodeURIComponent(`{${a}}`)}&start=${t.start}&end=${t.end}`})(n,a,e,t)),[n,a,e,t]);return(0,r.useEffect)((()=>{if(!e)return;(async()=>{s(!0);try{const e=await fetch(d),t=await e.json(),n=t.data||[];o(n.sort(((e,t)=>e.localeCompare(t)))),e.ok?u(void 0):u(`${t.errorType}\r\n${null===t||void 0===t?void 0:t.error}`)}catch(Yp){Yp instanceof Error&&u(`${Yp.name}: ${Yp.message}`)}s(!1)})().catch(console.error)}),[d]),{names:i,isLoading:l,error:c}},tp=e=>{let{name:t,job:n,instance:a,rateEnabled:i,isBucket:o,height:l}=e;const{isMobile:s}=ta(),{customStep:c,yaxis:u}=Br(),{period:d}=fn(),h=qr(),m=vn(),p=Zt(d.end-d.start),f=Qt(c),v=en(10*f*1e3),[g,y]=(0,r.useState)(!1),[_,b]=(0,r.useState)(!1),w=g&&c===p?v:c,k=(0,r.useMemo)((()=>{const e=Object.entries({job:n,instance:a}).filter((e=>e[1])).map((e=>{let[t,n]=e;return`${t}=${JSON.stringify(n)}`}));e.push(`__name__=${JSON.stringify(t)}`),"node_cpu_seconds_total"==t&&e.push('mode!="idle"');const r=`{${e.join(",")}}`;if(o)return`sum(rate(${r})) by (vmrange, le)`;return`\nwith (q = ${i?`rollup_rate(${r})`:`rollup(${r})`}) (\n  alias(min(label_match(q, "rollup", "min")), "min"),\n  alias(max(label_match(q, "rollup", "max")), "max"),\n  alias(avg(label_match(q, "rollup", "avg")), "avg"),\n)`}),[t,n,a,i,o]),{isLoading:S,graphData:x,error:C,queryErrors:E,warning:N,isHistogram:A}=$l({predefinedQuery:[k],visible:!0,customStep:w,showAllSeries:_});return(0,r.useEffect)((()=>{y(A)}),[A]),Nt("div",{className:Er()({"vm-explore-metrics-graph":!0,"vm-explore-metrics-graph_mobile":s}),children:[S&&Nt(kl,{}),C&&Nt(ra,{variant:"error",children:C}),E[0]&&Nt(ra,{variant:"error",children:E[0]}),N&&Nt(Bl,{warning:N,query:[k],onChange:b}),x&&d&&Nt(Uh,{data:x,period:d,customStep:w,query:[k],yaxis:u,setYaxisLimits:e=>{h({type:"SET_YAXIS_LIMITS",payload:e})},setPeriod:e=>{let{from:t,to:n}=e;m({type:"SET_PERIOD",payload:{from:t,to:n}})},showLegend:!1,height:l,isHistogram:A})]})},np=e=>{let{name:t,index:n,length:r,isBucket:a,rateEnabled:i,onChangeRate:o,onRemoveItem:l,onChangeOrder:s}=e;const{isMobile:c}=ta(),{value:u,setTrue:d,setFalse:h}=ma(!1),m=()=>{l(t)},p=()=>{s(t,n,n+1)},f=()=>{s(t,n,n-1)};return Nt("div",c?{className:"vm-explore-metrics-item-header vm-explore-metrics-item-header_mobile",children:[Nt("div",{className:"vm-explore-metrics-item-header__name",children:t}),Nt(da,{variant:"text",size:"small",startIcon:Nt(ur,{}),onClick:d,ariaLabel:"open panel settings"}),u&&Nt(_a,{title:t,onClose:h,children:Nt("div",{className:"vm-explore-metrics-item-header-modal",children:[Nt("div",{className:"vm-explore-metrics-item-header-modal-order",children:[Nt(da,{startIcon:Nt(Jn,{}),variant:"outlined",onClick:f,disabled:0===n,ariaLabel:"move graph up"}),Nt("p",{children:["position:",Nt("span",{className:"vm-explore-metrics-item-header-modal-order__index",children:["#",n+1]})]}),Nt(da,{endIcon:Nt(Gn,{}),variant:"outlined",onClick:p,disabled:n===r-1,ariaLabel:"move graph down"})]}),!a&&Nt("div",{className:"vm-explore-metrics-item-header-modal__rate",children:[Nt(Ti,{label:Nt("span",{children:["enable ",Nt("code",{children:"rate()"})]}),value:i,onChange:o,fullWidth:!0}),Nt("p",{children:"calculates the average per-second speed of metrics change"})]}),Nt(da,{startIcon:Nt(Ln,{}),color:"error",variant:"outlined",onClick:m,fullWidth:!0,children:"Remove graph"})]})})]}:{className:"vm-explore-metrics-item-header",children:[Nt("div",{className:"vm-explore-metrics-item-header-order",children:[Nt(ba,{title:"move graph up",children:Nt(da,{className:"vm-explore-metrics-item-header-order__up",startIcon:Nt(Fn,{}),variant:"text",color:"gray",size:"small",onClick:f,ariaLabel:"move graph up"})}),Nt("div",{className:"vm-explore-metrics-item-header__index",children:["#",n+1]}),Nt(ba,{title:"move graph down",children:Nt(da,{className:"vm-explore-metrics-item-header-order__down",startIcon:Nt(Fn,{}),variant:"text",color:"gray",size:"small",onClick:p,ariaLabel:"move graph down"})})]}),Nt("div",{className:"vm-explore-metrics-item-header__name",children:t}),!a&&Nt("div",{className:"vm-explore-metrics-item-header__rate",children:Nt(ba,{title:"calculates the average per-second speed of metric's change",children:Nt(Ti,{label:Nt("span",{children:["enable ",Nt("code",{children:"rate()"})]}),value:i,onChange:o})})}),Nt("div",{className:"vm-explore-metrics-item-header__close",children:Nt(ba,{title:"close graph",children:Nt(da,{startIcon:Nt(Ln,{}),variant:"text",color:"gray",size:"small",onClick:m,ariaLabel:"close graph"})})})]})},rp=e=>{let{name:t,job:n,instance:a,index:i,length:o,size:l,onRemoveItem:s,onChangeOrder:c}=e;const u=(0,r.useMemo)((()=>/_sum?|_total?|_count?/.test(t)),[t]),d=(0,r.useMemo)((()=>/_bucket?/.test(t)),[t]),[h,m]=(0,r.useState)(u),p=Tr(),f=(0,r.useMemo)(l.height,[l,p]);return(0,r.useEffect)((()=>{m(u)}),[n]),Nt("div",{className:"vm-explore-metrics-item vm-block vm-block_empty-padding",children:[Nt(np,{name:t,index:i,length:o,isBucket:d,rateEnabled:h,size:l.id,onChangeRate:m,onRemoveItem:s,onChangeOrder:c}),Nt(tp,{name:t,job:n,instance:a,rateEnabled:h,isBucket:d,height:f},`${t}_${n}_${a}_${h}`)]})},ap=e=>{let{values:t,onRemoveItem:n}=e;const{isMobile:r}=ta();return r?Nt("span",{className:"vm-select-input-content__counter",children:["selected ",t.length]}):Nt(Ct.FK,{children:t.map((e=>{return Nt("div",{className:"vm-select-input-content__selected",children:[Nt("span",{children:e}),Nt("div",{onClick:(t=e,e=>{n(t),e.stopPropagation()}),children:Nt(Ln,{})})]},e);var t}))})},ip=e=>{let{value:t,list:n,label:a,placeholder:i,noOptionsText:o,clearable:l=!1,searchable:s=!1,autofocus:c,disabled:u,onChange:d}=e;const{isDarkTheme:h}=Mt(),{isMobile:m}=ta(),[p,f]=(0,r.useState)(""),v=(0,r.useRef)(null),[g,y]=(0,r.useState)(null),[_,b]=(0,r.useState)(!1),w=(0,r.useRef)(null),k=Array.isArray(t),S=Array.isArray(t)?t:void 0,x=m&&k&&!(null===S||void 0===S||!S.length),C=(0,r.useMemo)((()=>_?p:Array.isArray(t)?"":t),[t,p,_,k]),E=(0,r.useMemo)((()=>_?p||"(.+)":""),[p,_]),N=()=>{w.current&&w.current.blur()},A=()=>{b(!1),N()},M=e=>{f(""),d(e),k||A(),k&&w.current&&w.current.focus()};return(0,r.useEffect)((()=>{f(""),_&&w.current&&w.current.focus(),_||N()}),[_,w]),(0,r.useEffect)((()=>{c&&w.current&&!m&&w.current.focus()}),[c,w]),Mr("keyup",(e=>{w.current!==e.target&&b(!1)})),ua(v,A,g),Nt("div",{className:Er()({"vm-select":!0,"vm-select_dark":h,"vm-select_disabled":u}),children:[Nt("div",{className:"vm-select-input",onClick:e=>{e.target instanceof HTMLInputElement||u||b((e=>!e))},ref:v,children:[Nt("div",{className:"vm-select-input-content",children:[!(null===S||void 0===S||!S.length)&&Nt(ap,{values:S,onRemoveItem:M}),!x&&Nt("input",{value:C,type:"text",placeholder:i,onInput:e=>{f(e.target.value)},onFocus:()=>{u||b(!0)},onBlur:()=>{n.includes(p)&&d(p)},ref:w,readOnly:m||!s})]}),a&&Nt("span",{className:"vm-text-field__label",children:a}),l&&t&&Nt("div",{className:"vm-select-input__icon",onClick:(e=>t=>{M(e),t.stopPropagation()})(""),children:Nt(Ln,{})}),Nt("div",{className:Er()({"vm-select-input__icon":!0,"vm-select-input__icon_open":_}),children:Nt(jn,{})})]}),Nt(Vi,{label:a,value:E,options:n.map((e=>({value:e}))),anchor:v,selected:S,minLength:1,fullWidth:!0,noOptionsText:o,onSelect:M,onOpenAutocomplete:b,onChangeWrapperRef:y})]})},op=st.map((e=>e.id)),lp=e=>{let{jobs:t,instances:n,names:a,job:i,instance:o,size:l,selectedMetrics:s,onChangeJob:c,onChangeInstance:u,onToggleMetric:d,onChangeSize:h}=e;const m=(0,r.useMemo)((()=>i?"":"No instances. Please select job"),[i]),p=(0,r.useMemo)((()=>i?"":"No metric names. Please select job"),[i]),{isMobile:f}=ta(),{value:v,toggle:g,setFalse:y}=ma("false"!==et("EXPLORE_METRICS_TIPS"));return(0,r.useEffect)((()=>{Xe("EXPLORE_METRICS_TIPS",`${v}`)}),[v]),Nt(Ct.FK,{children:[Nt("div",{className:Er()({"vm-explore-metrics-header":!0,"vm-explore-metrics-header_mobile":f,"vm-block":!0,"vm-block_mobile":f}),children:[Nt("div",{className:"vm-explore-metrics-header__job",children:Nt(ip,{value:i,list:t,label:"Job",placeholder:"Please select job",onChange:c,autofocus:!i&&!!t.length&&!f,searchable:!0})}),Nt("div",{className:"vm-explore-metrics-header__instance",children:Nt(ip,{value:o,list:n,label:"Instance",placeholder:"Please select instance",onChange:u,noOptionsText:m,clearable:!0,searchable:!0})}),Nt("div",{className:"vm-explore-metrics-header__size",children:[Nt(ip,{label:"Size graphs",value:l,list:op,onChange:h}),Nt(ba,{title:(v?"Hide":"Show")+" tip",children:Nt(da,{variant:"text",color:v?"warning":"gray",startIcon:Nt(hr,{}),onClick:g,ariaLabel:"visibility tips"})})]}),Nt("div",{className:"vm-explore-metrics-header-metrics",children:Nt(ip,{label:"Metrics",value:s,list:a,placeholder:"Search metric name",onChange:d,noOptionsText:p,clearable:!0,searchable:!0})})]}),v&&Nt(ra,{variant:"warning",children:Nt("div",{className:"vm-explore-metrics-header-description",children:[Nt("p",{children:["Please note: this page is solely designed for exploring Prometheus metrics. Prometheus metrics always contain ",Nt("code",{children:"job"})," and ",Nt("code",{children:"instance"})," labels (see ",Nt("a",{className:"vm-link vm-link_colored",href:"https://prometheus.io/docs/concepts/jobs_instances/",children:"these docs"}),"), and this page relies on them as filters. ",Nt("br",{}),"Please use this page for Prometheus metrics only, in accordance with their naming conventions."]}),Nt(da,{variant:"text",size:"small",startIcon:Nt(Ln,{}),onClick:y,ariaLabel:"close tips"})]})})]})},sp=ut("job",""),cp=ut("instance",""),up=ut("metrics",""),dp=ut("size",""),hp=st.find((e=>dp?e.id===dp:e.isDefault))||st[0],mp=()=>{const[e,t]=(0,r.useState)(sp),[n,a]=(0,r.useState)(cp),[i,o]=(0,r.useState)(up?up.split("&"):[]),[l,s]=(0,r.useState)(hp);(e=>{let{job:t,instance:n,metrics:a,size:i}=e;const{duration:o,relativeTime:l,period:{date:s}}=fn(),{customStep:c}=Br(),{setSearchParamsFromKeys:u}=hi(),d=()=>{const e=cm({"g0.range_input":o,"g0.end_input":s,"g0.step_input":c,"g0.relative_time":l,size:i,job:t,instance:n,metrics:a});u(e)};(0,r.useEffect)(d,[o,l,s,c,t,n,a,i]),(0,r.useEffect)(d,[])})({job:e,instance:n,metrics:i.join("&"),size:l.id});const{jobs:c,isLoading:u,error:d}=(()=>{const{serverUrl:e}=Mt(),{period:t}=fn(),[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[l,s]=(0,r.useState)(),c=(0,r.useMemo)((()=>((e,t)=>`${e}/api/v1/label/job/values?start=${t.start}&end=${t.end}`)(e,t)),[e,t]);return(0,r.useEffect)((()=>{(async()=>{o(!0);try{const e=await fetch(c),t=await e.json(),n=t.data||[];a(n.sort(((e,t)=>e.localeCompare(t)))),e.ok?s(void 0):s(`${t.errorType}\r\n${null===t||void 0===t?void 0:t.error}`)}catch(Yp){Yp instanceof Error&&s(`${Yp.name}: ${Yp.message}`)}o(!1)})().catch(console.error)}),[c]),{jobs:n,isLoading:i,error:l}})(),{instances:h,isLoading:m,error:p}=Xm(e),{names:f,isLoading:v,error:g}=ep(e,n),y=(0,r.useMemo)((()=>u||m||v),[u,m,v]),_=(0,r.useMemo)((()=>d||p||g),[d,p,g]),b=e=>{o(e?t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]:[])},w=(e,t,n)=>{const r=n>i.length-1;n<0||r||o((e=>{const r=[...e],[a]=r.splice(t,1);return r.splice(n,0,a),r}))};return(0,r.useEffect)((()=>{n&&h.length&&!h.includes(n)&&a("")}),[h,n]),Nt("div",{className:"vm-explore-metrics",children:[Nt(lp,{jobs:c,instances:h,names:f,job:e,size:l.id,instance:n,selectedMetrics:i,onChangeJob:t,onChangeSize:e=>{const t=st.find((t=>t.id===e));t&&s(t)},onChangeInstance:a,onToggleMetric:b}),y&&Nt(kl,{}),_&&Nt(ra,{variant:"error",children:_}),!e&&Nt(ra,{variant:"info",children:"Please select job to see list of metric names."}),e&&!i.length&&Nt(ra,{variant:"info",children:"Please select metric names to see the graphs."}),Nt("div",{className:"vm-explore-metrics-body",children:i.map(((t,r)=>Nt(rp,{name:t,job:e,instance:n,index:r,length:i.length,size:l,onRemoveItem:b,onChangeOrder:w},t)))})]})},pp=()=>{const t=fl();return Nt("div",{className:"vm-preview-icons",children:Object.entries(e).map((e=>{let[n,r]=e;return Nt("div",{className:"vm-preview-icons-item",onClick:(a=n,async()=>{await t(`<${a}/>`,`<${a}/> has been copied`)}),children:[Nt("div",{className:"vm-preview-icons-item__svg",children:r()}),Nt("div",{className:"vm-preview-icons-item__name",children:`<${n}/>`})]},n);var a}))})};var fp=function(e){return e.copy="Copy",e.copied="Copied",e}(fp||{});const vp=e=>{let{code:t}=e;const[n,a]=(0,r.useState)(fp.copy);return(0,r.useEffect)((()=>{let e=null;return n===fp.copied&&(e=setTimeout((()=>a(fp.copy)),1e3)),()=>{e&&clearTimeout(e)}}),[n]),Nt("code",{className:"vm-code-example",children:[t,Nt("div",{className:"vm-code-example__copy",children:Nt(ba,{title:n,children:Nt(da,{size:"small",variant:"text",onClick:()=>{navigator.clipboard.writeText(t),a(fp.copied)},startIcon:Nt(rr,{}),ariaLabel:"close"})})})]})},gp=()=>Nt("a",{className:"vm-link vm-link_colored",href:"https://docs.victoriametrics.com/MetricsQL.html",target:"_blank",rel:"help noreferrer",children:"MetricsQL"}),yp=()=>Nt("a",{className:"vm-link vm-link_colored",href:"https://grafana.com/grafana/dashboards/1860-node-exporter-full/",target:"_blank",rel:"help noreferrer",children:"Node Exporter Full"}),_p=()=>Nt("section",{className:"vm-with-template-tutorial",children:[Nt("h2",{className:"vm-with-template-tutorial__title",children:["Tutorial for WITH expressions in ",Nt(gp,{})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:["Let's look at the following real query from ",Nt(yp,{})," dashboard:"]}),Nt(vp,{code:'(\n  (\n    node_memory_MemTotal_bytes{instance=~"$node:$port", job=~"$job"}\n      -\n    node_memory_MemFree_bytes{instance=~"$node:$port", job=~"$job"}\n  )\n    /\n  node_memory_MemTotal_bytes{instance=~"$node:$port", job=~"$job"}\n) * 100'}),Nt("p",{className:"vm-with-template-tutorial-section__text",children:"It is clear the query calculates the percentage of used memory for the given $node, $port and $job. Isn't it? :)"})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:"What's wrong with this query? Copy-pasted label filters for distinct timeseries which makes it easy to mistype these filters during modification. Let's simplify the query with WITH expressions:"}),Nt(vp,{code:'WITH (\n    commonFilters = {instance=~"$node:$port",job=~"$job"}\n)\n(\n  node_memory_MemTotal_bytes{commonFilters}\n    -\n  node_memory_MemFree_bytes{commonFilters}\n)\n  /\nnode_memory_MemTotal_bytes{commonFilters} * 100'})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:["Now label filters are located in a single place instead of three distinct places. The query mentions node_memory_MemTotal_bytes metric twice and ","{commonFilters}"," three times. WITH expressions may improve this:"]}),Nt(vp,{code:'WITH (\n    my_resource_utilization(free, limit, filters) = (limit{filters} - free{filters}) / limit{filters} * 100\n)\nmy_resource_utilization(\n  node_memory_MemFree_bytes,\n  node_memory_MemTotal_bytes,\n  {instance=~"$node:$port",job=~"$job"},\n)'}),Nt("p",{className:"vm-with-template-tutorial-section__text",children:"Now the template function my_resource_utilization() may be used for monitoring arbitrary resources - memory, CPU, network, storage, you name it."})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:["Let's take another nice query from ",Nt(yp,{})," dashboard:"]}),Nt(vp,{code:'(\n  (\n    (\n      count(\n        count(node_cpu_seconds_total{instance=~"$node:$port",job=~"$job"}) by (cpu)\n      )\n    )\n      -\n    avg(\n      sum by (mode) (rate(node_cpu_seconds_total{mode=\'idle\',instance=~"$node:$port",job=~"$job"}[5m]))\n    )\n  )\n    *\n  100\n)\n  /\ncount(\n  count(node_cpu_seconds_total{instance=~"$node:$port",job=~"$job"}) by (cpu)\n)'}),Nt("p",{className:"vm-with-template-tutorial-section__text",children:"Do you understand what does this mess do? Is it manageable? :) WITH expressions are happy to help in a few iterations."})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:"1. Extract common filters used in multiple places into a commonFilters variable:"}),Nt(vp,{code:'WITH (\n    commonFilters = {instance=~"$node:$port",job=~"$job"}\n)\n(\n  (\n    (\n      count(\n        count(node_cpu_seconds_total{commonFilters}) by (cpu)\n      )\n    )\n      -\n    avg(\n      sum by (mode) (rate(node_cpu_seconds_total{mode=\'idle\',commonFilters}[5m]))\n    )\n  )\n    *\n  100\n)\n  /\ncount(\n  count(node_cpu_seconds_total{commonFilters}) by (cpu)\n)'})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:'2. Extract "count(count(...) by (cpu))" into cpuCount variable:'}),Nt(vp,{code:'WITH (\n    commonFilters = {instance=~"$node:$port",job=~"$job"},\n    cpuCount = count(count(node_cpu_seconds_total{commonFilters}) by (cpu))\n)\n(\n  (\n    cpuCount\n      -\n    avg(\n      sum by (mode) (rate(node_cpu_seconds_total{mode=\'idle\',commonFilters}[5m]))\n    )\n  )\n    *\n  100\n) / cpuCount'})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:"3. Extract rate(...) part into cpuIdle variable, since it is clear now that this part calculates the number of idle CPUs:"}),Nt(vp,{code:'WITH (\n    commonFilters = {instance=~"$node:$port",job=~"$job"},\n    cpuCount = count(count(node_cpu_seconds_total{commonFilters}) by (cpu)),\n    cpuIdle = sum(rate(node_cpu_seconds_total{mode=\'idle\',commonFilters}[5m]))\n)\n((cpuCount - cpuIdle) * 100) / cpuCount'})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:["4. Put node_cpu_seconds_total","{commonFilters}"," into its own varialbe with the name cpuSeconds:"]}),Nt(vp,{code:'WITH (\n    cpuSeconds = node_cpu_seconds_total{instance=~"$node:$port",job=~"$job"},\n    cpuCount = count(count(cpuSeconds) by (cpu)),\n    cpuIdle = sum(rate(cpuSeconds{mode=\'idle\'}[5m]))\n)\n((cpuCount - cpuIdle) * 100) / cpuCount'}),Nt("p",{className:"vm-with-template-tutorial-section__text",children:"Now the query became more clear comparing to the initial query."})]}),Nt("div",{className:"vm-with-template-tutorial-section",children:[Nt("p",{className:"vm-with-template-tutorial-section__text",children:"WITH expressions may be nested and may be put anywhere. Try expanding the following query:"}),Nt(vp,{code:"WITH (\n    f(a, b) = WITH (\n        f1(x) = b-x,\n        f2(x) = x+x\n    ) f1(a)*f2(b)\n) f(foo, with(x=bar) x)"})]})]}),bp=()=>{const{serverUrl:e}=Mt(),[t,n]=je(),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)();return{data:a,error:s,loading:o,expand:async r=>{t.set("expr",r),n(t);const a=((e,t)=>`${e}/expand-with-exprs?query=${encodeURIComponent(t)}&format=json`)(e,r);l(!0);try{const e=await fetch(a),t=await e.json();i((null===t||void 0===t?void 0:t.expr)||""),c(String(t.error||""))}catch(Yp){Yp instanceof Error&&"AbortError"!==Yp.name&&c(`${Yp.name}: ${Yp.message}`)}l(!1)}}},wp=()=>{const[e]=je(),{data:t,loading:n,error:a,expand:i}=bp(),[o,l]=(0,r.useState)(e.get("expr")||""),s=()=>{i(o)};return(0,r.useEffect)((()=>{o&&i(o)}),[]),Nt("section",{className:"vm-with-template",children:[n&&Nt(kl,{}),Nt("div",{className:"vm-with-template-body vm-block",children:[Nt("div",{className:"vm-with-template-body__expr",children:Nt(Ka,{type:"textarea",label:"MetricsQL query with optional WITH expressions",value:o,error:a,autofocus:!0,onEnter:s,onChange:e=>{l(e)}})}),Nt("div",{className:"vm-with-template-body__result",children:Nt(Ka,{type:"textarea",label:"MetricsQL query after expanding WITH expressions and applying other optimizations",value:t,disabled:!0})}),Nt("div",{className:"vm-with-template-body-top",children:Nt(da,{variant:"contained",onClick:s,startIcon:Nt(qn,{}),children:"Expand"})})]}),Nt("div",{className:"vm-block",children:Nt(_p,{})})]})},kp=()=>{const{serverUrl:e}=Mt(),[t,n]=(0,r.useState)(null),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)();return{data:t,error:o,loading:a,fetchData:async(t,r)=>{const a=((e,t,n)=>`${e}/metric-relabel-debug?${["format=json",`relabel_configs=${encodeURIComponent(t)}`,`metric=${encodeURIComponent(n)}`].join("&")}`)(e,t,r);i(!0);try{const e=await fetch(a),t=await e.json();n(t.error?null:t),l(String(t.error||""))}catch(Yp){Yp instanceof Error&&"AbortError"!==Yp.name&&l(`${Yp.name}: ${Yp.message}`)}i(!1)}}},Sp={config:'- if: \'{bar_label=~"b.*"}\'\n  source_labels: [foo_label, bar_label]\n  separator: "_"\n  target_label: foobar\n- action: labeldrop\n  regex: "foo_.*"\n- target_label: job\n  replacement: "my-application-2"',labels:'{__name__="my_metric", bar_label="bar", foo_label="foo", job="my-application", instance="192.168.0.1"}'},xp=()=>{const[e,t]=je(),{data:n,loading:a,error:i,fetchData:o}=kp(),[l,s]=km("","config"),[c,u]=km("","labels"),d=(0,r.useCallback)((()=>{o(l,c),e.set("config",l),e.set("labels",c),t(e)}),[l,c]);return(0,r.useEffect)((()=>{const t=e.get("config")||"",n=e.get("labels")||"";(n||t)&&(o(t,n),s(t),u(n))}),[]),Nt("section",{className:"vm-relabeling",children:[a&&Nt(kl,{}),Nt("div",{className:"vm-relabeling-header vm-block",children:[Nt("div",{className:"vm-relabeling-header-configs",children:Nt(Ka,{type:"textarea",label:"Relabel configs",value:l,autofocus:!0,onChange:e=>{s(e||"")},onEnter:d})}),Nt("div",{className:"vm-relabeling-header__labels",children:Nt(Ka,{type:"textarea",label:"Labels",value:c,onChange:e=>{u(e||"")},onEnter:d})}),Nt("div",{className:"vm-relabeling-header-bottom",children:[Nt("a",{className:"vm-link vm-link_with-icon",target:"_blank",href:"https://docs.victoriametrics.com/relabeling.html",rel:"help noreferrer",children:[Nt(In,{}),"Relabeling cookbook"]}),Nt("a",{className:"vm-link vm-link_with-icon",target:"_blank",href:"https://docs.victoriametrics.com/vmagent.html#relabeling",rel:"help noreferrer",children:[Nt(or,{}),"Documentation"]}),Nt(da,{variant:"text",onClick:()=>{const{config:n,labels:r}=Sp;s(n),u(r),o(n,r),e.set("config",n),e.set("labels",r),t(e)},children:"Try example"}),Nt(da,{variant:"contained",onClick:d,startIcon:Nt(qn,{}),children:"Submit"})]})]}),i&&Nt(ra,{variant:"error",children:i}),n&&Nt("div",{className:"vm-relabeling-steps vm-block",children:[n.originalLabels&&Nt("div",{className:"vm-relabeling-steps-item",children:Nt("div",{className:"vm-relabeling-steps-item__row",children:[Nt("span",{children:"Original labels:"}),Nt("code",{dangerouslySetInnerHTML:{__html:n.originalLabels}})]})}),n.steps.map(((e,t)=>Nt("div",{className:"vm-relabeling-steps-item",children:[Nt("div",{className:"vm-relabeling-steps-item__row",children:[Nt("span",{children:"Step:"}),t+1]}),Nt("div",{className:"vm-relabeling-steps-item__row",children:[Nt("span",{children:"Relabeling Rule:"}),Nt("code",{children:Nt("pre",{children:e.rule})})]}),Nt("div",{className:"vm-relabeling-steps-item__row",children:[Nt("span",{children:"Input Labels:"}),Nt("code",{children:Nt("pre",{dangerouslySetInnerHTML:{__html:e.inLabels}})})]}),Nt("div",{className:"vm-relabeling-steps-item__row",children:[Nt("span",{children:"Output labels:"}),Nt("code",{children:Nt("pre",{dangerouslySetInnerHTML:{__html:e.outLabels}})})]})]},t))),n.resultingLabels&&Nt("div",{className:"vm-relabeling-steps-item",children:Nt("div",{className:"vm-relabeling-steps-item__row",children:[Nt("span",{children:"Resulting labels:"}),Nt("code",{dangerouslySetInnerHTML:{__html:n.resultingLabels}})]})})]})]})},Cp=e=>{let{rows:t,columns:n,defaultOrderBy:a,defaultOrderDir:i,copyToClipboard:o,paginationOffset:l}=e;const[s,c]=(0,r.useState)(a),[u,d]=(0,r.useState)(i||"desc"),[h,m]=(0,r.useState)(null),p=(0,r.useMemo)((()=>{const{startIndex:e,endIndex:n}=l;return Am(t,Nm(u,s)).slice(e,n)}),[t,s,u,l]),f=(e,t)=>async()=>{if(h!==t)try{await navigator.clipboard.writeText(String(e)),m(t)}catch(Yp){console.error(Yp)}};return(0,r.useEffect)((()=>{if(null===h)return;const e=setTimeout((()=>m(null)),2e3);return()=>clearTimeout(e)}),[h]),Nt("table",{className:"vm-table",children:[Nt("thead",{className:"vm-table-header",children:Nt("tr",{className:"vm-table__row vm-table__row_header",children:[n.map((e=>{return Nt("th",{className:"vm-table-cell vm-table-cell_header vm-table-cell_sort",onClick:(t=e.key,()=>{d((e=>"asc"===e&&s===t?"desc":"asc")),c(t)}),children:Nt("div",{className:"vm-table-cell__content",children:[Nt("div",{children:String(e.title||e.key)}),Nt("div",{className:Er()({"vm-table__sort-icon":!0,"vm-table__sort-icon_active":s===e.key,"vm-table__sort-icon_desc":"desc"===u&&s===e.key}),children:Nt(jn,{})})]})},String(e.key));var t})),o&&Nt("th",{className:"vm-table-cell vm-table-cell_header"})]})}),Nt("tbody",{className:"vm-table-body",children:p.map(((e,t)=>Nt("tr",{className:"vm-table__row",children:[n.map((t=>Nt("td",{className:Er()({"vm-table-cell":!0,[`${t.className}`]:t.className}),children:e[t.key]||"-"},String(t.key)))),o&&Nt("td",{className:"vm-table-cell vm-table-cell_right",children:e[o]&&Nt("div",{className:"vm-table-cell__content",children:Nt(ba,{title:h===t?"Copied":"Copy row",children:Nt(da,{variant:"text",color:h===t?"success":"gray",size:"small",startIcon:Nt(h===t?Xn:rr,{}),onClick:f(e[o],t),ariaLabel:"copy row"})})})})]},t)))})]})},Ep=()=>{const{isMobile:e}=ta(),{timezone:t}=fn(),{data:n,lastUpdated:a,isLoading:o,error:l,fetchData:s}=(()=>{const{serverUrl:e}=Mt(),[t,n]=(0,r.useState)([]),[a,o]=(0,r.useState)(i()().format(It)),[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(),d=(0,r.useMemo)((()=>`${e}/api/v1/status/active_queries`),[e]),h=async()=>{s(!0);try{const e=await fetch(d),t=await e.json();n(t.data),o(i()().format("HH:mm:ss:SSS")),e.ok?u(void 0):u(`${t.errorType}\r\n${null===t||void 0===t?void 0:t.error}`)}catch(Yp){Yp instanceof Error&&u(`${Yp.name}: ${Yp.message}`)}s(!1)};return(0,r.useEffect)((()=>{h().catch(console.error)}),[d]),{data:t,lastUpdated:a,isLoading:l,error:c,fetchData:h}})(),c=(0,r.useMemo)((()=>n.map((e=>{const t=i()(e.start).tz().format(Pt),n=i()(e.end).tz().format(Pt);return{duration:e.duration,remote_addr:e.remote_addr,query:e.query,args:`${t} to ${n}, step=${Wt(e.step)}`,data:JSON.stringify(e,null,2)}}))),[n,t]),u=(0,r.useMemo)((()=>{if(null===c||void 0===c||!c.length)return[];const e=Object.keys(c[0]),t={remote_addr:"client address"},n=["data"];return e.filter((e=>!n.includes(e))).map((e=>({key:e,title:t[e]||e})))}),[c]);return Nt("div",{className:"vm-active-queries",children:[o&&Nt(kl,{}),Nt("div",{className:"vm-active-queries-header",children:[!c.length&&!l&&Nt(ra,{variant:"info",children:"There are currently no active queries running"}),l&&Nt(ra,{variant:"error",children:l}),Nt("div",{className:"vm-active-queries-header-controls",children:[Nt(da,{variant:"contained",onClick:async()=>{s().catch(console.error)},startIcon:Nt(zn,{}),children:"Update"}),Nt("div",{className:"vm-active-queries-header__update-msg",children:["Last updated: ",a]})]})]}),!!c.length&&Nt("div",{className:Er()({"vm-block":!0,"vm-block_mobile":e}),children:Nt(Cp,{rows:c,columns:u,defaultOrderBy:"duration",copyToClipboard:"data",paginationOffset:{startIndex:0,endIndex:1/0}})})]})},Np=e=>{let{onClose:t,onUpload:n}=e;const{isMobile:a}=ta(),[i,o]=(0,r.useState)(""),[l,s]=(0,r.useState)(""),c=(0,r.useMemo)((()=>{try{return JSON.parse(i),""}catch(Yp){return Yp instanceof Error?Yp.message:"Unknown error"}}),[i]),u=()=>{s(c),c||(n(i),t())};return Nt("div",{className:Er()({"vm-json-form vm-json-form_one-field":!0,"vm-json-form_mobile vm-json-form_one-field_mobile":a}),children:[Nt(Ka,{value:i,label:"JSON",type:"textarea",error:l,autofocus:!0,onChange:e=>{s(""),o(e)},onEnter:u}),Nt("div",{className:"vm-json-form-footer",children:Nt("div",{className:"vm-json-form-footer__controls vm-json-form-footer__controls_right",children:[Nt(da,{variant:"outlined",color:"error",onClick:t,children:"Cancel"}),Nt(da,{variant:"contained",onClick:u,children:"apply"})]})})]})},Ap=e=>{let{data:t,period:n}=e;const{isMobile:a}=ta(),{tableCompact:i}=Fr(),o=jr(),[l,s]=(0,r.useState)([]),[c,u]=(0,r.useState)(),[d,h]=(0,r.useState)(),[m,p]=(0,r.useState)(!1),[f,v]=(0,r.useState)([]),[g,y]=(0,r.useState)(),_=(0,r.useMemo)((()=>Qh(d||[]).map((e=>e.key))),[d]),b=(0,r.useMemo)((()=>{const e=t.some((e=>"matrix"===e.data.resultType));return t.some((e=>"vector"===e.data.resultType))&&e?Lr:e?Lr.filter((e=>"chart"===e.value)):Lr.filter((e=>"chart"!==e.value))}),[t]),[w,k]=(0,r.useState)(b[0].value),{yaxis:S,spanGaps:x}=Br(),C=qr(),E=e=>{C({type:"SET_YAXIS_LIMITS",payload:e})};return(0,r.useEffect)((()=>{const e="chart"===w?"matrix":"vector",n=t.filter((t=>t.data.resultType===e&&t.trace)).map((e=>{var t,n;return e.trace?new El(e.trace,(null===e||void 0===e||null===(t=e.vmui)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.query)||"Query"):null}));s(n.filter(Boolean))}),[t,w]),(0,r.useEffect)((()=>{const e=[],n=[],r=[];t.forEach(((t,a)=>{const i=t.data.result.map((e=>{var n,r,i;return{...e,group:Number(null!==(n=null===(r=t.vmui)||void 0===r||null===(i=r.params)||void 0===i?void 0:i.id)&&void 0!==n?n:a)+1}}));var o,l;"matrix"===t.data.resultType?(n.push(...i),e.push((null===(o=t.vmui)||void 0===o||null===(l=o.params)||void 0===l?void 0:l.query)||"Query")):r.push(...i)})),v(e),u(n),h(r)}),[t]),(0,r.useEffect)((()=>{p(!!c&&Ml(c))}),[c]),Nt("div",{className:Er()({"vm-query-analyzer-view":!0,"vm-query-analyzer-view_mobile":a}),children:[!!l.length&&Nt(Ul,{traces:l,onDeleteClick:e=>{s((t=>t.filter((t=>t.idValue!==e.idValue))))}}),Nt("div",{className:Er()({"vm-block":!0,"vm-block_mobile":a}),children:[Nt("div",{className:"vm-custom-panel-body-header",children:[Nt("div",{className:"vm-custom-panel-body-header__tabs",children:Nt($r,{activeItem:w,items:b,onChange:e=>{k(e)}})}),Nt("div",{className:"vm-custom-panel-body-header__graph-controls",children:["chart"===w&&Nt(Ca,{}),"chart"===w&&Nt(Yh,{yaxis:S,setYaxisLimits:E,toggleEnableLimits:()=>{C({type:"TOGGLE_ENABLE_YAXIS_LIMITS"})},spanGaps:{value:x,onChange:e=>{C({type:"SET_SPAN_GAPS",payload:e})}}}),"table"===w&&Nt(em,{columns:_,selectedColumns:g,onChangeColumns:y,tableCompact:i,toggleTableCompact:()=>{o({type:"TOGGLE_TABLE_COMPACT"})}})]})]}),c&&n&&"chart"===w&&Nt(Uh,{data:c,period:n,customStep:n.step||"1s",query:f,yaxis:S,setYaxisLimits:E,setPeriod:()=>null,height:a?.5*window.innerHeight:500,isHistogram:m,spanGaps:x}),d&&"code"===w&&Nt(Kh,{data:d}),d&&"table"===w&&Nt(Gh,{data:d,displayColumns:g})]})]})},Mp=e=>{var t,n;let{data:a,period:o}=e;const l=(0,r.useMemo)((()=>a.filter((e=>e.stats&&"matrix"===e.data.resultType))),[a]),s=(0,r.useMemo)((()=>{var e,t;return null===(e=a.find((e=>{var t;return null===e||void 0===e||null===(t=e.vmui)||void 0===t?void 0:t.comment})))||void 0===e||null===(t=e.vmui)||void 0===t?void 0:t.comment}),[a]),c=(0,r.useMemo)((()=>{if(!o)return"";return`${i()(1e3*o.start).tz().format(Pt)} - ${i()(1e3*o.end).tz().format(Pt)}`}),[o]),{value:u,setTrue:d,setFalse:h}=ma(!1);return Nt(Ct.FK,{children:[Nt("div",{className:"vm-query-analyzer-info-header",children:[Nt(da,{startIcon:Nt(In,{}),variant:"outlined",color:"warning",onClick:d,children:"Show report info"}),o&&Nt(Ct.FK,{children:[Nt("div",{className:"vm-query-analyzer-info-header__period",children:[Nt(ir,{})," step: ",o.step]}),Nt("div",{className:"vm-query-analyzer-info-header__period",children:[Nt(Hn,{})," ",c]})]})]}),u&&Nt(_a,{title:"Report info",onClose:h,children:Nt("div",{className:"vm-query-analyzer-info",children:[s&&Nt("div",{className:"vm-query-analyzer-info-item vm-query-analyzer-info-item_comment",children:[Nt("div",{className:"vm-query-analyzer-info-item__title",children:"Comment:"}),Nt("div",{className:"vm-query-analyzer-info-item__text",children:s})]}),l.map(((e,t)=>{var n;return Nt("div",{className:"vm-query-analyzer-info-item",children:[Nt("div",{className:"vm-query-analyzer-info-item__title",children:l.length>1?`Query ${t+1}:`:"Stats:"}),Nt("div",{className:"vm-query-analyzer-info-item__text",children:[Object.entries(e.stats||{}).map((e=>{let[t,n]=e;return Nt("div",{children:[t,": ",null!==n&&void 0!==n?n:"-"]},t)})),"isPartial: ",String(null!==(n=e.isPartial)&&void 0!==n?n:"-")]})]},t)})),Nt("div",{className:"vm-query-analyzer-info-type",children:null!==(t=l[0])&&void 0!==t&&null!==(n=t.vmui)&&void 0!==n&&n.params?"The report was created using vmui":"The report was created manually"})]})})]})},Tp=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(""),i=(0,r.useMemo)((()=>!!e.length),[e]),{value:o,setTrue:l,setFalse:s}=ma(!1),c=(0,r.useMemo)((()=>{var t,n;if(!e)return;const r=null===(t=e[0])||void 0===t||null===(n=t.vmui)||void 0===n?void 0:n.params,a={start:+((null===r||void 0===r?void 0:r.start)||0),end:+((null===r||void 0===r?void 0:r.end)||0),step:null===r||void 0===r?void 0:r.step,date:""};if(!r){const t=e.filter((e=>"matrix"===e.data.resultType)).map((e=>e.data.result)).flat().map((e=>{var t;return e.values?null===(t=e.values)||void 0===t?void 0:t.map((e=>e[0])):[0]})).flat(),n=Array.from(new Set(t.filter(Boolean))).sort(((e,t)=>e-t));a.start=n[0],a.end=n[n.length-1],a.step=Yt((e=>{const t=e.slice(1).map(((t,n)=>t-e[n])),n={};t.forEach((e=>{const t=e.toString();n[t]=(n[t]||0)+1}));let r=0,a=0;for(const i in n)n[i]>a&&(a=n[i],r=Number(i));return r})(n))}return a.date=Jt(tn(a.end)),a}),[e]),u=e=>{try{const n=JSON.parse(e),r=Array.isArray(n)?n:[n];(e=>e.every((e=>{if("object"===typeof e&&null!==e){const t=e.data;if("object"===typeof t&&null!==t){const e=t.result,n=t.resultType;return Array.isArray(e)&&"string"===typeof n}}return!1})))(r)?t(r):a("Invalid structure - JSON does not match the expected format")}catch(Yp){Yp instanceof Error&&a(`${Yp.name}: ${Yp.message}`)}},d=e=>{e.map((e=>{const t=new FileReader;t.onload=e=>{var t;const n=String(null===(t=e.target)||void 0===t?void 0:t.result);u(n)},t.readAsText(e)}))},h=e=>{a("");const t=Array.from(e.target.files||[]);d(t),e.target.value=""},{files:m,dragging:p}=Zm();return(0,r.useEffect)((()=>{d(m)}),[m]),Nt("div",{className:"vm-trace-page",children:[i&&Nt("div",{className:"vm-trace-page-header",children:[Nt("div",{className:"vm-trace-page-header-errors",children:Nt(Mp,{data:e,period:c})}),Nt("div",{children:Nt(Gm,{onOpenModal:l,onChange:h})})]}),n&&Nt("div",{className:"vm-trace-page-header-errors-item vm-trace-page-header-errors-item_margin-bottom",children:[Nt(ra,{variant:"error",children:n}),Nt(da,{className:"vm-trace-page-header-errors-item__close",startIcon:Nt(Ln,{}),variant:"text",color:"error",onClick:()=>{a("")}})]}),i&&Nt(Ap,{data:e,period:c}),!i&&Nt("div",{className:"vm-trace-page-preview",children:[Nt("p",{className:"vm-trace-page-preview__text",children:["Please, upload file with JSON response content.","\n","The file must contain query information in JSON format.","\n","Graph will be displayed after file upload.","\n","Attach files by dragging & dropping, selecting or pasting them."]}),Nt(Gm,{onOpenModal:l,onChange:h})]}),o&&Nt(_a,{title:"Paste JSON",onClose:s,children:Nt(Np,{onClose:s,onUpload:u})}),p&&Nt("div",{className:"vm-trace-page__dropzone"})]})},$p=()=>{const{serverUrl:e}=Mt(),[t,n]=je(),[a,i]=(0,r.useState)(new Map),[o,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(),[u,d]=(0,r.useState)(),[h,m]=(0,r.useState)();return{data:a,error:h,metricsError:s,flagsError:u,loading:o,applyFilters:(0,r.useCallback)((async(r,a)=>{if(c(a?"":"metrics are required"),d(r?"":"flags are required"),!a||!r)return;t.set("flags",r),t.set("metrics",a),n(t);const o=((e,t,n)=>`${e}/downsampling-filters-debug?${[`flags=${encodeURIComponent(t)}`,`metrics=${encodeURIComponent(n)}`].join("&")}`)(e,r,a);l(!0);try{var s,u;const e=await fetch(o),t=await e.json();i(new Map(Object.entries(t.result||{}))),c((null===(s=t.error)||void 0===s?void 0:s.metrics)||""),d((null===(u=t.error)||void 0===u?void 0:u.flags)||""),m("")}catch(Yp){Yp instanceof Error&&"AbortError"!==Yp.name&&m(`${Yp.name}: ${Yp.message}`)}l(!1)}),[e])}},Lp={flags:'-downsampling.period={env="dev"}:7d:5m,{env="dev"}:30d:30m\n-downsampling.period=30d:1m\n-downsampling.period=60d:5m\n',metrics:'up\nup{env="dev"}\nup{env="prod"}'},Pp=()=>{const[e]=je(),{data:t,loading:n,error:a,metricsError:i,flagsError:o,applyFilters:l}=$p(),[s,c]=(0,r.useState)(e.get("metrics")||""),[u,d]=(0,r.useState)(e.get("flags")||""),h=(0,r.useCallback)((e=>{c(e)}),[c]),m=(0,r.useCallback)((e=>{d(e)}),[d]),p=(0,r.useCallback)((()=>{l(u,s)}),[l,u,s]),f=(0,r.useCallback)((()=>{const{flags:t,metrics:n}=Lp;d(t),c(n),l(t,n),e.set("flags",t),e.set("metrics",n)}),[Lp,d,c,e]);(0,r.useEffect)((()=>{u&&s&&p()}),[]);const v=[];for(const[r,g]of t)v.push(Nt("tr",{className:"vm-table__row",children:[Nt("td",{className:"vm-table-cell",children:r}),Nt("td",{className:"vm-table-cell",children:g.join(" ")})]}));return Nt("section",{className:"vm-downsampling-filters",children:[n&&Nt(kl,{}),Nt("div",{className:"vm-downsampling-filters-body vm-block",children:[Nt("div",{className:"vm-downsampling-filters-body__expr",children:[Nt("div",{className:"vm-retention-filters-body__title",children:Nt("p",{children:["Provide a list of flags for downsampling configuration. Note that only ",Nt("code",{children:"-downsampling.period"})," and ",Nt("code",{children:"-dedup.minScrapeInterval"})," flags are supported"]})}),Nt(Ka,{type:"textarea",label:"Flags",value:u,error:a||o,autofocus:!0,onEnter:p,onChange:m,placeholder:"-downsampling.period=30d:1m -downsampling.period=7d:5m -dedup.minScrapeInterval=30s"})]}),Nt("div",{className:"vm-downsampling-filters-body__expr",children:[Nt("div",{className:"vm-retention-filters-body__title",children:Nt("p",{children:"Provide a list of metrics to check downsampling configuration."})}),Nt(Ka,{type:"textarea",label:"Metrics",value:s,error:a||i,onEnter:p,onChange:h,placeholder:'up{env="dev"}\nup{env="prod"}\n'})]}),Nt("div",{className:"vm-downsampling-filters-body__result",children:Nt("table",{className:"vm-table",children:[Nt("thead",{className:"vm-table-header",children:Nt("tr",{children:[Nt("th",{className:"vm-table-cell vm-table-cell_header",children:"Metric"}),Nt("th",{className:"vm-table-cell vm-table-cell_header",children:"Applied downsampling rules"})]})}),Nt("tbody",{className:"vm-table-body",children:v})]})}),Nt("div",{className:"vm-downsampling-filters-body-top",children:[Nt("a",{className:"vm-link vm-link_with-icon",target:"_blank",href:"https://docs.victoriametrics.com/#downsampling",rel:"help noreferrer",children:[Nt(or,{}),"Documentation"]}),Nt(da,{variant:"text",onClick:f,children:"Try example"}),Nt(da,{variant:"contained",onClick:p,startIcon:Nt(qn,{}),children:"Apply"})]})]})]})},Ip=()=>{const{serverUrl:e}=Mt(),[t,n]=je(),[a,i]=(0,r.useState)(new Map),[o,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(),[u,d]=(0,r.useState)(),[h,m]=(0,r.useState)();return{data:a,error:h,metricsError:s,flagsError:u,loading:o,applyFilters:(0,r.useCallback)((async(r,a)=>{if(c(a?"":"metrics are required"),d(r?"":"flags are required"),!a||!r)return;t.set("flags",r),t.set("metrics",a),n(t);const o=((e,t,n)=>`${e}/retention-filters-debug?${[`flags=${encodeURIComponent(t)}`,`metrics=${encodeURIComponent(n)}`].join("&")}`)(e,r,a);l(!0);try{var s,u;const e=await fetch(o),t=await e.json();i(new Map(Object.entries(t.result||{}))),c((null===(s=t.error)||void 0===s?void 0:s.metrics)||""),d((null===(u=t.error)||void 0===u?void 0:u.flags)||""),m("")}catch(Yp){Yp instanceof Error&&"AbortError"!==Yp.name&&m(`${Yp.name}: ${Yp.message}`)}l(!1)}),[e])}},Op={flags:'-retentionPeriod=1y\n-retentionFilters={env!="prod"}:2w\n',metrics:'up\nup{env="dev"}\nup{env="prod"}'},Rp=()=>{const[e]=je(),{data:t,loading:n,error:a,metricsError:i,flagsError:o,applyFilters:l}=Ip(),[s,c]=(0,r.useState)(e.get("metrics")||""),[u,d]=(0,r.useState)(e.get("flags")||""),h=(0,r.useCallback)((e=>{c(e)}),[c]),m=(0,r.useCallback)((e=>{d(e)}),[d]),p=(0,r.useCallback)((()=>{l(u,s)}),[l,u,s]),f=(0,r.useCallback)((()=>{const{flags:t,metrics:n}=Op;d(t),c(n),l(t,n),e.set("flags",t),e.set("metrics",n)}),[Op,d,c,e]);(0,r.useEffect)((()=>{u&&s&&p()}),[]);const v=[];for(const[r,g]of t)v.push(Nt("tr",{className:"vm-table__row",children:[Nt("td",{className:"vm-table-cell",children:r}),Nt("td",{className:"vm-table-cell",children:g})]}));return Nt("section",{className:"vm-retention-filters",children:[n&&Nt(kl,{}),Nt("div",{className:"vm-retention-filters-body vm-block",children:[Nt("div",{className:"vm-retention-filters-body__expr",children:[Nt("div",{className:"vm-retention-filters-body__title",children:Nt("p",{children:["Provide a list of flags for retention configuration. Note that only ",Nt("code",{children:"-retentionPeriod"})," and ",Nt("code",{children:"-retentionFilters"})," flags are supported."]})}),Nt(Ka,{type:"textarea",label:"Flags",value:u,error:a||o,autofocus:!0,onEnter:p,onChange:m,placeholder:'-retentionPeriod=4w -retentionFilters=up{env="dev"}:2w'})]}),Nt("div",{className:"vm-retention-filters-body__expr",children:[Nt("div",{className:"vm-retention-filters-body__title",children:Nt("p",{children:"Provide a list of metrics to check retention configuration."})}),Nt(Ka,{type:"textarea",label:"Metrics",value:s,error:a||i,onEnter:p,onChange:h,placeholder:'up{env="dev"}\nup{env="prod"}\n'})]}),Nt("div",{className:"vm-retention-filters-body__result",children:Nt("table",{className:"vm-table",children:[Nt("thead",{className:"vm-table-header",children:Nt("tr",{children:[Nt("th",{className:"vm-table-cell vm-table-cell_header",children:"Metric"}),Nt("th",{className:"vm-table-cell vm-table-cell_header",children:"Applied retention"})]})}),Nt("tbody",{className:"vm-table-body",children:v})]})}),Nt("div",{className:"vm-retention-filters-body-top",children:[Nt("a",{className:"vm-link vm-link_with-icon",target:"_blank",href:"https://docs.victoriametrics.com/#retention-filters",rel:"help noreferrer",children:[Nt(or,{}),"Documentation"]}),Nt(da,{variant:"text",onClick:f,children:"Try example"}),Nt(da,{variant:"contained",onClick:p,startIcon:Nt(qn,{}),children:"Apply"})]})]})]})},Dp=e=>{try{return JSON.parse(e)}catch(Yp){return null}},zp=e=>{let{hideQuery:t,showAllSeries:n}=e;const{query:a}=Cn(),{period:i}=fn(),{displayType:o,reduceMemUsage:l,seriesLimits:s}=Fr(),{serverUrl:c}=Mt(),[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(),[p,f]=(0,r.useState)(),[v,g]=(0,r.useState)([]),[y,_]=(0,r.useState)(),b=(0,r.useRef)(new AbortController),w=(0,r.useMemo)((()=>{if(f(""),g([]),i)if(c)if(a.every((e=>!e.trim())))g(a.map((()=>pt.validQuery)));else{if(bt(c)){const e={...i};return a.map((t=>((e,t,n,r)=>{const a=new URLSearchParams({"match[]":t,start:n.start.toString(),end:n.end.toString()});return r&&a.set("reduce_mem_usage","1"),`${e}/api/v1/export?${a}`})(c,t,e,l)))}f(pt.validServer)}else f(pt.emptyServer)}),[c,i,t,l]),k=(0,r.useCallback)((async e=>{let{fetchUrl:n,stateSeriesLimits:r,showAllSeries:a}=e;b.current.abort(),b.current=new AbortController;const{signal:i}=b.current;d(!0);try{const e=[],l=a?1/0:+r[o]||1/0;let s=1,c=0;for await(const r of n){if(null===t||void 0===t?void 0:t.includes(s-1)){g((e=>[...e,""])),s++;continue}const n=await fetch(r,{signal:i}),a=await n.text();if(n.ok&&n.body){g((e=>[...e,""]));const t=l-e.length,n=a.split("\n").filter((e=>e));n.slice(0,t).sort().forEach((t=>{const n=Dp(t);n&&e.push({group:s,metric:n.metric,values:n.values.map(((e,t)=>[n.timestamps[t]/1e3,e]))})})),c+=n.length}else e.push({metric:{},values:[],group:s}),f(a),g((e=>[...e,`${a}`]));s++}const u=`Showing ${e.length} series out of ${c} series due to performance reasons. Please narrow down the query, so it returns less series`;_(c>l?u:""),m(e),d(!1)}catch(Yp){d(!1),Yp instanceof Error&&"AbortError"!==Yp.name&&(f(p),console.error(Yp))}}),[o,t]),S=(0,r.useCallback)((()=>{b.current.abort(),m([])}),[b]);return(0,r.useEffect)((()=>{if(null===w||void 0===w||!w.length)return;const e=setTimeout(k,400,{fetchUrl:w,stateSeriesLimits:s,showAllSeries:n});return()=>{var t;null===(t=b.current)||void 0===t||t.abort(),clearTimeout(e)}}),[w,s,n]),{fetchUrl:w,isLoading:u,data:h,error:p,queryErrors:v,setQueryErrors:g,warning:y,abortFetch:S}},Fp=()=>Nt(Il,{href:"https://docs.victoriametrics.com/keyconcepts/#raw-samples",underlined:!0,children:"raw samples"}),jp=()=>Nt(Il,{underlined:!0,href:"https://docs.victoriametrics.com/keyconcepts/#query-data",children:"Query API"}),Hp=()=>Nt(Il,{underlined:!0,href:"https://docs.victoriametrics.com/keyconcepts/#filtering",children:"time series selector"}),Up=()=>{Pl();const{isMobile:e}=ta(),{displayType:t}=Fr(),{query:n}=Cn(),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!n[0]),[s,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!0),{data:h,error:m,isLoading:p,warning:f,queryErrors:v,setQueryErrors:g,abortFetch:y}=zp({hideQuery:a,showAllSeries:s}),_=(0,r.useRef)(null),b=!o&&m;return Nt("div",{className:Er()({"vm-custom-panel":!0,"vm-custom-panel_mobile":e}),children:[Nt(xl,{label:"Time series selector",queryErrors:o?[]:v,setQueryErrors:g,setHideError:l,stats:[],isLoading:p,onHideQuery:e=>{i(e)},onRunQuery:()=>{l(!1)},abortFetch:y,hideButtons:{traceQuery:!0,disableCache:!0},includeFunctions:!1}),u&&Nt(ra,{variant:"info",children:Nt("div",{className:"vm-explore-metrics-header-description",children:[Nt("p",{children:["This page provides a dedicated view for querying and displaying ",Nt(Fp,{})," from VictoriaMetrics. It expects only ",Nt(Hp,{})," as a query argument. Users often assume that the ",Nt(jp,{})," returns data exactly as stored, but data samples and timestamps may be modified by the API."]}),Nt(da,{variant:"text",size:"small",startIcon:Nt(Ln,{}),onClick:()=>{d(!1)},ariaLabel:"close tips"})]})}),b&&Nt(ra,{variant:"error",children:m}),f&&Nt(Bl,{warning:f,query:n,onChange:c}),Nt("div",{className:Er()({"vm-custom-panel-body":!0,"vm-custom-panel-body_mobile":e,"vm-block":!0,"vm-block_mobile":e}),children:[p&&Nt(Ll,{}),Nt("div",{className:"vm-custom-panel-body-header",ref:_,children:Nt("div",{className:"vm-custom-panel-body-header__tabs",children:Nt(Pr,{tabFilter:e=>e.value!==mt.table})})}),Nt(nm,{graphData:h,liveData:h,isHistogram:!1,displayType:t,controlsRef:_})]})]})},Vp=()=>{const[e,t]=(0,r.useState)(!1);return Nt(Ct.FK,{children:Nt(Le,{children:Nt(ia,{children:Nt(Ct.FK,{children:[Nt(Qm,{onLoaded:t}),e&&Nt(Se,{children:Nt(we,{path:"/",element:Nt(Hi,{}),children:[Nt(we,{path:We.home,element:Nt(om,{})}),Nt(we,{path:We.rawQuery,element:Nt(Up,{})}),Nt(we,{path:We.metrics,element:Nt(mp,{})}),Nt(we,{path:We.cardinality,element:Nt(zm,{})}),Nt(we,{path:We.topQueries,element:Nt(Bm,{})}),Nt(we,{path:We.trace,element:Nt(Jm,{})}),Nt(we,{path:We.queryAnalyzer,element:Nt(Tp,{})}),Nt(we,{path:We.dashboards,element:Nt(um,{})}),Nt(we,{path:We.withTemplate,element:Nt(wp,{})}),Nt(we,{path:We.relabel,element:Nt(xp,{})}),Nt(we,{path:We.activeQueries,element:Nt(Ep,{})}),Nt(we,{path:We.icons,element:Nt(pp,{})}),Nt(we,{path:We.downsamplingDebug,element:Nt(Pp,{})}),Nt(we,{path:We.retentionDebug,element:Nt(Rp,{})})]})})]})})})})},Bp=e=>{e&&n.e(685).then(n.bind(n,685)).then((t=>{let{onCLS:n,onINP:r,onFCP:a,onLCP:i,onTTFB:o}=t;n(e),r(e),a(e),i(e),o(e)}))},qp=document.getElementById("root");qp&&(0,r.render)(Nt(Vp,{}),qp),Bp()})()})();