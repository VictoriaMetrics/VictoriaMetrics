# Ensure clients select a server that matches all tags, even when the other
# server matches one tag and doesn't match the other.
---
topology_description:
  type: ReplicaSetNoPrimary
  servers:
  - &1
    address: b:27017
    avg_rtt_ms: 5
    type: RSSecondary
    tags:
      rack: one
      data_center: nyc
  - &2
    address: c:27017
    avg_rtt_ms: 5
    type: RSSecondary
    tags:
      rack: two           # mismatch
      data_center: nyc    # match
operation: read
read_preference:
  mode: Secondary
  tag_sets:
  - data_center: nyc
    rack: one
  - other_tag: doesntexist
suitable_servers:
- *1
in_latency_window:
- *1
